(()=>{var e,t={8366:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initPage:()=>M});const a=window.wp.element;window.wp.domReady;const i=window.wp.components,o=window.wp.apiFetch;var r=n.n(o);const l=window.wp.date,s=window.wp.url;var c=function(){return c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)};const u=function(e){var t=e.url,n=e.path,a=(0,l.format)("YmjHi").substring(0,11)+"0";return r()(c(c(c({},e),t&&{url:d(e)?(0,s.addQueryArgs)(t,{nabts:a}):t}),n&&{path:(0,s.addQueryArgs)(n,{nabts:a})}))};var d=function(e){var t,n;return!!(null===(t=e.url)||void 0===t?void 0:t.includes("/wp-json/"))||!!(null===(n=e.url)||void 0===n?void 0:n.includes("rest_route"))||!!Object.keys(e).includes("rest_route")};const m=window.wp.i18n,v=window.lodash,b=window.nab.components,p=window.nab.data;var g=function(){return g=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},g.apply(this,arguments)},f=function(e){var t=_(e);return a.createElement("div",{className:"nelio-ab-testing-deactivation"},a.createElement(i.Button,{className:"nelio-ab-testing-deactivation__button",variant:"link",onClick:t.openModal},(0,m._x)("Deactivate","command","nelio-ab-testing")),a.createElement(h,{state:t}))},h=function(e){var t,n=e.state;if(!n.isModalOpen)return null;switch(n.reason.value){case"temporary-deactivation":t=w;break;case"plugin-doesnt-work":t=x;break;default:t=E}return a.createElement(i.Modal,{className:"nelio-ab-testing-deactivation__modal",title:(0,m._x)("Nelio A/B Testing Deactivation","text","nelio-ab-testing"),isDismissible:!n.isLocked,shouldCloseOnEsc:!n.isLocked,shouldCloseOnClickOutside:!n.isLocked,onRequestClose:n.closeModal},a.createElement(t,g({},n)))},w=function(e){var t=e.deactivate,n=e.isDeactivating,o=e.mainActionLabel,r=e.reason,l=e.setReason;return a.createElement(a.Fragment,null,a.createElement(b.RadioControl,{selected:r.value,options:S,onChange:function(e){return l({value:e,details:""})},disabled:n}),a.createElement("br",null),a.createElement("div",{className:"nelio-ab-testing-deactivation__actions"},a.createElement("span",null),a.createElement(i.Button,{variant:"primary",disabled:n||"clean-stuff"===r.value,onClick:function(){return t()}},o)))},x=function(e){var t=e.closeModal,n=e.lock,o=e.setReason,r=(0,a.useState)(O),l=r[0],c=r[1],d=l.isTicketSubmitting,b=l.description,f=l.email,h=l.submissionError,w=(0,v.trim)(b).length&&(0,s.isEmail)(f),x=function(e){return c(g(g({},l),e))},E=(0,p.usePluginSetting)("siteId"),_=(0,p.usePluginSetting)("homeUrl"),y=!!(0,p.usePluginSetting)("subscription"),k=(0,p.usePluginSetting)("apiUrl");return a.createElement(a.Fragment,null,a.createElement(i.TextareaControl,{label:(0,m._x)("The Problem:","text","nelio-ab-testing"),disabled:d,placeholder:(0,m._x)("Tell us what’s going on","user","nelio-ab-testing"),value:b,onChange:function(e){return x({description:e})}}),a.createElement(i.TextControl,{label:(0,m._x)("Your Email:","text","nelio-ab-testing"),disabled:d,value:f,onChange:function(e){return x({email:e})}}),h&&a.createElement("p",{className:"nelio-ab-testing-deactivation__warning"},a.createElement(i.Dashicon,{icon:"warning"}),a.createElement("span",null,(0,m.sprintf)(/* translators: email address */ /* translators: email address */
(0,m._x)("Something went wrong and we couldn’t receive your support request. Please try again later or send us an email to %s.","user","nelio-ab-testing"),"support@neliosoftware.com"))),a.createElement("br",null),a.createElement("div",{className:"nelio-ab-testing-deactivation__actions"},a.createElement(i.Button,{variant:"link",onClick:function(){return o({value:"other",details:""})}},(0,m._x)("Back","command","nelio-ab-testing")),a.createElement(i.Button,{variant:"primary",disabled:!w||d,isBusy:d,onClick:function(){n(),x({isTicketSubmitting:!0}),u({url:"".concat(k,"/ticket"),credentials:"omit",method:"POST",mode:"cors",data:{email:f,description:P(b,E,_,y),subject:"I can’t get the plugin to work and need help"}}).then(t).catch((function(){x({submissionError:!0,isTicketSubmitting:!1}),n(!1)}))}},d?(0,m._x)("Submitting…","text","nelio-ab-testing"):(0,m._x)("Submit and Keep Plugin","command","nelio-ab-testing"))))},E=function(e){var t=e.isLocked,n=e.isSubscribed,o=e.mainActionLabel,r=e.cleanAndDeactivate,l=e.reason,s=e.setReason;return a.createElement(a.Fragment,null,a.createElement("p",null,(0,m._x)("If you have a moment, please share why you are deactivating Nelio A/B Testing:","user","nelio-ab-testing")),a.createElement(b.RadioControl,{className:"nelio-ab-testing-deactivation__options",selected:l.value,options:D,onChange:function(e){return s({value:e,details:""})},extraValue:l.details,onExtraChange:function(e){return s(g(g({},l),{details:e}))},disabled:t}),n&&a.createElement("p",{className:"nelio-ab-testing-deactivation__warning"},a.createElement(i.Dashicon,{icon:"warning"}),a.createElement("span",null,(0,m._x)("Please keep in mind your subscription to Nelio A/B Testing will remain active after removing the plugin from this site. If you want to unsubscribe from our service, you can do so from the plugin’s Account page before you deactivate the plugin.","user","nelio-ab-testing"))),a.createElement("div",{className:"nelio-ab-testing-deactivation__actions"},t?a.createElement("span",null):a.createElement(i.Button,{variant:"link",disabled:t,onClick:function(){return r()}},(0,m._x)("Just Delete Data","command","nelio-ab-testing")),a.createElement(i.Button,{variant:"primary",disabled:t||"clean-stuff"===l.value,onClick:function(){return r(l.details?"".concat(l.value,": ").concat(l.details):l.value)}},o)))},_=function(e){var t=e.cleanNonce,n=e.deactivationUrl,i=e.isSubscribed,o=(0,a.useState)(C),r=o[0],l=o[1],s=function(){window.location.href=n},c=function(){return l(g(g({},C),{isModalOpen:!1}))},d="temporary-deactivation"===r.reason.value?y(r.isDeactivating):k(r.isDeactivating);return{isModalOpen:r.isModalOpen,openModal:function(){return l(g(g({},C),{isModalOpen:!0}))},closeModal:c,isDeactivating:r.isDeactivating,isSubscribed:i,mainActionLabel:d,deactivate:function(){l(g(g({},r),{reason:C.reason,isDeactivating:!0,isLocked:!0})),s()},cleanAndDeactivate:function(e){l(g(g({},r),{isDeactivating:!0})),u({path:"/nab/v1/plugin/clean",method:"POST",data:{reason:e,nabnonce:t}}).then(s,c)},isLocked:r.isLocked,lock:function(e){return void 0===e&&(e=!0),l(g(g({},r),{isLocked:e}))},reason:r.reason,setReason:function(e){return l(g(g({},r),{reason:e}))}}},y=function(e){return e?(0,m._x)("Deactivating…","text","nelio-ab-testing"):(0,m._x)("Deactivate","command","nelio-ab-testing")},k=function(e){return e?(0,m._x)("Deleting Data…","text","nelio-ab-testing"):(0,m._x)("Submit and Delete Data","command","nelio-ab-testing")},C={isModalOpen:!1,isDeactivating:!1,isLocked:!1,reason:{value:"temporary-deactivation",details:""}},O={isTicketSubmitting:!1,email:"",description:"",submissionError:!1},S=[{value:"temporary-deactivation",label:(0,m._x)("It’s a temporary deactivation","text","nelio-ab-testing")},{value:"clean-stuff",label:(0,m._x)("Delete Nelio A/B Testing’s data and deactivate plugin","text","nelio-ab-testing")}],D=[{value:"plugin-no-longer-needed",label:(0,m._x)("I no longer need the plugin","text","nelio-ab-testing")},{value:"plugin-doesnt-work",label:(0,m._x)("I couldn’t get the plugin to work","text","nelio-ab-testing")},{value:"better-plugin-found",label:(0,m._x)("I found a better plugin","text","nelio-ab-testing"),extra:(0,m._x)("What’s the plugin’s name?","text","nelio-ab-testing")},{value:"other",label:(0,m._x)("Other","text","nelio-ab-testing"),extra:(0,m._x)("Please share the reason…","user","nelio-ab-testing")}];function P(e,t,n,a){var i=document.createElement("div"),o=function(){return document.createElement("br")},r=document.createElement("strong");r.textContent="Additional Information";var l=document.createElement("ul"),s=document.createElement("li");s.textContent="Site ID: ".concat(t);var c=document.createElement("li");c.textContent="Site URL: ".concat(n);var u=document.createElement("li");return u.textContent="Subscribed: ".concat(a?"yes":"no"),l.appendChild(s),l.appendChild(c),l.appendChild(u),(0,v.trim)(e).split(/\n+/).forEach((function(e){var t=document.createTextNode(e);i.appendChild(t),i.appendChild(o()),i.appendChild(o())})),i.appendChild(r),i.appendChild(o()),i.appendChild(l),i.innerHTML}function M(e){var t,n,o=e.isSubscribed,r=e.cleanNonce,l=e.deactivationUrl,s=document.querySelector(".nelio-ab-testing-deactivate-link");s&&(t=a.createElement(i.SlotFillProvider,null,a.createElement(f,{isSubscribed:o,deactivationUrl:l,cleanNonce:r}),a.createElement(i.Popover.Slot,null)),(n=s)&&(a.createRoot?(0,a.createRoot)(n).render(t):(0,a.render)(t,n)))}}},n={};function a(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,n,i,o)=>{if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],o=e[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&o||r>=o)&&Object.keys(a.O).every((e=>a.O[e](n[s])))?n.splice(s--,1):(l=!1,o<r&&(r=o));if(l){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,i,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={6269:0,6376:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,r=n[0],l=n[1],s=n[2],c=0;if(r.some((t=>0!==e[t]))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(s)var u=s(a)}for(t&&t(n);c<r.length;c++)o=r[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},n=self.webpackChunknab=self.webpackChunknab||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=a.O(void 0,[6376],(()=>a(8366)));i=a.O(i);var o=nab="undefined"==typeof nab?{}:nab;for(var r in i)o[r]=i[r];i.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();