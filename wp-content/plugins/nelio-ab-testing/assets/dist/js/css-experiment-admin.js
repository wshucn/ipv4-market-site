(()=>{var e,t={5537:(e,t,n)=>{"use strict";window.wp.coreData,window.wp.domReady;const r=window.nab.data,a=window.wp.element,i=window.nab.experimentLibrary,s=window.wp.data;function o(e,t){return(0,s.useSelect)(e,t)}const c=window.nab.editor,l=window.wp.url;var d=n(6942),u=n.n(d);const v=window.lodash,m=window.nab.components,b=window.nab.utils,p=window.wp.components,f=window.wp.i18n;var w=function(){var e=_(),t=g(),n=t[0],r=t[1];return a.createElement("div",{className:"nab-css-editor-sidebar__actions"},a.createElement("div",{className:"nab-css-editor-sidebar__back-to-experiment"},a.createElement("a",{className:"nab-css-editor-sidebar__back-to-experiment-link",href:e,title:(0,f._x)("Back to test…","command","nelio-ab-testing")},a.createElement(p.Dashicon,{icon:"arrow-left-alt2"}))),a.createElement("div",{className:"nab-css-editor-sidebar__save-info"},n&&a.createElement("span",{className:"nab-css-editor-sidebar__saving-label"},a.createElement(p.Dashicon,{icon:"cloud"}),(0,f._x)("Saving…","text","nelio-ab-testing")),a.createElement(p.Button,{variant:"primary",disabled:n,onClick:function(){r()}},(0,f._x)("Save","command","nelio-ab-testing"))))},_=function(){return o((function(e){var t;return null===(t=e(c.store).getExperimentAttribute("links"))||void 0===t?void 0:t.edit}))},g=function(){return[o((function(e){return e(c.store).isExperimentBeingSaved()})),(0,s.useDispatch)(c.store).saveExperiment]},E=function(){var e=(0,r.usePageAttribute)("css-preview/areControlsVisible",!0),t=e[0],n=e[1],i=(0,r.usePageAttribute)("css-preview/activeResolution","desktop"),s=i[0],o=i[1];return a.createElement("div",{className:"nab-css-editor-sidebar__footer-actions"},a.createElement("div",{className:u()({"nab-css-editor-sidebar__visibility-toggle":!0,"nab-css-editor-sidebar__visibility-toggle--hide":!!t,"nab-css-editor-sidebar__visibility-toggle--show":!t})},a.createElement(p.Button,{variant:"link",onClick:function(){return n(!t)}},t?a.createElement(a.Fragment,null,a.createElement(p.Dashicon,{icon:"admin-collapse"}),a.createElement("span",{className:"nab-css-editor-sidebar__visibility-toggle-label"},(0,f._x)("Hide Controls","command","nelio-ab-testing"))):a.createElement(p.Dashicon,{icon:"admin-collapse"}))),a.createElement("div",{className:"nab-css-editor-sidebar__resolutions"},a.createElement("div",{className:u()({"nab-css-editor-sidebar__resolution":!0,"nab-css-editor-sidebar__resolution--is-active":"desktop"===s})},a.createElement(p.Button,{variant:"link",onClick:function(){return o("desktop")}},a.createElement(p.Dashicon,{icon:"desktop"}),a.createElement("span",{className:"screen-reader-text"},(0,f._x)("Enter desktop preview mode","command","nelio-ab-testing")))),a.createElement("div",{className:u()({"nab-css-editor-sidebar__resolution":!0,"nab-css-editor-sidebar__resolution--is-active":"tablet"===s})},a.createElement(p.Button,{variant:"link",onClick:function(){return o("tablet")}},a.createElement(p.Dashicon,{icon:"tablet"}),a.createElement("span",{className:"screen-reader-text"},(0,f._x)("Enter tablet preview mode","command","nelio-ab-testing")))),a.createElement("div",{className:u()({"nab-css-editor-sidebar__resolution":!0,"nab-css-editor-sidebar__resolution--is-active":"mobile"===s})},a.createElement(p.Button,{variant:"link",onClick:function(){return o("mobile")}},a.createElement(p.Dashicon,{icon:"smartphone"}),a.createElement("span",{className:"screen-reader-text"},(0,f._x)("Enter mobile preview mode","command","nelio-ab-testing"))))))},y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},y.apply(this,arguments)},x=function(e){var t=e.className,n=e.alternativeId,r=h(n),i=r[0],s=r[1];return a.createElement("div",{className:u()(["nab-css-editor-sidebar",t])},a.createElement(w,null),a.createElement(m.CodeEditor,{language:"css",className:"nab-css-editor-sidebar__editor",value:i,onChange:s}),a.createElement(E,null))},h=function(e){var t,n=o((function(t){return t(c.store).getAlternative(e)})),r=(null===(t=null==n?void 0:n.attributes)||void 0===t?void 0:t.css)||"",a=(0,s.useDispatch)(c.store).setAlternative;return[r,function(e){n&&a(n.id,y(y({},n),{attributes:(0,b.omitUndefineds)(y(y({},n.attributes),{css:e}))}))}]};const k=window.wp.compose;var N,O=function(e){var t=e.className,n=e.previewUrl,i=e.value,s=(0,k.useInstanceId)(O),o=(0,r.usePageAttribute)("css-preview/activeResolution","desktop")[0],c=A(s,i);return a.createElement("div",{className:u()([t,"nab-css-preview"])},a.createElement("iframe",{id:"nab-css-previewer__iframe-".concat(s),className:u()(["nab-css-preview__iframe","nab-css-preview__iframe--".concat(o)]),title:(0,f._x)("CSS Preview","text","nelio-ab-testing"),onLoad:c,src:n}))},A=function(e,t){var n=(0,a.useState)(),r=n[0],i=n[1],s=function(){clearTimeout(r),i(setTimeout((function(){var n,r=document.getElementById("nab-css-previewer__iframe-".concat(e));(null===(n=null==r?void 0:r.contentWindow)||void 0===n?void 0:n.postMessage)&&r.contentWindow.postMessage({type:"css-preview",value:t})}),500))};return(0,a.useEffect)(s,[t]),s},C=function(e){var t=e.alternativeId,n=(0,r.usePageAttribute)("css-preview/areControlsVisible",!0)[0],i=I(t),s=P();return a.createElement("div",{className:"nab-css-editor"},a.createElement(x,{className:u()({"nab-css-editor__sidebar":!0,"nab-css-editor__sidebar--is-collapsed":!n}),alternativeId:t}),a.createElement(O,{key:"nab-css-editor__preview",className:u()({"nab-css-editor__preview":!0,"nab-css-editor__preview--is-fullscreen":!n}),previewUrl:s,value:i}))},I=function(e){return o((function(t){var n,r;return(null===(r=null===(n=t(c.store).getAlternative(e))||void 0===n?void 0:n.attributes)||void 0===r?void 0:r.css)||""}))},P=function(){return o((function(e){var t=(0,e(c.store).getAlternative)("control");if(t){var n=e(c.store),r=n.getAlternatives,a=n.getExperimentId,i=(0,l.getQueryArgs)(document.location.href).alternative||"",s=r(),o=a(),d=(0,v.indexOf)((0,v.map)(s,"id"),i),u=t.links&&t.links.preview||"/",m=(0,l.removeQueryArgs)(u,"nab-preview","experiment","alternative","timestamp","nabnonce");return(0,l.addQueryArgs)(m,{"nab-css-previewer":"".concat(o,":").concat(d)})}}))},S=function(e){var t=e.experimentId,n=e.alternativeId,i=o((function(e){return e(r.store).getExperiment(t)}));return i?a.createElement(a.StrictMode,null,a.createElement(c.EditorProvider,{experiment:i},a.createElement(C,{alternativeId:n}))):null},j=function(){return j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},j.apply(this,arguments)};window.nab=j(j({},(N=window)&&"object"==typeof N&&"nab"in N?window.nab:{}),{initCssEditorPage:function(e,t){(0,i.registerCoreExperiments)();var n=document.getElementById(e);if(n){var r,s,o=t.experimentId,c=t.alternativeId;r=a.createElement(S,{experimentId:o,alternativeId:c}),(s=n)&&(a.createRoot?(0,a.createRoot)(s).render(r):(0,a.render)(r,s))}}})},6942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,a,i)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],i=e[d][2];for(var o=!0,c=0;c<n.length;c++)(!1&i||s>=i)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(o=!1,i<s&&(s=i));if(o){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,a,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={7470:0,3115:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,i,s=n[0],o=n[1],c=n[2],l=0;if(s.some((t=>0!==e[t]))){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);if(c)var d=c(r)}for(t&&t(n);l<s.length;l++)i=s[l],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(d)},n=self.webpackChunknab=self.webpackChunknab||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[3115],(()=>r(5537)));a=r.O(a);var i=nab="undefined"==typeof nab?{}:nab;for(var s in a)i[s]=a[s];a.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();