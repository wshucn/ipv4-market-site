(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{data:()=>a});var n={};e.r(n),e.d(n,{areUniqueResultsAvailable:()=>Ue,areUniqueResultsVisible:()=>Oe,canLimitSiteQuota:()=>ge,getActivePlugins:()=>oe,getAdminUrl:()=>fe,getAlternativePageViews:()=>_e,getAlternativeResultsInExperiment:()=>me,getConversionRatesOfAlternativesInGoal:()=>Ce,getConversions:()=>Te,getCurrency:()=>j,getDaysRunning:()=>Pe,getDefaultGoal:()=>V,getECommercePlugin:()=>M,getECommerceSetting:()=>pe,getEntityRecord:()=>U,getExperiment:()=>D,getExperimentAttribute:()=>L,getExperimentResults:()=>he,getExperimentResultsStatus:()=>Ie,getKindEntities:()=>O,getMediaUrl:()=>B,getMenu:()=>se,getPageAttribute:()=>F,getPageViews:()=>xe,getPluginSetting:()=>de,getProducts:()=>q,getQuota:()=>De,getResultsOfAlternatives:()=>ke,getRevenuesOfAlternativesInGoal:()=>Re,getSubscriptionId:()=>N,getTemplateContexts:()=>ue,getTemplates:()=>ce,getThemes:()=>le,getToday:()=>ie,getTotalPageViews:()=>Ee,getTotalRevenue:()=>Se,getUniquePageViews:()=>we,getWinnerAlternative:()=>Ae,getWinnersInExperiment:()=>ye,hasCapability:()=>ve,hasMenus:()=>ae,isLocked:()=>G,isSubscribedTo:()=>be});var r={};e.r(r),e.d(r,{changeLastAppliedAlternative:()=>Me,lock:()=>Qe,receiveECommerceSettings:()=>et,receiveEntityRecords:()=>Ve,receiveExperiment:()=>je,receiveExperimentResult:()=>Ye,receiveFSCurrency:()=>qe,receiveFSProducts:()=>Ne,receiveFSSubscriptionId:()=>Be,receiveKindEntitiesQuery:()=>Le,receiveMediaUrl:()=>Fe,receiveMenus:()=>Xe,receivePluginSettings:()=>Ze,receivePlugins:()=>Ke,receiveSiteQuota:()=>tt,receiveTemplateContexts:()=>ze,receiveTemplates:()=>$e,receiveThemes:()=>Je,setPageAttribute:()=>Ge,setToday:()=>We,unlock:()=>He});var i={};e.r(i),e.d(i,{applyAlternative:()=>dt,pauseExperiment:()=>vt,purchaseQuota:()=>yt,setPublicResultStatus:()=>pt,stopExperiment:()=>ft});var o={};e.r(o),e.d(o,{getActivePlugins:()=>Qt,getAlternativePageViews:()=>jt,getConversionRatesOfAlternativesInGoal:()=>Bt,getCurrency:()=>Ct,getDaysRunning:()=>qt,getEntityRecord:()=>wt,getExperiment:()=>St,getExperimentResults:()=>Vt,getExperimentResultsStatus:()=>Nt,getKindEntities:()=>Et,getMediaUrl:()=>Ut,getMenu:()=>Yt,getPageViews:()=>Mt,getProducts:()=>At,getQuota:()=>Jt,getSubscriptionId:()=>Rt,getTemplateContexts:()=>Wt,getTemplates:()=>Kt,getThemes:()=>Xt,hasMenus:()=>Ht});var a={};e.r(a),e.d(a,{store:()=>tn,useAdminUrl:()=>an,useExperimentAttribute:()=>nn,usePageAttribute:()=>rn,usePluginSetting:()=>on});const s=window.wp.data;function u(e,t){return(0,s.useSelect)(e,t)}function c(e){return(0,s.resolveSelect)(e)}const l=window.nab.date,f=window.lodash;var v={config:[],data:{}},d={},p={currency:"USD",products:[],subscriptionId:""},g={},b={isLocked:!1,sidebarDimensions:{top:0,height:"100vh",applyFix:!0}},h={},y={today:"2013-01-01",menus:{},nelio:{adminUrl:"/wp-admin/",apiUrl:"",areAutoTutorialsEnabled:!0,areSubscriptionControlsDisabled:!1,capabilities:[],goalTracking:"all-pages",homeUrl:"/",isCookieTestingEnabled:!1,maxCombinations:24,minConfidence:95,minSampleSize:100,segmentEvaluation:"site",siteId:"",subscription:!1,themeSupport:{menus:!1,widgets:!1}},plugins:[],templateContexts:{},templates:{},themes:{},ecommerce:{woocommerce:{currency:"USD",currencyPosition:"before",currencySymbol:"$",decimalSeparator:".",numberOfDecimals:2,orderStatuses:[],thousandsSeparator:","},edd:{currency:"USD",currencyPosition:"before",currencySymbol:"$",decimalSeparator:".",numberOfDecimals:2,orderStatuses:[],thousandsSeparator:","}}},m=void 0,x=function(){return x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},x.apply(this,arguments)};const E=window.nab.utils;var w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},w.apply(this,arguments)};function _(e){var t=(0,E.createAlternative)("control"),n=(0,E.createAlternative)();return e?"control"!==e[0].id?function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([t],e,!0):1===e.length?[e[0],n]:e:[t,n]}var T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},T.apply(this,arguments)},S=function(){return S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},S.apply(this,arguments)};const P=window.wp.i18n;var I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},I.apply(this,arguments)},A={"Accordion Content":(0,P._x)("Accordion Content","text","nelio-ab-testing"),"Accordion Toggle":(0,P._x)("Accordion Toggle","text","nelio-ab-testing"),"Alert Division":(0,P._x)("Alert Division","text","nelio-ab-testing"),"All Elements":(0,P._x)("All Elements","text","nelio-ab-testing"),"Allowed Tags Section":(0,P._x)("Allowed Tags Section","text","nelio-ab-testing"),Article:(0,P._x)("Article","text","nelio-ab-testing"),"Block Quote":(0,P._x)("Block Quote","text","nelio-ab-testing"),"Body Of Table":(0,P._x)("Body Of Table","text","nelio-ab-testing"),Body:(0,P._x)("Body","text","nelio-ab-testing"),"Bold Tag":(0,P._x)("Bold Tag","text","nelio-ab-testing"),Button:(0,P._x)("Button","text","nelio-ab-testing"),"Caption Of table":(0,P._x)("Caption Of table","text","nelio-ab-testing"),"Centred block":(0,P._x)("Centred block","text","nelio-ab-testing"),"Citation Tag":(0,P._x)("Citation Tag","text","nelio-ab-testing"),"Code Tag":(0,P._x)("Code Tag","text","nelio-ab-testing"),
/* translators: %d is the number of the column */
"Column %d/12":(0,P._x)("Column %d/12","text","nelio-ab-testing"),"Comment Form":(0,P._x)("Comment Form","text","nelio-ab-testing"),"Comment Reply Title":(0,P._x)("Comment Reply Title","text","nelio-ab-testing"),"Comments Link Division":(0,P._x)("Comments Link Division","text","nelio-ab-testing"),"Content Division":(0,P._x)("Content Division","text","nelio-ab-testing"),"Definition description":(0,P._x)("Definition description","text","nelio-ab-testing"),"Definition list":(0,P._x)("Definition list","text","nelio-ab-testing"),"Definition term":(0,P._x)("Definition term","text","nelio-ab-testing"),Division:(0,P._x)("Division","text","nelio-ab-testing"),"Edit Link":(0,P._x)("Edit Link","text","nelio-ab-testing"),"Entry Content":(0,P._x)("Entry Content","text","nelio-ab-testing"),"Entry Footer":(0,P._x)("Entry Footer","text","nelio-ab-testing"),"Entry Header":(0,P._x)("Entry Header","text","nelio-ab-testing"),"Entry Time":(0,P._x)("Entry Time","text","nelio-ab-testing"),"Font Icon":(0,P._x)("Font Icon","text","nelio-ab-testing"),"Foot Of Table":(0,P._x)("Foot Of Table","text","nelio-ab-testing"),Footer:(0,P._x)("Footer","text","nelio-ab-testing"),"Form Division":(0,P._x)("Form Division","text","nelio-ab-testing"),"Head Of Table":(0,P._x)("Head Of Table","text","nelio-ab-testing"),Header:(0,P._x)("Header","text","nelio-ab-testing"),Heading:(0,P._x)("Heading","text","nelio-ab-testing"),"Horizontal Rule":(0,P._x)("Horizontal Rule","text","nelio-ab-testing"),Image:(0,P._x)("Image","text","nelio-ab-testing"),Input:(0,P._x)("Input","text","nelio-ab-testing"),"Italic Tag":(0,P._x)("Italic Tag","text","nelio-ab-testing"),Label:(0,P._x)("Label","text","nelio-ab-testing"),Lead:(0,P._x)("Lead","text","nelio-ab-testing"),"Line Break":(0,P._x)("Line Break","text","nelio-ab-testing"),Link:(0,P._x)("Link","text","nelio-ab-testing"),"List Item":(0,P._x)("List Item","text","nelio-ab-testing"),List:(0,P._x)("List","text","nelio-ab-testing"),"Login Info":(0,P._x)("Login Info","text","nelio-ab-testing"),Logo:(0,P._x)("Logo","text","nelio-ab-testing"),"Menu Item":(0,P._x)("Menu Item","text","nelio-ab-testing"),"Menu Link":(0,P._x)("Menu Link","text","nelio-ab-testing"),Menu:(0,P._x)("Menu","text","nelio-ab-testing"),Navigation:(0,P._x)("Navigation","text","nelio-ab-testing"),Paragraph:(0,P._x)("Paragraph","text","nelio-ab-testing"),"Post Division":(0,P._x)("Post Division","text","nelio-ab-testing"),"Post Edit Link":(0,P._x)("Post Edit Link","text","nelio-ab-testing"),"Post Meta Division":(0,P._x)("Post Meta Division","text","nelio-ab-testing"),"Post Thumbnail":(0,P._x)("Post Thumbnail","text","nelio-ab-testing"),"Post Title":(0,P._x)("Post Title","text","nelio-ab-testing"),Preformatted:(0,P._x)("Preformatted","text","nelio-ab-testing"),Quotation:(0,P._x)("Quotation","text","nelio-ab-testing"),Root:(0,P._x)("Root","text","nelio-ab-testing"),Row:(0,P._x)("Row","text","nelio-ab-testing"),"Show More Link":(0,P._x)("Show More Link","text","nelio-ab-testing"),"Site Description":(0,P._x)("Site Description","text","nelio-ab-testing"),"Small Tag":(0,P._x)("Small Tag","text","nelio-ab-testing"),"Span Tag":(0,P._x)("Span Tag","text","nelio-ab-testing"),"Strong Tag":(0,P._x)("Strong Tag","text","nelio-ab-testing"),"Sub Menu":(0,P._x)("Sub Menu","text","nelio-ab-testing"),"Submit Button":(0,P._x)("Submit Button","text","nelio-ab-testing"),"Table Data":(0,P._x)("Table Data","text","nelio-ab-testing"),"Table Row":(0,P._x)("Table Row","text","nelio-ab-testing"),Table:(0,P._x)("Table","text","nelio-ab-testing"),"Tag Cloud":(0,P._x)("Tag Cloud","text","nelio-ab-testing"),"Text Area":(0,P._x)("Text Area","text","nelio-ab-testing"),"Thumbnail Image":(0,P._x)("Thumbnail Image","text","nelio-ab-testing"),Thumbnail:(0,P._x)("Thumbnail","text","nelio-ab-testing"),"Time Tag":(0,P._x)("Time Tag","text","nelio-ab-testing"),"Underline text tag":(0,P._x)("Underline text tag","text","nelio-ab-testing"),Well:(0,P._x)("Well","text","nelio-ab-testing"),"Widget Title":(0,P._x)("Widget Title","text","nelio-ab-testing"),Widget:(0,P._x)("Widget","text","nelio-ab-testing"),Wrapper:(0,P._x)("Wrapper","text","nelio-ab-testing")},C=function(){return C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},C.apply(this,arguments)},R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},R.apply(this,arguments)};const k=(0,s.combineReducers)({entities:function(e,t){var n;return void 0===e&&(e=v),null!==(n=function(e,t){var n;switch(t.type){case"RECEIVE_TYPE_QUERY":return x(x({},e),{config:t.kindEntities});case"RECEIVE_ITEMS":return x(x({},e),{data:x(x({},e.data),(n={},n[t.kind]=x(x({},e.data[t.kind]),(0,f.keyBy)(t.items,"id")),n))})}}(e,t))&&void 0!==n?n:e},experiments:function(e,t){var n;return void 0===e&&(e=d),null!==(n=function(e,t){var n,r,i;switch(t.type){case"RECEIVE_EXPERIMENT":return w(w({},e),((n={})[t.key]=w(w({},t.experiment),{alternatives:_(t.experiment.alternatives),goals:t.experiment.goals||[(0,E.createGoal)()],segments:t.experiment.segments||[]}),n));case"CHANGE_LAST_APPLIED_ALTERNATIVE":var o=e[t.experimentId];return o?w(w({},e),((r={})[t.experimentId]=w(w({},o),{alternatives:o.alternatives.map((i=t.alternativeId,function(e){return w(w({},e),{isLastApplied:e.id===i})}))}),r)):e}}(e,t))&&void 0!==n?n:e},fastspring:function(e,t){var n;return void 0===e&&(e=p),null!==(n=function(e,t){switch(t.type){case"RECEIVE_FS_CURRENCY":return T(T({},e),{currency:t.currency});case"RECEIVE_FS_PRODUCTS":return T(T({},e),{products:t.products});case"RECEIVE_FS_SUBSCRIPTION_ID":return T(T({},e),{subscriptionId:t.subscriptionId})}}(e,t))&&void 0!==n?n:e},media:function(e,t){var n;return void 0===e&&(e=g),null!==(n=function(e,t){var n;if("RECEIVE_MEDIA_URL"===t.type)return S(S({},e),((n={})[t.id]=t.url,n))}(e,t))&&void 0!==n?n:e},page:function(e,t){var n;return void 0===e&&(e=b),null!==(n=function(e,t){var n,r,i;switch(t.type){case"SET_PAGE_ATTRIBUTE":var o=t.name,a=t.value;return o?I(I({},e),"css-selector/cssSelectorFinderState"===o?void 0===a?((n={})[o]=void 0,n):((r={})[o]=I(I({},a),{labels:A}),r):((i={})[o]=a,i)):e;case"LOCK_UI":return I(I({},e),{isLocked:!0});case"UNLOCK_UI":return I(I({},e),{isLocked:!1})}}(e,t))&&void 0!==n?n:e},results:function(e,t){var n;return void 0===e&&(e=h),null!==(n=function(e,t){var n;if("RECEIVE_RESULT"===t.type)return C(C({},e),((n={})[t.key]=t.result,n))}(e,t))&&void 0!==n?n:e},settings:function(e,t){var n;return void 0===e&&(e=y),null!==(n=function(e,t){var n;switch(t.type){case"SET_TODAY":return R(R({},e),{today:t.today});case"RECEIVE_MENUS":return R(R({},e),{menus:R(R({},e.menus),(0,f.keyBy)(t.menus,"id"))});case"RECEIVE_PLUGINS":return R(R({},e),{plugins:t.plugins||[]});case"RECEIVE_TEMPLATE_CONTEXTS":return R(R({},e),{templateContexts:t.templateContexts});case"RECEIVE_TEMPLATES":return R(R({},e),{templates:t.templates});case"RECEIVE_THEMES":return R(R({},e),{themes:(0,f.keyBy)(t.themes,"id")});case"RECEIVE_PLUGIN_SETTINGS":return R(R({},e),{nelio:t.settings});case"RECEIVE_ECOMMERCE_SETTINGS":return R(R({},e),{ecommerce:R(R({},e.ecommerce),(n={},n[t.ecommerce]=R(R({},t.settings),{orderStatuses:(0,f.sortBy)(t.settings.orderStatuses,"label")}),n))})}}(e,t))&&void 0!==n?n:e},siteQuota:function(e,t){var n;return void 0===e&&(e=m),null!==(n=function(e,t){if("RECEIVE_SITE_QUOTA"===t.type)return t.quota}(0,t))&&void 0!==n?n:e}});function O(e){return e.entities.config}function U(e,t,n){return(0,f.get)(e.entities.data,[t,n])}function D(e,t){return t?(0,f.get)(e.experiments,t):void 0}var L=function(e,t,n){var r=D(e,t);if(r)return r[n]};function V(e,t){var n=D(e,t);if(n)return n.goals[0]}function M(e,t,n){return function(e,t,n){var r,i,o=D(e,t);if(!o)return!1;n=null!=n?n:null===(r=V(e,t))||void 0===r?void 0:r.id;var a=o.goals.find((function(e){return e.id===n}));if(!a)return!1;var s=null!==(i=null==a?void 0:a.conversionActions)&&void 0!==i?i:[];return 0<s.length&&s.every((function(e){return"nab/wc-order"===e.type}))}(e,t,n)?"woocommerce":function(e,t,n){var r,i,o=D(e,t);if(!o)return!1;n=null!=n?n:null===(r=V(e,t))||void 0===r?void 0:r.id;var a=o.goals.find((function(e){return e.id===n}));if(!a)return!1;var s=null!==(i=null==a?void 0:a.conversionActions)&&void 0!==i?i:[];return 0<s.length&&s.every((function(e){return"nab/edd-order"===e.type}))}(e,t,n)?"edd":void 0}function j(e){return e.fastspring.currency}function q(e){return e.fastspring.products}function N(e){return e.fastspring.subscriptionId||void 0}function B(e,t){return e.media[t]}var F=function(e,t){return e.page[t]};function G(e){return F(e,"isLocked")}var Q=function(){return Q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Q.apply(this,arguments)};function H(e,t){var n=t.segments,r={results:{}};return(0,f.keyBy)(n.map((function(n,i){var o,a,s,u,c,l,f,v,d,p,g;return Q(Q({winners:Y((null===(a=null===(o=e.segments)||void 0===o?void 0:o["s".concat(i+1)])||void 0===a?void 0:a.results)||{},t.goals),wasEnoughData:W((null===(u=null===(s=e.segments)||void 0===s?void 0:s["s".concat(i+1)])||void 0===u?void 0:u.results)||{},t.goals),alternatives:K((null===(c=e.segments)||void 0===c?void 0:c["s".concat(i+1)])||r,t)},(null===(f=null===(l=e.segments)||void 0===l?void 0:l["s".concat(i+1)])||void 0===f?void 0:f.uniqueResults)&&{winnersUnique:Y((null===(d=null===(v=e.segments)||void 0===v?void 0:v["s".concat(i+1)])||void 0===d?void 0:d.uniqueResults)||{},t.goals),wasEnoughDataUnique:W((null===(g=null===(p=e.segments)||void 0===p?void 0:p["s".concat(i+1)])||void 0===g?void 0:g.uniqueResults)||{},t.goals)}),{id:n.id})})),"id")}function Y(e,t){for(var n={},r=t.length,i=0;i<r;++i){var o=t[i];if(o){var a=o.id,s=e["g".concat(i)]||!1;s&&"win"===s.status&&(n[a]={alternative:s.winner,confidence:s.confidence})}}return n}function W(e,t){for(var n={},r=t.length,i=0;i<r;++i){var o=t[i];if(o){var a=o.id,s=e["g".concat(i)];n[a]="low-data"!==(null==s?void 0:s.status)}}return n}function K(e,t){var n=t.alternatives,r="finished"===t.status?(0,l.getDate)(t.endDate||""):new Date,i=(0,l.date)("Y-m-d",r);return Q({control:X({},"control","","",[])},(0,f.keyBy)(n.map((function(n,r){return X(e["a".concat(r)]||{},n.id,t.startDate,i,t.goals)})),"id"))}function X(e,t,n,r,i){return{id:t,visits:e.v||0,values:z(e.cv,i),conversions:$(e.c,i),conversionRates:J(e.cr,i),improvementFactors:Z(e.i,i),uniqueVisits:e.uv||0,uniqueValues:z(e.ucv,i),uniqueConversions:$(e.uc,i),uniqueConversionRates:J(e.ucr,i),uniqueImprovementFactors:Z(e.ui,i),timeline:ee(e.t,n,r,i)}}function z(e,t){for(var n={},r=t.length,i=0;i<r;++i){var o=t[i];o&&(n[o.id]=(null==e?void 0:e["g".concat(i)])||0)}return n}function $(e,t){for(var n={},r=t.length,i=0;i<r;++i){var o=t[i];o&&(n[o.id]=(null==e?void 0:e["g".concat(i)])||0)}return n}function J(e,t){for(var n={},r=t.length,i=0;i<r;++i){var o=t[i];if(o){var a=o.id,s=(null==e?void 0:e["g".concat(i)])||0;n[a]=Math.round(100*s)/100||0}}return n}function Z(e,t){for(var n={},r=t.length,i=0;i<r;++i){var o=t[i];if(o){var a=o.id,s=(null==e?void 0:e["g".concat(i)])||0;n[a]=Math.round(100*s)/100||0}}return n}function ee(e,t,n,r){var i,o=[],a=(0,l.getDate)(t);do{var s=ne(te(e,i=(0,l.format)("Y-m-d",a)),r);o.push(s),a.setDate(a.getDate()+1)}while(n>i);return o}function te(e,t){var n=(0,f.find)(e,{d:t})||{};return Q(Q({v:0},n),{d:t})}function ne(e,t){for(var n={visits:e.v||0,date:e.d,conversions:{},values:{},uniqueVisits:e.uv||0,uniqueConversions:{},uniqueValues:{}},r=t.length,i=0;i<r;++i){var o=t[i];if(o){var a=o.id;n.conversions[a]=e["g".concat(i)]||0,n.values[a]=e["val".concat(i)]||0,n.uniqueConversions[a]=e["ug".concat(i)]||0,n.uniqueValues[a]=e["uval".concat(i)]||0}}return n}const re=window.wp.url;function ie(e){return e.settings.today}function oe(e){return e.settings.plugins}function ae(e){return!!(0,f.keys)(e.settings.menus).length}function se(e,t){return e.settings.menus[t]}function ue(e){return e.settings.templateContexts}function ce(e){return e.settings.templates}function le(e){return(0,f.values)(e.settings.themes).filter(E.isDefined)}function fe(e,t,n){var r=de(e,"adminUrl");return(0,re.addQueryArgs)("".concat(r).concat(t),n)}function ve(e,t){return e.settings.nelio.capabilities.includes(t)}var de=function(e,t){return e.settings.nelio[t]},pe=function(e,t,n){return e.settings.ecommerce[t][n]};function ge(e){return be(e,"professional","or-above")}function be(e,t,n){void 0===n&&(n="or-above");var r=de(e,"subscription");if(!r)return!1;var i=["basic","professional","enterprise"],o=i.indexOf(t),a=i.indexOf(r);return-1!==o&&-1!==a&&("or-above"!==n?o===a:a>=o)}function he(e,t){return t?e.results[t]:void 0}function ye(e,t){var n,r,i=he(e,t);if(i){var o=Oe(e,t),a=null!==(n=F(e,"editor/activeSegment"))&&void 0!==n?n:"default",s=o?"winnersUnique":"winners";return"default"===a?i[s]:null===(r=i.segments[a])||void 0===r?void 0:r[s]}}function me(e,t){var n,r,i=he(e,t);if(i){var o=null!==(n=F(e,"editor/activeSegment"))&&void 0!==n?n:"default";return"default"===o?(0,f.values)(i.alternatives):(0,f.values)(null===(r=i.segments[o])||void 0===r?void 0:r.alternatives)}}function xe(e,t){return Oe(e,t)?we(e,t):Ee(e,t)}function Ee(e,t){var n,r,i=he(e,t);if(!(null==i?void 0:i.alternatives))return 0;var o=null!==(n=F(e,"editor/activeSegment"))&&void 0!==n?n:"default";return("default"===o?(0,f.values)(i.alternatives):(0,f.values)(null===(r=i.segments[o])||void 0===r?void 0:r.alternatives)).reduce((function(e,t){return e+t.visits}),0)}function we(e,t){var n,r,i=he(e,t);if(!(null==i?void 0:i.alternatives))return 0;var o=null!==(n=F(e,"editor/activeSegment"))&&void 0!==n?n:"default";return("default"===o?(0,f.values)(i.alternatives):(0,f.values)(null===(r=i.segments[o])||void 0===r?void 0:r.alternatives)).reduce((function(e,t){return e+t.uniqueVisits}),0)}function _e(e,t,n){var r,i,o=he(e,t);if(!(null==o?void 0:o.alternatives))return 0;var a=null!==(r=F(e,"editor/activeSegment"))&&void 0!==r?r:"default",s="default"===a?o.alternatives[n]:null===(i=o.segments[a])||void 0===i?void 0:i.alternatives[n];return s?Oe(e,t)?s.uniqueVisits:s.visits:0}function Te(e,t,n){var r,i,o,a,s=he(e,t);if(!s||!s.alternatives)return 0;var u=null!==(i=null!=n?n:null===(r=V(e,t))||void 0===r?void 0:r.id)&&void 0!==i?i:"";if(!u)return 0;var c=Oe(e,t),l=null!==(o=F(e,"editor/activeSegment"))&&void 0!==o?o:"default";return("default"===l?(0,f.values)(s.alternatives):(0,f.values)(null===(a=s.segments[l])||void 0===a?void 0:a.alternatives)).reduce((function(e,t){return e+((c?t.uniqueConversions[u]:t.conversions[u])||0)}),0)}function Se(e,t,n){var r,i,o,a,s=he(e,t);if(!s||!s.alternatives)return 0;var u=null!==(i=null!=n?n:null===(r=V(e,t))||void 0===r?void 0:r.id)&&void 0!==i?i:"";if(!u)return 0;var c=Oe(e,t),l=null!==(o=F(e,"editor/activeSegment"))&&void 0!==o?o:"default";return("default"===l?(0,f.values)(s.alternatives):(0,f.values)(null===(a=s.segments[l])||void 0===a?void 0:a.alternatives)).reduce((function(e,t){var n;return e+(null!==(n=c?t.uniqueValues[u]:t.values[u])&&void 0!==n?n:0)}),0)}function Pe(e,t){var n=D(e,t);if(!n)return 0;var r=n.startDate,i="";return"finished"===n.status&&(i=n.endDate||""),function(e,t){"string"==typeof e&&(e=new Date(e)),"string"==typeof t&&(t=new Date(t));var n=new Date;e&&!isNaN(e.getTime())||(e=n),t&&!isNaN(t.getTime())||(t=n);var r=Math.abs(t.getTime()-e.getTime());return Math.ceil(r/864e5)}(r,i)}function Ie(e,t,n){var r,i,o,a,s,u,c=he(e,t);if(c){var l=null!==(i=null!=n?n:null===(r=V(e,t))||void 0===r?void 0:r.id)&&void 0!==i?i:"";if(l){var f=de(e,"minConfidence");if(f){var v=Oe(e,t),d=null!==(o=F(e,"editor/activeSegment"))&&void 0!==o?o:"default",p=v?"winnersUnique":"winners",g="default"===d?null===(a=c[p])||void 0===a?void 0:a[l]:null===(u=null===(s=c.segments[d])||void 0===s?void 0:s[p])||void 0===u?void 0:u[l];return g?g.confidence>=f?"winner":"possible-winner":"testing"}}}}function Ae(e,t,n){var r,i,o,a,s,u,c=he(e,t);if(c){var l=null!==(i=null!=n?n:null===(r=V(e,t))||void 0===r?void 0:r.id)&&void 0!==i?i:"";if(l){var f=de(e,"minConfidence");if(f){var v=Oe(e,t),d=null!==(o=F(e,"editor/activeSegment"))&&void 0!==o?o:"default",p=v?"winnersUnique":"winners",g="default"===d?null===(a=c[p])||void 0===a?void 0:a[l]:null===(u=null===(s=c.segments[d])||void 0===s?void 0:s[p])||void 0===u?void 0:u[l];if(g&&!(g.confidence<f))return g.alternative}}}}function Ce(e,t,n){var r,i,o,a=he(e,t);if(a){var s=null!=n?n:null===(r=V(e,t))||void 0===r?void 0:r.id;if(s){var u=Oe(e,t),c=null!==(i=F(e,"editor/activeSegment"))&&void 0!==i?i:"default";return("default"===c?(0,f.values)(a.alternatives):(0,f.values)(null===(o=a.segments[c])||void 0===o?void 0:o.alternatives)).map((function(e){return u?e.uniqueConversionRates[s]||0:e.conversionRates[s]||0}))}}}function Re(e,t,n){var r,i,o,a,s=he(e,t);if(s){var u=null!==(i=null!=n?n:null===(r=V(e,t))||void 0===r?void 0:r.id)&&void 0!==i?i:"";if(u){var c=Oe(e,t),l=null!==(o=F(e,"editor/activeSegment"))&&void 0!==o?o:"default";return("default"===l?(0,f.values)(s.alternatives):(0,f.values)(null===(a=s.segments[l])||void 0===a?void 0:a.alternatives)).map((function(e){return c?e.uniqueValues[u]||0:e.values[u]||0}))}}}function ke(e,t){var n,r,i=he(e,t);if(i){var o=null!==(n=F(e,"editor/activeSegment"))&&void 0!==n?n:"default";return"default"===o?i.alternatives:null===(r=i.segments[o])||void 0===r?void 0:r.alternatives}}function Oe(e,t){var n;return null!==(n=F(e,"results/shouldShowUniqueResults"))&&void 0!==n&&n&&Ue(e,t)}function Ue(e,t){var n=he(e,t);return(0,f.values)(null==n?void 0:n.alternatives).some((function(e){return e.uniqueVisits>0}))}function De(e){return e.siteQuota}function Le(e){return{type:"RECEIVE_TYPE_QUERY",kindEntities:(0,f.castArray)(e)}}function Ve(e,t){return{type:"RECEIVE_ITEMS",items:(0,f.castArray)(t),kind:e}}function Me(e,t){return{type:"CHANGE_LAST_APPLIED_ALTERNATIVE",experimentId:e,alternativeId:t}}function je(e,t){return{type:"RECEIVE_EXPERIMENT",key:e,experiment:t}}function qe(e){return{type:"RECEIVE_FS_CURRENCY",currency:e}}function Ne(e){return{type:"RECEIVE_FS_PRODUCTS",products:(0,f.castArray)(e)}}function Be(e){return{type:"RECEIVE_FS_SUBSCRIPTION_ID",subscriptionId:e}}function Fe(e,t){return{type:"RECEIVE_MEDIA_URL",id:e,url:t}}function Ge(e,t){return{type:"SET_PAGE_ATTRIBUTE",name:e,value:t}}function Qe(){return{type:"LOCK_UI"}}function He(){return{type:"UNLOCK_UI"}}function Ye(e,t){return{type:"RECEIVE_RESULT",key:e,result:t}}function We(e){return{type:"SET_TODAY",today:e}}function Ke(e){return{type:"RECEIVE_PLUGINS",plugins:(0,f.castArray)(e)}}function Xe(e){return{type:"RECEIVE_MENUS",menus:(0,f.castArray)(e)}}function ze(e){return{type:"RECEIVE_TEMPLATE_CONTEXTS",templateContexts:e}}function $e(e){return{type:"RECEIVE_TEMPLATES",templates:e}}function Je(e){return{type:"RECEIVE_THEMES",themes:(0,f.castArray)(e)}}function Ze(e){return{type:"RECEIVE_PLUGIN_SETTINGS",settings:e}}function et(e,t){return{type:"RECEIVE_ECOMMERCE_SETTINGS",ecommerce:e,settings:t}}function tt(e){return{type:"RECEIVE_SITE_QUOTA",quota:e}}const nt=window.wp.apiFetch;var rt=e.n(nt);const it=window.wp.date;var ot=function(){return ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ot.apply(this,arguments)};const at=function(e){var t=e.url,n=e.path,r=(0,it.format)("YmjHi").substring(0,11)+"0";return rt()(ot(ot(ot({},e),t&&{url:st(e)?(0,re.addQueryArgs)(t,{nabts:r}):t}),n&&{path:(0,re.addQueryArgs)(n,{nabts:r})}))};var st=function(e){var t,n;return!!(null===(t=e.url)||void 0===t?void 0:t.includes("/wp-json/"))||!!(null===(n=e.url)||void 0===n?void 0:n.includes("rest_route"))||!!Object.keys(e).includes("rest_route")},ut=function(){return ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ut.apply(this,arguments)},ct=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},lt=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};function ft(){return ct(this,void 0,Promise,(function(){var e,t,n,r,i,o,a;return lt(this,(function(u){switch(u.label){case 0:return(e=(0,s.select)(tn).getPageAttribute("editor/activeExperiment"))?[4,(0,s.dispatch)(tn).setPageAttribute("editor/isExperimentBeingStopped",!0)]:[2];case 1:u.sent(),u.label=2;case 2:return u.trys.push([2,4,,6]),[4,c(tn).getExperiment(e)];case 3:return(t=u.sent())?[3,6]:[2];case 4:return n=u.sent(),[4,(0,E.createErrorNotice)(n)];case 5:return u.sent(),[2];case 6:return u.trys.push([6,8,,11]),[4,at({path:"/nab/v1/experiment/".concat(e,"/stop"),method:"PUT"})];case 7:return r=u.sent(),[3,11];case 8:return i=u.sent(),[4,(0,E.createErrorNotice)(i,(0,P._x)("Test can’t be stopped","text","nelio-ab-testing"))];case 9:return u.sent(),[4,(0,s.dispatch)(tn).setPageAttribute("editor/isExperimentBeingStopped",!1)];case 10:return u.sent(),[2];case 11:return o=(0,f.keyBy)(r.alternatives||[],"id"),a=ut(ut({},r),{links:ut(ut({},r.links),t.links),alternatives:(t.alternatives||[]).map((function(e){return ut(ut({},e),{links:gt(e,o[e.id])})}))}),[4,(0,s.dispatch)(tn).receiveExperiment(t.id,a)];case 12:return u.sent(),[4,(0,s.dispatch)(tn).setPageAttribute("editor/isExperimentBeingStopped",!1)];case 13:return u.sent(),[2]}}))}))}function vt(){return ct(this,void 0,Promise,(function(){var e,t;return lt(this,(function(n){switch(n.label){case 0:return(e=(0,s.select)(tn).getPageAttribute("editor/activeExperiment"))?[4,(0,s.dispatch)(tn).setPageAttribute("editor/isExperimentBeingPaused",!0)]:[2];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,4,,7]),[4,at({path:"/nab/v1/experiment/".concat(e,"/pause"),method:"PUT"})];case 3:return n.sent(),[3,7];case 4:return t=n.sent(),[4,(0,E.createErrorNotice)(t,(0,P._x)("Test can’t be paused","text","nelio-ab-testing"))];case 5:return n.sent(),[4,(0,s.dispatch)(tn).setPageAttribute("editor/isExperimentBeingPaused",!1)];case 6:return n.sent(),[2];case 7:return window.location.href=(0,s.select)(tn).getAdminUrl("admin.php",{page:"nelio-ab-testing-experiment-edit",experiment:e}),[2]}}))}))}function dt(e){return ct(this,void 0,Promise,(function(){var t,n,r;return lt(this,(function(i){switch(i.label){case 0:return(t=(0,s.select)(tn).getPageAttribute("editor/activeExperiment"))?[4,(0,s.dispatch)(tn).setPageAttribute("editor/alternativeBeingApplied",e)]:[2];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,7]),[4,at({path:"/nab/v1/experiment/".concat(t,"/apply/").concat(e),method:"PUT"})];case 3:return n=i.sent(),[3,7];case 4:return r=i.sent(),[4,(0,E.createErrorNotice)(r,(0,P._x)("Alternative can’t be applied","text","nelio-ab-testing"))];case 5:return i.sent(),[4,(0,s.dispatch)(tn).setPageAttribute("editor/alternativeBeingApplied",!1)];case 6:return i.sent(),[2];case 7:return[4,(0,s.dispatch)(tn).changeLastAppliedAlternative(n.id,e)];case 8:return i.sent(),[4,(0,s.dispatch)(tn).setPageAttribute("editor/alternativeBeingApplied",!1)];case 9:return i.sent(),[2]}}))}))}function pt(e){return ct(this,void 0,Promise,(function(){var t,n,r;return lt(this,(function(i){switch(i.label){case 0:return(t=(0,s.select)(tn).getPageAttribute("editor/activeExperiment"))?[4,(0,s.dispatch)(tn).setPageAttribute("isLocked",!0)]:[2];case 1:i.sent(),n=e,i.label=2;case 2:return i.trys.push([2,4,,7]),[4,at({path:"/nab/v1/experiment/".concat(t,"/public-result-status"),method:"PUT",data:{status:e}})];case 3:return n=i.sent(),[3,7];case 4:return r=i.sent(),[4,(0,E.createErrorNotice)(r,(0,P._x)("Public result’s status can’t be changed","text","nelio-ab-testing"))];case 5:return i.sent(),[4,(0,s.dispatch)(tn).setPageAttribute("isLocked",!1)];case 6:return i.sent(),[2];case 7:return[4,(0,s.dispatch)(tn).setPageAttribute("isLocked",!1)];case 8:return i.sent(),[4,(0,s.dispatch)(tn).setPageAttribute("results/isReadOnlyActive",n)];case 9:return i.sent(),[2]}}))}))}function gt(e,t){if(null==e?void 0:e.links)return(null==t?void 0:t.links)?ut(ut({},t.links),{heatmap:e.links.heatmap,preview:e.links.preview}):e.links}var bt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},ht=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};function yt(e,t){return bt(this,void 0,Promise,(function(){var n,r;return ht(this,(function(i){switch(i.label){case 0:if(!(n=(0,s.select)(tn).getSubscriptionId()))return[2];i.label=1;case 1:return i.trys.push([1,4,,7]),[4,(0,s.dispatch)(tn).lock()];case 2:return i.sent(),[4,at({path:"/nab/v1/subscription/".concat(n,"/quota"),method:"POST",data:{quantity:e,currency:t}})];case 3:return i.sent(),window.location.reload(),[3,7];case 4:return r=i.sent(),[4,(0,s.dispatch)(tn).unlock()];case 5:return i.sent(),[4,(0,E.createErrorNotice)(r)];case 6:return i.sent(),[3,7];case 7:return[2]}}))}))}var mt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},xt=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};function Et(){return mt(this,void 0,Promise,(function(){var e,t;return xt(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,at({path:"/nab/v1/types"})];case 1:return e=n.sent(),[4,(0,s.dispatch)(tn).receiveKindEntitiesQuery((0,f.values)(e))];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),console.warn(t),[3,4];case 4:return[2]}}))}))}function wt(e,t){return mt(this,void 0,Promise,(function(){var n,r,i;return xt(this,(function(o){switch(o.label){case 0:if(!e||!t)return[2];o.label=1;case 1:return o.trys.push([1,5,,6]),[4,c(tn).getKindEntities()];case 2:return n=o.sent(),(0,f.find)(n,{name:e})?[4,at({path:"/nab/v1/post/?id=".concat(t,"&type=").concat(e)})]:(console.warn("Entity ".concat(e," not found in"),n),[2]);case 3:return r=o.sent(),[4,(0,s.dispatch)(tn).receiveEntityRecords(e,r)];case 4:return o.sent(),[3,6];case 5:return i=o.sent(),console.warn(i),[3,6];case 6:return[2]}}))}))}var _t=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Tt=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};function St(e){return _t(this,void 0,Promise,(function(){var t,n,r;return Tt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,at({path:"/nab/v1/experiment/".concat(e)})];case 1:return t=i.sent(),[4,(0,s.dispatch)(tn).receiveExperiment(e,t)];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),r=n instanceof Error?n.message:"unknown",console.warn("Unable to retrieve experiment ".concat(e,". Error: ").concat(r,".")),[3,4];case 4:return[2]}}))}))}var Pt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},It=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};function At(){return Pt(this,void 0,Promise,(function(){var e,t,n,r,i;return It(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,7]),[4,at({path:"/nab/v1/fastspring"})];case 1:return e=o.sent(),t=e.currency,n=e.products,r=e.subscriptionId,[4,(0,s.dispatch)(tn).receiveFSCurrency(t)];case 2:return o.sent(),[4,(0,s.dispatch)(tn).receiveFSProducts(n)];case 3:return o.sent(),[4,(0,s.dispatch)(tn).receiveFSSubscriptionId(r)];case 4:return o.sent(),[3,7];case 5:return i=o.sent(),[4,(0,E.createErrorNotice)(i,(0,P._x)("Error while retrieving NC products.","text","nelio-ab-testing"))];case 6:throw o.sent(),i;case 7:return[2]}}))}))}var Ct=function(){return Pt(void 0,void 0,Promise,(function(){return It(this,(function(e){switch(e.label){case 0:return[4,c(tn).getProducts()];case 1:return[2,void e.sent()]}}))}))},Rt=function(){return Pt(void 0,void 0,Promise,(function(){return It(this,(function(e){switch(e.label){case 0:return[4,c(tn).getProducts()];case 1:return[2,void e.sent()]}}))}))},kt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Ot=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};function Ut(e){return kt(this,void 0,Promise,(function(){var t,n,r;return Ot(this,(function(i){switch(i.label){case 0:if(!e)return[2];i.label=1;case 1:return i.trys.push([1,4,,5]),[4,at({path:"/wp/v2/media/".concat(e)})];case 2:return t=i.sent(),[4,(0,s.dispatch)(tn).receiveMediaUrl(e,t.source_url)];case 3:return i.sent(),[3,5];case 4:return n=i.sent(),r=n instanceof Error?n.message:"unknown",console.warn("Error while retrieving media. Error: ".concat(r)),[3,5];case 5:return[2]}}))}))}var Dt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Lt=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};function Vt(e){return Dt(this,void 0,Promise,(function(){var t,n,r,i;return Lt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,6]),[4,c(tn).getExperiment(e)];case 1:return(t=o.sent())?[4,at({path:"/nab/v1/experiment/".concat(e,"/result")})]:[2];case 2:return n=o.sent(),r=function(e,t){return Q({winners:Y(e.results||{},t.goals),wasEnoughData:W(e.results||{},t.goals),alternatives:K(e,t),segments:H(e,t)},e.uniqueResults&&{winnersUnique:Y(e.uniqueResults||{},t.goals),wasEnoughDataUnique:W(e.uniqueResults||{},t.goals)})}(n,t),[4,(0,s.dispatch)(tn).receiveExperimentResult(e,r)];case 3:case 5:return o.sent(),[3,6];case 4:return i=o.sent(),[4,(0,E.createErrorNotice)(i,(0,P.sprintf)(/* translators: test id */ /* translators: test id */
(0,P._x)("Unable to retrieve results in test %d.","text","nelio-ab-testing"),e))];case 6:return[2]}}))}))}function Mt(e){return Dt(this,void 0,Promise,(function(){return Lt(this,(function(t){switch(t.label){case 0:return[4,c(tn).getExperimentResults(e)];case 1:return t.sent(),[2]}}))}))}function jt(e){return Dt(this,void 0,Promise,(function(){return Lt(this,(function(t){switch(t.label){case 0:return[4,c(tn).getExperimentResults(e)];case 1:return t.sent(),[2]}}))}))}function qt(e){return Dt(this,void 0,Promise,(function(){return Lt(this,(function(t){switch(t.label){case 0:return[4,c(tn).getExperimentResults(e)];case 1:return t.sent(),[2]}}))}))}function Nt(e){return Dt(this,void 0,Promise,(function(){return Lt(this,(function(t){switch(t.label){case 0:return[4,c(tn).getExperimentResults(e)];case 1:return t.sent(),[2]}}))}))}function Bt(e){return Dt(this,void 0,Promise,(function(){return Lt(this,(function(t){switch(t.label){case 0:return[4,c(tn).getExperimentResults(e)];case 1:return t.sent(),[2]}}))}))}var Ft=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Gt=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};function Qt(){return Ft(this,void 0,Promise,(function(){var e,t,n;return Gt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,at({path:"/nab/v1/plugins"})];case 1:return e=r.sent(),[4,(0,s.dispatch)(tn).receivePlugins(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),n=t instanceof Error?t.message:"unknown",console.warn("Unable to retrieve active plugins. Error: ".concat(n)),[3,4];case 4:return[2]}}))}))}function Ht(){return Ft(this,void 0,Promise,(function(){var e,t,n;return Gt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,at({path:"/nab/v1/menu/search?query"})];case 1:return e=r.sent(),[4,(0,s.dispatch)(tn).receiveMenus(e.results)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),n=t instanceof Error?t.message:"unknown",console.warn("Unable to check if site has menus. Error: ".concat(n)),[3,4];case 4:return[2]}}))}))}function Yt(e){return Ft(this,void 0,Promise,(function(){var t,n,r;return Gt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,at({path:"/nab/v1/menu/".concat(e)})];case 1:return t=i.sent(),[4,(0,s.dispatch)(tn).receiveMenus(t)];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),r=n instanceof Error?n.message:"unknown",console.warn("Unable to retrieve menu ".concat(e,". Error: ").concat(r)),[3,4];case 4:return[2]}}))}))}function Wt(){return Ft(this,void 0,Promise,(function(){var e,t,n;return Gt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,at({path:(0,re.addQueryArgs)("/nab/v1/template-contexts")})];case 1:return e=r.sent(),[4,(0,s.dispatch)(tn).receiveTemplateContexts(e.results)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),n=t instanceof Error?t.message:"unknown",console.warn("Unable to retrieve template contexts. Error: ".concat(n)),[3,4];case 4:return[2]}}))}))}function Kt(){return Ft(this,void 0,Promise,(function(){var e,t,n;return Gt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,at({path:(0,re.addQueryArgs)("/nab/v1/templates")})];case 1:return e=r.sent(),[4,(0,s.dispatch)(tn).receiveTemplates(e.results)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),n=t instanceof Error?t.message:"unknown",console.warn("Unable to retrieve templates. Error: ".concat(n)),[3,4];case 4:return[2]}}))}))}function Xt(){return Ft(this,void 0,Promise,(function(){var e,t,n;return Gt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,at({path:"/nab/v1/themes"})];case 1:return e=r.sent(),[4,(0,s.dispatch)(tn).receiveThemes(e.results)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),n=t instanceof Error?t.message:"unknown",console.warn("Unable to retrieve themes. Error: ".concat(n)),[3,4];case 4:return[2]}}))}))}var zt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},$t=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};function Jt(){return zt(this,void 0,Promise,(function(){var e,t;return $t(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,5]),[4,at({path:"/nab/v1/site/quota"})];case 1:return e=n.sent(),[4,(0,s.dispatch)(tn).receiveSiteQuota(e)];case 2:return n.sent(),[3,5];case 3:return t=n.sent(),[4,(0,E.createErrorNotice)((0,P._x)("Unable to retrieve quota.","text","nelio-ab-testing"))];case 4:throw n.sent(),t;case 5:return[2]}}))}))}var Zt=function(){return Zt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Zt.apply(this,arguments)},en=Zt(Zt({},r),i),tn=(0,s.createReduxStore)("nab/data",{reducer:k,controls:s.controls,actions:en,selectors:n,resolvers:o});function nn(e,t){return u((function(n){var r,i=n(tn),o=i.getPageAttribute,a=i.getExperimentAttribute,s=o("editor/activeExperiment");return s&&null!==(r=a(s,e))&&void 0!==r?r:t}))}function rn(e,t){var n,r=null!==(n=u((function(t){return t(tn).getPageAttribute(e)})))&&void 0!==n?n:t,i=(0,s.useDispatch)(tn).setPageAttribute;return[r,function(t){return i(e,t)}]}function on(e){return u((function(t){return t(tn).getPluginSetting(e)}))}!function(e){(0,s.register)(e)}(tn),(0,s.select)(tn).getPluginSetting("siteId"),(0,s.dispatch)(tn).setToday((0,l.format)("Y-m-d",new Date)),function(e,t){var n;(0,s.dispatch)(tn).setPageAttribute(e,(0,E.getValue)(e,t));var r=null!==(n=(0,s.select)(tn).getPageAttribute(e))&&void 0!==n?n:t;!function(e,t){(0,s.subscribe)(e,t)}((function(){var n,i=null!==(n=(0,s.select)(tn).getPageAttribute(e))&&void 0!==n?n:t;i!==r&&(r=i,(0,E.setValue)(e,i))}),tn)}("results/shouldShowUniqueResults",!1);var an=function(e,t){return u((function(n){return n(tn).getAdminUrl(e,t)}))}})();var n=nab="undefined"==typeof nab?{}:nab;for(var r in t)n[r]=t[r];t.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();