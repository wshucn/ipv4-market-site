(()=>{var e={d:(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};(()=>{"use strict";e.r(r),e.d(r,{experiments:()=>i});var t={};e.r(t),e.d(t,{getExperimentSupport:()=>p,getExperimentType:()=>l,getExperimentTypes:()=>c,getExperimentView:()=>d,getHelpString:()=>v,hasExperimentSupport:()=>u});var n={};e.r(n),e.d(n,{addExperimentTypes:()=>m,removeExperimentTypes:()=>y});var i={};e.r(i),e.d(i,{registerExperimentType:()=>T,store:()=>E});const o=window.wp.data,a=window.lodash,s=window.nab.utils;function c(e){return e.experimentTypes}function l(e,r){return e.experimentTypes[r]}var p=function(e,r,t){var n=f(e,r);return null==n?void 0:n.supports[t]};function u(e,r,t){return!!p(e,r,t)}function d(e,r,t){var n=f(e,r);if(n)return n.views[t]}function v(e,r,t){var n=f(e,r);return(null==n?void 0:n.help[t])||""}var f=function(e,r){return"string"==typeof r?l(e,r):r};function m(e){return{type:"ADD_EXPERIMENT_TYPES",experimentTypes:(0,a.castArray)(e)}}function y(e){return{type:"REMOVE_EXPERIMENT_TYPES",names:(0,a.castArray)(e)}}var g={experimentTypes:{}},h=function(){return h=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},h.apply(this,arguments)},E=(0,o.createReduxStore)("nab/experiments",{reducer:function(e,r){var t;return void 0===e&&(e=g),null!==(t=function(e,r){switch(r.type){case"ADD_EXPERIMENT_TYPES":return h(h({},e),{experimentTypes:h(h({},e.experimentTypes),(0,a.keyBy)(r.experimentTypes,"name"))});case"REMOVE_EXPERIMENT_TYPES":return h(h({},e),{experimentTypes:(0,a.omit)(e.experimentTypes,r.names)})}}(e,r))&&void 0!==t?t:e},selectors:t,actions:n});!function(e){(0,o.register)(e)}(E);var x=function(){return x=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},x.apply(this,arguments)};function T(e,r){var t=x(x({description:"",supports:{},checks:S(r)?r.checks:{getControlError:function(){return!1},getAlternativeError:function(){return!1}}},r),{name:e});if("nab/heatmap"===e)return(0,o.dispatch)(E).addExperimentTypes(t),t;if("string"==typeof e)if(/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(e))if((0,o.select)(E).getExperimentType(e))console.error("Experiment type “".concat(e,"” is already registered."));else if(S(t))if(b(t))if(w(t))if(O(t))if(P(t))if((0,s.isValidIcon)(r.icon))if(j(t)){if(_(t))return(0,o.dispatch)(E).addExperimentTypes(t),t;console.error("The experiment “".concat(e,"” must specify original and alternative edit views."))}else console.error("The experiment “".concat(e,"” must specify original and alternative default values."));else console.error("The icon passed is invalid. The icon should be an element or a function.");else console.error("The experiment “".concat(e,"” must have an icon."));else console.error("The experiment “".concat(e,"” must have a title."));else console.error("The experiment “".concat(e,"” must have a valid category."));else console.error("The experiment “".concat(e,"” must provide help strings explaining the control version and its variants."));else console.error("Experiment type “".concat(e,"” must provide at least two checks: “getControlError” and “getAlternativeError”."));else console.error("Experiment type names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-experiment");else console.error("Experiment type names must be strings.")}var b=function(e){return!!e.help&&"string"==typeof e.help.original&&!!e.help.original&&"string"==typeof e.help.alternative&&!!e.help.alternative},w=function(e){var r;return["page","global","woocommerce","other"].includes(null!==(r=e.category)&&void 0!==r?r:"")},O=function(e){return"string"==typeof e.title&&!!e.title},P=function(e){return"icon"in e},_=function(e){var r,t;return(0,a.isFunction)(null===(r=e.views)||void 0===r?void 0:r.original)&&(0,a.isFunction)(null===(t=e.views)||void 0===t?void 0:t.alternative)},S=function(e){var r,t;return(0,a.isFunction)(null===(r=e.checks)||void 0===r?void 0:r.getControlError)&&(0,a.isFunction)(null===(t=e.checks)||void 0===t?void 0:t.getAlternativeError)},j=function(e){var r,t;return(0,a.isObject)(null===(r=e.views)||void 0===r?void 0:r.original)&&(0,a.isObject)(null===(t=e.defaults)||void 0===t?void 0:t.alternative)}})();var t=nab="undefined"==typeof nab?{}:nab;for(var n in r)t[n]=r[n];r.__esModule&&Object.defineProperty(t,"__esModule",{value:!0})})();