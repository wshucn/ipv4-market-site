(()=>{var e,t={7400:(e,t,n)=>{"use strict";const a=window.nab.data,r=window.wp.element;function i(e,t){t&&(r.createRoot?(0,r.createRoot)(t).render(e):(0,r.render)(e,t))}const o=window.wp.components,c=window.wp.data;function l(e,t){return(0,c.useSelect)(e,t)}const u=window.wp.domReady,s=n.n(u)(),d=window.wp.i18n,m=window.lodash,p=window.nab.experiments,v=window.nab.utils;var f=function(){return f=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},f.apply(this,arguments)},g=function(e){var t=e.experimentId,n=e.postBeingEdited,a=x(t);return w(t)?r.createElement("span",{className:"spinner is-active"}):r.createElement(r.Fragment,null,r.createElement(b,{icon:a,experimentId:t}),r.createElement(_,{experimentId:t,postBeingEdited:n}))},b=function(e){var t=e.icon,n=e.experimentId,a=E(n),i=h(n);return r.createElement(o.PanelRow,{className:"nab-test-panel"},r.createElement("span",{className:"nab-test-panel__icon"},r.createElement(t,null)),r.createElement("a",{className:"nab-test-panel__name",href:i},a))},_=function(e){var t=e.experimentId,n=e.postBeingEdited,a=y(t);return a?r.createElement(o.PanelRow,{className:"nab-variants-panel"},r.createElement("h2",{className:"nab-variants-panel__title"},(0,d._x)("Variants","text","nelio-ab-testing")),a.map((function(e){var t=e.name,a=e.link,i=e.postId,o=e.index;return r.createElement("div",{className:"nab-alternative",key:i},r.createElement("span",{className:"nab-alternative__letter"},(0,v.getLetter)(o)),r.createElement("span",{className:"nab-alternative__name"},n!==i?r.createElement("a",{href:a},O(t,o)):r.createElement("strong",null,O(t,o))))}))):null},E=function(e){return l((function(t){var n;return(null===(n=t(a.store).getExperiment(e))||void 0===n?void 0:n.name)||(0,d._x)("Unnamed Test","text","nelio-ab-testing")}))},h=function(e){return l((function(t){var n;return(null===(n=t(a.store).getExperiment(e))||void 0===n?void 0:n.links.edit)||""}))},y=function(e){return l((function(t){var n;return(0,m.map)(null===(n=t(a.store).getExperiment(e))||void 0===n?void 0:n.alternatives,(function(e,t){return{index:t,postId:P(e)?e.attributes.postId:0,name:S(e)?e.attributes.name:"",link:e.links.edit}}))}))},w=function(e){return l((function(t){return!t(a.store).hasFinishedResolution("getExperiment",[e])}))},x=function(e){return l((function(t){var n,i,o,c,l=t(a.store).getExperiment,u=t(p.store).getExperimentTypes,s=null!==(i=null===(n=l(e))||void 0===n?void 0:n.type)&&void 0!==i?i:"";return null!==(c=null===(o=u()[s])||void 0===o?void 0:o.icon)&&void 0!==c?c:function(){return r.createElement(r.Fragment,null)}}))},P=function(e){return!!e.attributes.postId},S=function(e){return!!e.attributes.name},O=function(e,t){return e||(0===t?(0,d._x)("Control Version","text","nelio-ab-testing"):(0,d.sprintf)(/* translators: a letter, such as A, B, or C */ /* translators: a letter, such as A, B, or C */
(0,d._x)("Variant %s","text","nelio-ab-testing"),(0,v.getLetter)(t)))};const C=window.wp.mediaUtils;var I=n(6942),N=n.n(I);const k=window.nab.components;var j=function(){return j=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},j.apply(this,arguments)},T=function(e){var t=e.originalPrice,n=(0,r.useState)(e.regularPrice),a=n[0],i=n[1],o=(0,r.useState)(e.salePrice),c=o[0],l=o[1];return r.createElement("div",{className:"nab-product-data"},r.createElement(B,{originalPrice:t,regularPrice:a,salePrice:c,onRegularPriceChange:i,onSalePriceChange:l}),r.createElement(z,{name:"nab_regular_price",value:a}),r.createElement(z,{name:"nab_sale_price",value:c}))},R=function(e){return r.createElement("div",{className:"nab-product-data"},e.variations.map((function(t){return r.createElement(M,{key:t.id,isPriceTestingEnabled:e.isPriceTestingEnabled,data:t})})))},M=function(e){var t=e.data,n=e.isPriceTestingEnabled,a=t.id,i=t.name,c=t.originalPrice,l=(0,r.useState)(t.imageId),u=l[0],s=l[1],m=(0,r.useState)(t.regularPrice),p=m[0],v=m[1],f=(0,r.useState)(t.salePrice),g=f[0],b=f[1],_=(0,r.useState)(t.description),E=_[0],h=_[1];return r.createElement("div",{className:"nab-product-data__variation"},r.createElement("div",{className:"nab-product-data__variation-name"},r.createElement("strong",null,"#",a)," ",i),r.createElement("div",{className:N()({"nab-product-data__variation-data":!0,"nab-product-data__variation-data--has-pricing":n})},r.createElement(F,{imageId:u,onImageIdChange:s}),n&&r.createElement(B,{originalPrice:c,regularPrice:p,salePrice:g,onRegularPriceChange:v,onSalePriceChange:b}),r.createElement("div",{className:"nab-product-data__variation-description"},r.createElement(o.TextareaControl,{label:(0,d._x)("Description","text","nelio-ab-testing"),value:E,onChange:h})),r.createElement(z,{name:"nab_variation_data[".concat(a,"]"),value:{imageId:u,regularPrice:p,salePrice:g,description:E}})))},B=function(e){var t=e.originalPrice,n=e.regularPrice,a=e.salePrice,i=e.onRegularPriceChange,c=e.onSalePriceChange,l=U(),u=D(),s=function(e){return e.replace(".",l)},m=function(e){return e.replace(l,".").replace(/[^0-9.]/g,"").replace(/\./g,"#").replace("#",".").replace(/#/g,"")};return r.createElement("div",{className:"nab-product-data__pricing"},r.createElement(o.TextControl,{label:(0,d.sprintf)(/* translators: currency */ /* translators: currency */
(0,d._x)("Regular price (%s)","text","nelio-ab-testing"),u),value:s(n),placeholder:s(t),onChange:function(e){return i(m(e))}}),r.createElement(o.TextControl,{label:(0,d.sprintf)(/* translators: currency */ /* translators: currency */
(0,d._x)("Sale price (%s)","text","nelio-ab-testing"),u),value:s(a),onChange:function(e){return c(m(e))}}))},F=function(e){var t=e.imageId,n=e.onImageIdChange,i=L(t),l=(0,c.useDispatch)(a.store).receiveMediaUrl;return r.createElement("div",{className:"nab-product-data__variation-image-wrapper"},t?r.createElement(k.Tooltip,{text:(0,d._x)("Click to remove featured image","user","nelio-ab-testing")},r.createElement(o.Button,{className:"nab-product-data__variation-image-action nab-product-data__variation-image-action--is-remove",onClick:function(){return n(0)}},r.createElement(A,{src:i}))):r.createElement(C.MediaUpload,{title:(0,d._x)("Alternative Featured Image","text","nelio-ab-testing"),allowedTypes:["image"],value:t,onSelect:function(e){var t=e.id,a=e.url;"string"==typeof a&&(l(t,a),n(t))},render:function(e){var t=e.open;return r.createElement(k.Tooltip,{text:(0,d._x)("Click to set a featured image","user","nelio-ab-testing")},r.createElement(o.Button,{className:"nab-product-data__variation-image-action nab-product-data__variation-image-action--is-set",onClick:t},r.createElement(A,{src:i})))}}))},A=function(e){var t=e.src;return t?r.createElement("img",{className:"nab-product-data__variation-image",alt:(0,d._x)("Featured Image","text","nelio-ab-testing"),src:t}):r.createElement(k.FancyIcon,{className:"nab-product-data__variation-image"})},z=function(e){var t=e.name,n=e.value;return"string"==typeof n?r.createElement("input",{type:"hidden",name:t,value:n}):r.createElement(r.Fragment,null,Object.keys(n).map((function(e){return r.createElement("input",{type:"hidden",key:e,name:"".concat(t,"[").concat(e,"]"),value:n[e]})})))},U=function(){return l((function(e){return e(a.store).getECommerceSetting("woocommerce","decimalSeparator")}))},D=function(){return l((function(e){return e(a.store).getECommerceSetting("woocommerce","currencySymbol")}))},L=function(e){return l((function(t){return t(a.store).getMediaUrl(e)}))};const V=window.jQuery;var G=n.n(V);function H(){var e,t=G()("#product_image_gallery"),n=G()("#product_images_container").find("ul.product_images");G()(".add_product_images").on("click","a",(function(a){var r=G()(this);a.preventDefault(),e||(e=wp.media.frames.product_gallery=wp.media({title:r.data("choose"),button:{text:r.data("update")},states:[new wp.media.controller.Library({title:r.data("choose"),filterable:"all",multiple:!0})]})).on("select",(function(){var a=e.state().get("selection"),i=t.val();a.map((function(e){if((e=e.toJSON()).id){i=i?i+","+e.id:e.id;var t=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;n.append('<li class="image" data-attachment_id="'+e.id+'"><img src="'+t+'" /><ul class="actions"><li><a href="#" class="delete" title="'+r.data("delete")+'">'+r.data("text")+"</a></li></ul></li>")}})),t.val(i)})),e.open()})),n.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style")},update:function(){var e="";G()("#product_images_container").find("ul li.image").css("cursor","default").each((function(){var t=G()(this).attr("data-attachment_id");e=e+t+","})),t.val(e)}}),G()("#product_images_container").on("click","a.delete",(function(){G()(this).closest("li.image").remove();var e="";return G()("#product_images_container").find("ul li.image").css("cursor","default").each((function(){var t=G()(this).attr("data-attachment_id");e=e+t+","})),t.val(e),G()("#tiptip_holder").removeAttr("style"),G()("#tiptip_arrow").removeAttr("style"),!1}))}var J,Q=function(){return Q=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Q.apply(this,arguments)};window.nab=Q(Q({},(J=window)&&"object"==typeof J&&"nab"in J?window.nab:{}),{initExperimentSummary:function(e){s((function(){var t=document.getElementById("nab-experiment-summary");t&&i(r.createElement(g,f({},e)),t)}))},initProductDataMetabox:function(e){s((function(){var t=document.getElementById("nab-product-data-root");t&&i("regular"===e.type?r.createElement(T,j({},e)):r.createElement(R,j({},e)),t)}))},initProductGalleryMetabox:function(){s(H)}})},6942:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)a.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.m=t,e=[],a.O=(t,n,r,i)=>{if(!n){var o=1/0;for(s=0;s<e.length;s++){n=e[s][0],r=e[s][1],i=e[s][2];for(var c=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(c=!1,i<o&&(o=i));if(c){e.splice(s--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[n,r,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={2228:0,8571:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,o=n[0],c=n[1],l=n[2],u=0;if(o.some((t=>0!==e[t]))){for(r in c)a.o(c,r)&&(a.m[r]=c[r]);if(l)var s=l(a)}for(t&&t(n);u<o.length;u++)i=o[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(s)},n=self.webpackChunknab=self.webpackChunknab||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=a.O(void 0,[8571],(()=>a(7400)));r=a.O(r);var i=nab="undefined"==typeof nab?{}:nab;for(var o in r)i[o]=r[o];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();