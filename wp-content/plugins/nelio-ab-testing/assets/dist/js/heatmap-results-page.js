(()=>{var e,t={5602:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initPage:()=>Xn});var a={};n.r(a),n.d(a,{canRawDataBeProcessed:()=>Q,getActiveAlternative:()=>ce,getActiveFilter:()=>ue,getActiveMode:()=>de,getActiveResolution:()=>me,getClickVisibilityProps:()=>re,getClicksInResolution:()=>X,getClicksPerSquare:()=>Z,getConfettiFilterOptions:()=>ae,getDisabledFilterOptions:()=>be,getFirstDayOfWeek:()=>le,getIFrameLabels:()=>oe,getIFrameStatus:()=>se,getIFrames:()=>pe,getIntensity:()=>fe,getLoadAttempts:()=>Y,getOpacity:()=>he,getPageDimensions:()=>ie,getProcessedResultStatus:()=>$,getRawClicks:()=>z,getRawResultProgress:()=>H,getRawResultStatus:()=>q,getRawScrolls:()=>G,getScrollSummary:()=>ne,getScrollsInResolution:()=>ee,hasProcessedResults:()=>K,isInteractive:()=>ve,isSidebarVisible:()=>ge});var r={};n.r(r),n.d(r,{makeSidebarVisible:()=>We,markResultsAsProcessing:()=>ke,receiveRawResults:()=>ye,requestResultProcessing:()=>Re,setActiveAlternative:()=>Te,setActiveFilter:()=>Ne,setActiveMode:()=>Pe,setActiveResolution:()=>Ie,setDisabledFilterOptions:()=>Ce,setFirstDayOfWeek:()=>Ae,setIFrameStatus:()=>Oe,setIntensity:()=>Fe,setInteractive:()=>De,setOpacity:()=>Me,setPageInfo:()=>Se,setProcessedResults:()=>we,setRawResultProgress:()=>xe,setRawResultStatus:()=>_e,updateLoadAttempts:()=>Ee});var i={};n.r(i),n.d(i,{loadResults:()=>et,processResults:()=>tt});const l=window.wp.element;function s(e,t){t&&(l.createRoot?(0,l.createRoot)(t).render(e):(0,l.render)(e,t))}const o=window.nab.experimentLibrary,c=window.nab.segmentationRuleLibrary,u=window.nab.utils,d=window.wp.i18n,m=window.React;function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b.apply(null,arguments)}const p=function(e){return m.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 133.65 57.138"},e),m.createElement("path",{d:"M30.395 11.33c-1.34 0-2.642.15-3.894.438.084.284.175.617.293 1.038q.245.776.366 1.102l2.596 8.592c.803-.035 1.621-.074 2.285-.093a54 54 0 0 1 1.567-.06c.53-.015.932-.024 1.204-.038q.429-.021.94-.021c2.121 0 3.843.281 5.175.838q2.02.836 2.877 2.222.858 1.365.86 2.996-.002 1.265-.554 2.408-.529 1.121-1.344 1.856a5.9 5.9 0 0 1-1.673 1.119 19 19 0 0 1-2.038.715q3.24.204 5.443 1.855.574.43 1 .94a17.3 17.3 0 0 0 2.25-8.553c0-9.585-7.768-17.354-17.353-17.354zm-7.797 1.847-.106.051-3.732 10.469h6.936zm-2.272 1.37c-4.412 3.146-7.29 8.306-7.29 14.137 0 1.835.29 3.604.817 5.264.298-1.744.855-3.546 1.443-5.396.006-.02.017-.05.026-.072l.004-.035 4.558-12.6c.08-.223.238-.684.442-1.298zm14.711 9.247q-1.162 0-2.285.204v9.912h1.915c1.944 0 3.31-.451 4.098-1.362.802-.911 1.205-2.133 1.205-3.656q0-2.08-1.162-3.591-1.161-1.508-3.77-1.507M18.475 25.37c-2.198 6.605 1.994 8.626 1.506 12.426-.207 1.616-1.252 2.408-2.421 2.57a17.33 17.33 0 0 0 10.013 5.443q.168-.072.285-.17.407-.327.507-1.162c.08-.557.123-1.451.123-2.672v-6.686c-.036-1.147-.061-2.172-.532-3.936a41 41 0 0 0-.587-2.102l-1.12-3.711zm14.277 10.047v10.26q.346.02.753.06l.099.004a17.3 17.3 0 0 0 8.213-3.991c.045-.312.073-.64.073-.988a5.8 5.8 0 0 0-.553-2.447q-.53-1.226-2.06-2.064-1.508-.835-4.178-.834h-2.345zM50.46 14.055v14.513h2.405V16.477h8.432a1.26 1.26 0 0 1 1.258 1.255v10.836h2.422V16.586a2.526 2.526 0 0 0-2.532-2.531zm16.938 0v2.422h14.516v-2.422zm16.938 0v11.982a2.526 2.526 0 0 0 2.531 2.531H98.85v-2.422H88.014a1.26 1.26 0 0 1-1.256-1.255V14.055zm16.918 0v14.513h2.422V14.055zm7.357 0a2.504 2.504 0 0 0-2.511 2.511v9.489a2.506 2.506 0 0 0 2.511 2.513h9.489a2.52 2.52 0 0 0 2.513-2.513v-9.489a2.506 2.506 0 0 0-2.513-2.511zm1.149 2.404h7.176c.692 0 1.238.564 1.238 1.256v7.176c0 .692-.546 1.238-1.238 1.238h-7.176a1.23 1.23 0 0 1-1.239-1.238v-7.176c0-.692.547-1.256 1.239-1.256m-42.362 3.64v2.424h14.516V20.1zm0 6.047v2.422h14.516v-2.422z",style:{fill:"#d24633"}}),m.createElement("path",{d:"m53.3 30.166-.943.11v2.851h-2.09v.816h2.09V39.9c0 1.907.672 3.141 2.76 3.141.6 0 1.217-.2 1.834-.49l-.346-.799c-.49.236-1.033.4-1.505.4-1.526 0-1.8-.926-1.8-2.252v-5.957h3.325v-.816h-3.324zm30.786 0-.943.11v2.851h-2.088v.816h2.088V39.9c0 1.907.671 3.141 2.76 3.141.599 0 1.216-.2 1.833-.49l-.345-.799c-.49.236-1.034.4-1.506.4-1.526 0-1.8-.926-1.8-2.252v-5.957h3.325v-.816h-3.324zm7.978.021a.697.697 0 0 0-.709.709c0 .177.068.35.186.485l.006.006.004.006a.73.73 0 0 0 .513.214.7.7 0 0 0 .497-.214.7.7 0 0 0 .214-.497.68.68 0 0 0-.222-.498.7.7 0 0 0-.489-.21m-16.74 2.74c-1.14 0-2.042.246-2.676.772-.608.503-.931 1.162-.931 1.914 0 .642.167 1.18.52 1.575l.003.003.002.002a3.2 3.2 0 0 0 1.252.797h.004l.004.002q.722.227 1.855.432l-.002-.002c.696.134 1.236.269 1.612.398l.004.002h.004c.372.113.671.296.914.55l.004.003.003.004c.234.224.354.524.354.959 0 .604-.217 1.038-.682 1.38v.003c-.455.323-1.207.508-2.261.508q-1.049 0-1.948-.336h-.002q-.887-.358-1.398-.854l-.188-.182-.496.663.137.14c.401.414.956.744 1.656.998q1.056.384 2.239.383c1.186 0 2.115-.224 2.775-.709l.002-.002c.652-.492.996-1.18.996-1.992 0-.618-.17-1.134-.523-1.504a2.9 2.9 0 0 0-1.221-.783c-.458-.153-1.062-.3-1.818-.45l-.002-.001h-.002q-1.026-.184-1.631-.38a2.35 2.35 0 0 1-.957-.57c-.237-.247-.362-.576-.362-1.037 0-.567.207-.988.65-1.332.447-.348 1.144-.543 2.11-.543q.797.001 1.537.23.74.23 1.254.643l.186.149.496-.662-.17-.139c-.386-.32-.88-.565-1.479-.744a6 6 0 0 0-1.824-.287m-11.072.018c-2.76 0-4.975 2.126-4.975 5.05 0 3.122 2.215 5.028 4.975 5.046 1.562 0 3.269-.636 4.213-1.889l-.69-.562c-.726.98-2.234 1.488-3.523 1.488-2.016 0-3.777-1.325-3.977-3.63h8.809c.381-3.814-2.072-5.503-4.832-5.503m27.398.092v10.004h.83V33.037zm10.569.035c-1.362.018-2.742.58-3.487 1.924v-1.76h-.945v9.787h.234v.018h.37v-.018h.359v-5.447c0-2.015 1.416-3.542 3.432-3.56 2.124-.019 3.486 1.18 3.486 3.396v5.629h.963v-5.646c0-2.724-1.797-4.323-4.412-4.323m13.22.233c-.92 0-1.762.206-2.511.619s-1.342 1-1.768 1.748c-.427.738-.639 1.575-.639 2.496s.213 1.764.64 2.514a4.7 4.7 0 0 0 1.765 1.746l.002.002c.749.413 1.591.619 2.511.619 1.049 0 1.986-.271 2.788-.815.604-.412.95-1.032 1.3-1.648v1.752c0 1.366-.322 2.324-.927 2.918l-.002.002-.002.002c-.596.606-1.538.928-2.88.928a5.9 5.9 0 0 1-2.132-.374 4.8 4.8 0 0 1-1.676-1.056l-.162-.16-.576.576.15.164c.483.522 1.112.927 1.877 1.22h.002c.778.294 1.62.44 2.518.44 1.526 0 2.703-.38 3.484-1.174l.002-.002c.782-.783 1.154-1.978 1.154-3.539V33.36h-.83v2.381c-.35-.607-.698-1.218-1.302-1.62-.802-.543-1.738-.815-2.786-.815m-51.187.529c2.36 0 3.94 1.345 3.959 3.76h-7.936c.218-2.397 1.961-3.76 3.977-3.76m51.187.283c.79 0 1.486.175 2.102.524h.002l.002.002c.628.337 1.11.807 1.459 1.423s.523 1.312.523 2.102-.176 1.492-.525 2.121a3.7 3.7 0 0 1-1.461 1.441c-.616.337-1.311.506-2.102.506s-1.494-.17-2.123-.507h-.002a3.74 3.74 0 0 1-1.439-1.442c-.349-.628-.523-1.33-.523-2.119s.174-1.486.523-2.102a3.6 3.6 0 0 1 1.441-1.423v-.002h.002c.63-.35 1.332-.524 2.121-.524",style:{fill:"#60609f"}}))};var f=function(){return l.createElement("div",{className:"nab-heatmap-no-longer-available"},l.createElement(p,{className:"nab-heatmap-no-longer-available__logo",title:"Nelio A/B Testing",alt:"Nelio A/B Testing"}),l.createElement("h1",{className:"nab-heatmap-no-longer-available__title"},(0,d._x)("Heatmap not found","text","nelio-ab-testing")),l.createElement("p",{className:"nab-heatmap-no-longer-available__explanation"},(0,d._x)("Oops! It looks like your heatmap is no longer available. Please keep in mind that heatmap data is only stored up to two years in Nelio’s cloud.","user","nelio-ab-testing")))};const v=window.wp.data;function g(e,t){return(0,v.useSelect)(e,t)}const h=window.nab.data;var y=function(){return null};const _=window.lodash;var x={confettiFilterOptions:{},byAlternative:{}},E=["#753966","#91628b","#5b52f3","#4a87d5","#42b0ec","#4cc3d9","#59d1b7","#7bc8a4","#bfe656","#ffc65d","#ffb039","#f17b45","#ef4444","#cb0a0a"];function w(e){return E[e%E.length]||E[0]}function S(e,t){if("other"===t)return"#ec82b6";t="".concat(null!=t?t:"");var n=isNaN(Number.parseInt(t))?-1:Number.parseInt(t);switch(e){case"country":return function(e){return{AR:"#75aadb",AU:"#008000",BR:"#2dc52d",CA:"#f71818",CN:"#ff0000",FI:"#2008ff",FR:"#0000ff",DE:"#b97575",GR:"#9292da",IS:"#9494c3",IN:"#ffa500",IT:"#007fff",JP:"#e8f48c",NL:"#ff7f00",NZ:"#993333",NO:"#00008b",PT:"#218000",RU:"#3e3e77",ES:"#ff0000",GB:"#e64444",US:"#ec7777"}[e]}(t);case"device":return function(e){return{desktop:"#11a0d2",console:"#f17b45",mobile:"#ffc65d",tablet:"#7bc8a4",smarttv:"#93648d",wearable:"#4bc0d6",embedded:"#ec82b6"}[e]}(t);case"os":return function(e){return"Mac OS X"===(e="".concat(e))?"#e6e6e6":-1!==e.indexOf("Windows 10")?"#066b96":-1!==e.indexOf("Windows Phone")?"#097cae":-1!==e.indexOf("Windows 7")?"#0a8bc3":-1!==e.indexOf("Windows Vista")?"#049cde":-1!==e.indexOf("Windows XP")?"#35afe4":-1!==e.indexOf("Windows")?"#67c5ef":{"Chromium OS":"#63c7c5","Mac OS":"#c3c3c3",Android:"#97e375",Debian:"#ff7185",Fuchsia:"#d0608a",Linux:"#5e2c80",Mint:"#7aaa65",SUSE:"#84bc91",Ubuntu:"#f28b4a",iOS:"#d6d6d6"}[e]}(t);case"browser":return function(e){return{"Opera Mini":"#ff6060","Opera Mobi":"#ff9090","Samsung Browser":"#93648d",Chrome:"#7bc8a4",Chromium:"#6cbc6d",Edge:"#024b6e",Firefox:"#f28b4a",Mozilla:"#f29f79",Opera:"#f24a4a",Safari:"#ffc65d",Vivaldi:"#ef6dd2"}["".concat(e)]}(t);case"dayOfWeek":return function(e){return["#ec82b6","#f17b45","#ffc65d","#7bc8a4","#4cc3d9","#4c8ad9","#93648d","#ec82b6"][e]}(n);case"hourOfDay":return function(e){return["#003e6b","#034d71","#066b96","#64c8c6","#dbeabf","#e3e075","#faca5c","#f28b4a","#d1618b","#9a4987","#5e2c80","#15205a"][e]}(n);default:return function(e){return["#cb0a0a","#ef4444","#f17b45","#ffb039","#ffc65d","#bfe656","#7bc8a4","#59d1b7","#4cc3d9","#42b0ec","#4a87d5","#5b52f3","#91628b","#753966"][e]}(n)}}var k=function(){return k=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},k.apply(this,arguments)};function R(e){var t={country:{},device:{},os:{},browser:{},dayOfWeek:{},hourOfDay:{},timeToClick:{},windowWidth:{}};return e.forEach((function(e){t.country[e.country]=(t.country[e.country]||0)+e.intensity,t.device[e.device]=(t.device[e.device]||0)+e.intensity,t.os[e.os]=(t.os[e.os]||0)+e.intensity,t.browser[e.browser]=(t.browser[e.browser]||0)+e.intensity,t.dayOfWeek[e.dayOfWeek]=(t.dayOfWeek[e.dayOfWeek]||0)+e.intensity,t.hourOfDay[e.hourOfDay]=(t.hourOfDay[e.hourOfDay]||0)+e.intensity,t.timeToClick[e.timeToClick]=(t.timeToClick[e.timeToClick]||0)+e.intensity,t.windowWidth[e.windowWidth]=(t.windowWidth[e.windowWidth]||0)+e.intensity})),Object.keys(t).reduce((function(e,n){var a;return k(k({},e),((a={})[n]=function(e,t){switch(e){case"country":case"device":return A(e,t);case"os":return n=A(e,t),a={"Windows 10":"Windows 01","Windows Phone":"Windows 02","Windows 7":"Windows 03","Windows Vista":"Windows 04","Windows XP":"Windows 05","Windows 98":"Windows 06","Windows 95":"Windows 07",Windows:"Windows 08"},r=Object.values(n).map((function(e){var t=e.key,n=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["key"]);return k(k({key:t},n),{sorting:a[t]?a[t]:t})})),i=(r=(0,_.orderBy)(r,"sorting")).map((function(e){return{key:e.key,color:e.color,value:e.value,label:e.label}})),(0,_.keyBy)(i,"key");case"browser":return function(e){var t=(0,_.orderBy)(Object.values(e),"key");return(0,_.keyBy)(t,"key")}(A(e,t));case"dayOfWeek":case"hourOfDay":case"timeToClick":case"windowWidth":return function(e,t){var n={dayOfWeek:[{label:(0,d._x)("Sunday","text","nelio-ab-testing")},{label:(0,d._x)("Monday","text","nelio-ab-testing")},{label:(0,d._x)("Tuesday","text","nelio-ab-testing")},{label:(0,d._x)("Wednesday","text","nelio-ab-testing")},{label:(0,d._x)("Thursday","text","nelio-ab-testing")},{label:(0,d._x)("Friday","text","nelio-ab-testing")},{label:(0,d._x)("Saturday","text","nelio-ab-testing")}],hourOfDay:[{label:(0,d._x)("12a – 2a","text","nelio-ab-testing")},{label:(0,d._x)("2a – 4a","text","nelio-ab-testing")},{label:(0,d._x)("4a – 6a","text","nelio-ab-testing")},{label:(0,d._x)("6a – 8a","text","nelio-ab-testing")},{label:(0,d._x)("8a – 10a","text","nelio-ab-testing")},{label:(0,d._x)("10a – 12p","text","nelio-ab-testing")},{label:(0,d._x)("12p – 2p","text","nelio-ab-testing")},{label:(0,d._x)("2p – 4p","text","nelio-ab-testing")},{label:(0,d._x)("4p – 6p","text","nelio-ab-testing")},{label:(0,d._x)("6p – 8p","text","nelio-ab-testing")},{label:(0,d._x)("8p – 10p","text","nelio-ab-testing")},{label:(0,d._x)("10p – 12a","text","nelio-ab-testing")}],timeToClick:[{label:(0,d._x)("0 – 2s","text","nelio-ab-testing")},{label:(0,d._x)("2 – 3s","text","nelio-ab-testing")},{label:(0,d._x)("3 – 4s","text","nelio-ab-testing")},{label:(0,d._x)("4 – 5s","text","nelio-ab-testing")},{label:(0,d._x)("5 – 10s","text","nelio-ab-testing")},{label:(0,d._x)("10 – 15s","text","nelio-ab-testing")},{label:(0,d._x)("15 – 20s","text","nelio-ab-testing")},{label:(0,d._x)("20 – 25s","text","nelio-ab-testing")},{label:(0,d._x)("25 – 30s","text","nelio-ab-testing")},{label:(0,d._x)("30 – 60s","text","nelio-ab-testing")},{label:(0,d._x)("1 – 2min","text","nelio-ab-testing")},{label:(0,d._x)("2 – 3min","text","nelio-ab-testing")},{label:(0,d._x)("3 – 5min","text","nelio-ab-testing")},{label:(0,d._x)("+5min","text","nelio-ab-testing")}],windowWidth:[{label:(0,d._x)("< 300 px","text","nelio-ab-testing")},{label:(0,d._x)("300 – 600px","text","nelio-ab-testing")},{label:(0,d._x)("600 – 900px","text","nelio-ab-testing")},{label:(0,d._x)("900 – 1200px","text","nelio-ab-testing")},{label:(0,d._x)("1200 – 1500px","text","nelio-ab-testing")},{label:(0,d._x)("1500 – 1800px","text","nelio-ab-testing")},{label:(0,d._x)("1800 – 2100px","text","nelio-ab-testing")},{label:(0,d._x)("+2100px","text","nelio-ab-testing")}]}[e].map((function(e,n){var a=e.label;return{key:"".concat(n),label:a,value:t[n]||0,color:""}})),a=-1;return(0,_.keyBy)(n.map((function(t){return k(k({},t),{color:S(e,t.key)||w(++a)})})),"key")}(e,t)}var n,a,r,i}(n,t[n]),a))}),{})}function A(e,t){var n=(0,_.orderBy)(Object.keys(t).map((function(e){var n;return{key:e,value:null!==(n=t[e])&&void 0!==n?n:0}})),"value","desc"),a=n.splice(0,14);a=(0,_.orderBy)(a,"key"),n.length&&a.push({key:"other",value:n.reduce((function(e,t){var n=t.value;return e+(null!=n?n:0)}),0)});var r=-1;return(0,_.keyBy)(a.map((function(t){var n=t.key,a=t.value;return{key:n,label:O(e,n),value:a,color:S(e,n)||w(++r)}})),"key")}function O(e,t){var n,a;return"other"===t?(0,d._x)("Other","text","nelio-ab-testing"):"device"===e?(null!==(a=null===(n=t[0])||void 0===n?void 0:n.toUpperCase())&&void 0!==a?a:"")+t.slice(1):t}var T=function(){return T=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},T.apply(this,arguments)};function N(e,t,n){var a,r,i,l;switch(n.type){case"RECEIVE_RAW_RESULTS":return{raw:n.data,byResolution:(0,_.mapValues)(t.byResolution,(function(e){return T(T({},e),{status:"missing"===e.status?"missing":"outdated"})})),loadAttempts:t.loadAttempts};case"SET_RAW_RESULT_STATUS":return T(T({},t),{raw:T(T({},t.raw),{status:n.status})});case"SET_RAW_RESULT_PROGRESS":return T(T({},t),{raw:T(T({},t.raw),{progress:n.progress})});case"UPDATE_LOAD_ATTEMPTS":return T(T({},t),{loadAttempts:{clicks:F(t.loadAttempts.clicks,n.clicks),scrolls:F(t.loadAttempts.scrolls,n.scrolls)}});case"SET_PROCESSED_RESULTS":if(!C(e,n.alternative))return t;var s=t.byResolution[n.resolution],o=T(T({},s),{results:n.results,status:"ready",confettiFilterOptions:R(n.results.clicks)});return T(T({},t),{byResolution:T(T({},t.byResolution),(a={},a[n.resolution]=o,a))});case"MARK_RESULTS_AS_PROCESSING":if(!D(e,n.alternative,n.resolution))return t;var c=t.byResolution[n.resolution].status;return T(T({},t),{byResolution:T(T({},t.byResolution),(r={},r[n.resolution]=T(T({},t.byResolution[n.resolution]),{status:"missing"===c?"initializing":"processing"}),r))});case"REQUEST_RESULTS_PROCESSING":return D(e,n.alternative,n.resolution)?T(T({},t),{byResolution:T(T({},t.byResolution),(i={},i[n.resolution]=T(T({},t.byResolution[n.resolution]),{status:"outdated"}),i))}):t;case"SET_PAGE_INFO":return o="missing"===(s=t.byResolution[n.resolution]).status?T(T({},s),{page:n.page}):T(T({},s),{page:n.page,status:"outdated"}),T(T({},t),{byResolution:T(T({},t.byResolution),(l={},l[n.resolution]=o,l))})}}var P={page:{clickVisibilityProps:{},dimensions:{width:0,bodyHeight:0,iframeHeight:0}},status:"missing"},I={raw:{results:{clicks:[],scrolls:[]},status:{mode:"missing"},progress:0},byResolution:{desktop:P,smartphone:P,tablet:P},loadAttempts:{clicks:{count:0,length:0},scrolls:{count:0,length:0}}};function C(e,t){var n,a=(null!==(n=e.byAlternative[t])&&void 0!==n?n:I).raw.status.mode;return"still-loading"===a||"canceling"===a||"ready"===a}function D(e,t,n){var a;return!!C(e,t)&&"processing"!==(null!==(a=e.byAlternative[t])&&void 0!==a?a:I).byResolution[n].status}function F(e,t){return t?t.more&&e.length===t.data.length?T(T({},e),{count:e.count+1}):{count:1,length:t.data.length}:T(T({},e),{count:1})}var W={firstDayOfWeek:0,iframeStatus:{0:"waiting-script"}},M=function(){return M=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},M.apply(this,arguments)},V={activeAlternative:0,activeFilter:"timeToClick",activeMode:"heatmap",activeResolution:"desktop",disabledFilterOptions:[],iframes:[],intensity:60,isInteractive:!1,isSidebarVisible:!0,opacity:70},B=function(){return B=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},B.apply(this,arguments)},L=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},j=(0,v.combineReducers)({data:function(e,t){var n;return void 0===e&&(e=x),null!==(n=function(e,t){var n,a,r,i;switch(t.type){case"RECEIVE_RAW_RESULTS":case"SET_PROCESSED_RESULTS":var l=null!==(r=e.byAlternative[t.alternative])&&void 0!==r?r:I;return e=function(e){var t=Object.values(e.byAlternative).flatMap((function(e){return e.raw.results.clicks})),n=(0,_.mapValues)(R(t),(function(e){return(0,_.mapValues)(e,(function(e){return T(T({},e),{value:0})}))}));return(0,_.isEqual)(e.confettiFilterOptions,n)||(e={confettiFilterOptions:n,byAlternative:(0,_.mapValues)(e.byAlternative,(function(e){return T(T({},e),{byResolution:(0,_.mapValues)(e.byResolution,(function(e){return e.confettiFilterOptions?T(T({},e),{confettiFilterOptions:(t=n,a=e.confettiFilterOptions,(0,_.mapValues)(t,(function(e,t){return(0,_.mapValues)(e,(function(e,n){var r,i,l;return T(T({},e),{value:null!==(l=null===(i=null===(r=a[t])||void 0===r?void 0:r[n])||void 0===i?void 0:i.value)&&void 0!==l?l:0})}))})))}):e;var t,a}))})}))}),e}(e=T(T({},e),{byAlternative:T(T({},e.byAlternative),(n={},n[t.alternative]=N(e,l,t),n))})),e;case"UPDATE_LOAD_ATTEMPTS":case"SET_RAW_RESULT_STATUS":case"SET_RAW_RESULT_PROGRESS":case"MARK_RESULTS_AS_PROCESSING":case"REQUEST_RESULTS_PROCESSING":case"SET_PAGE_INFO":return l=null!==(i=e.byAlternative[t.alternative])&&void 0!==i?i:I,T(T({},e),{byAlternative:T(T({},e.byAlternative),(a={},a[t.alternative]=N(e,l,t),a))})}}(e,t))&&void 0!==n?n:e},misc:function(e,t){var n;return void 0===e&&(e=W),null!==(n=function(e,t){var n;switch(t.type){case"SET_FIRST_DAY_OF_WEEK":return M(M({},e),{firstDayOfWeek:t.day});case"SET_IFRAME_STATUS":return M(M({},e),{iframeStatus:M(M({},e.iframeStatus),(n={},n[t.alternative]=t.status,n))})}}(e,t))&&void 0!==n?n:e},ui:function(e,t){var n;return void 0===e&&(e=V),null!==(n=function(e,t){switch(t.type){case"SET_ACTIVE_ALTERNATIVE":return B(B({},e),{activeAlternative:t.alternative,iframes:(0,_.uniq)(L(L([],e.iframes,!0),[t.alternative],!1))});case"SET_ACTIVE_FILTER":return B(B({},e),{activeFilter:t.filter});case"SET_ACTIVE_MODE":return B(B({},e),{activeMode:t.mode});case"SET_ACTIVE_RESOLUTION":return B(B({},e),{activeResolution:t.resolution});case"SET_DISABLED_FILTER_OPTIONS":return B(B({},e),{disabledFilterOptions:t.disabledFilterOptions});case"SET_INTERACTIVE":return B(B({},e),{isInteractive:t.isInteractive});case"SET_INTENSITY":return B(B({},e),{intensity:t.intensity});case"MAKE_SIDEBAR_VISIBLE":return B(B({},e),{isSidebarVisible:t.isSidebarVisible});case"SET_OPACITY":return B(B({},e),{opacity:t.opacity})}}(e,t))&&void 0!==n?n:e}}),U={mode:"missing"};function q(e,t){var n,a;return null!==(a=null===(n=e.data.byAlternative[t])||void 0===n?void 0:n.raw.status)&&void 0!==a?a:U}function H(e,t){var n,a;return null!==(a=null===(n=e.data.byAlternative[t])||void 0===n?void 0:n.raw.progress)&&void 0!==a?a:0}function z(e,t){var n,a;return null!==(a=null===(n=e.data.byAlternative[t])||void 0===n?void 0:n.raw.results.clicks)&&void 0!==a?a:[]}function G(e,t){var n,a;return null!==(a=null===(n=e.data.byAlternative[t])||void 0===n?void 0:n.raw.results.scrolls)&&void 0!==a?a:[]}function Y(e,t){var n,a;return null!==(a=null===(n=e.data.byAlternative[t])||void 0===n?void 0:n.loadAttempts)&&void 0!==a?a:{clicks:{count:0,length:0},scrolls:{count:0,length:0}}}function Q(e,t){var n,a=null===(n=e.data.byAlternative[t])||void 0===n?void 0:n.raw.status.mode;return"still-loading"===a||"ready"===a||"canceling"===a}function K(e,t,n){var a;return!!(null===(a=e.data.byAlternative[t])||void 0===a?void 0:a.byResolution[n].results)}function $(e,t,n){var a,r;return null!==(r=null===(a=e.data.byAlternative[t])||void 0===a?void 0:a.byResolution[n].status)&&void 0!==r?r:"missing"}function X(e,t,n){var a,r,i;return null!==(i=null===(r=null===(a=e.data.byAlternative[t])||void 0===a?void 0:a.byResolution[n].results)||void 0===r?void 0:r.clicks)&&void 0!==i?i:[]}var J={rows:1,max:1,value:[1],columns:1};function Z(e,t,n){var a,r,i;return null!==(i=null===(r=null===(a=e.data.byAlternative[t])||void 0===a?void 0:a.byResolution[n].results)||void 0===r?void 0:r.clicksPerSquare)&&void 0!==i?i:J}function ee(e,t,n){var a,r,i;return null!==(i=null===(r=null===(a=e.data.byAlternative[t])||void 0===a?void 0:a.byResolution[n].results)||void 0===r?void 0:r.scrolls)&&void 0!==i?i:[]}var te={rows:[],maxHits:0,averageFold:0};function ne(e,t,n){var a,r,i;return null!==(i=null===(r=null===(a=e.data.byAlternative[t])||void 0===a?void 0:a.byResolution[n].results)||void 0===r?void 0:r.scrollSummary)&&void 0!==i?i:te}function ae(e,t,n){var a,r;return null!==(r=null===(a=e.data.byAlternative[t])||void 0===a?void 0:a.byResolution[n].confettiFilterOptions)&&void 0!==r?r:e.data.confettiFilterOptions}function re(e,t,n){var a;return null===(a=e.data.byAlternative[t])||void 0===a?void 0:a.byResolution[n].page.clickVisibilityProps}function ie(e,t,n){var a;return null===(a=e.data.byAlternative[t])||void 0===a?void 0:a.byResolution[n].page.dimensions}function le(e){return e.misc.firstDayOfWeek}function se(e,t){var n;return null!==(n=e.misc.iframeStatus[t])&&void 0!==n?n:"waiting-script"}function oe(e){return{averageFold:(0,d._x)("Average Fold:","text","nelio-ab-testing"),clicksAbove:(0,d._x)("Clicks above:","text","nelio-ab-testing"),popularity:(0,d._x)("Popularity:","text","nelio-ab-testing"),unknown:(0,d._x)("unknown","text","nelio-ab-testing")}}function ce(e){return e.ui.activeAlternative}function ue(e){return e.ui.activeFilter}function de(e){return e.ui.activeMode}function me(e){return e.ui.activeResolution}function be(e){return e.ui.disabledFilterOptions}function pe(e){return e.ui.iframes}function fe(e){return e.ui.intensity}function ve(e){return e.ui.isInteractive}function ge(e){return e.ui.isSidebarVisible}function he(e){return e.ui.opacity}function ye(e,t){return{type:"RECEIVE_RAW_RESULTS",alternative:e,data:t}}function _e(e,t){return{type:"SET_RAW_RESULT_STATUS",alternative:e,status:t}}function xe(e,t){return{type:"SET_RAW_RESULT_PROGRESS",alternative:e,progress:t}}function Ee(e,t,n){return{type:"UPDATE_LOAD_ATTEMPTS",alternative:e,clicks:t,scrolls:n}}function we(e,t,n){return{type:"SET_PROCESSED_RESULTS",alternative:e,resolution:t,results:n}}function Se(e,t,n){return{type:"SET_PAGE_INFO",alternative:e,resolution:t,page:n}}function ke(e,t){return{type:"MARK_RESULTS_AS_PROCESSING",alternative:e,resolution:t}}function Re(e,t){return{type:"REQUEST_RESULTS_PROCESSING",alternative:e,resolution:t}}function Ae(e){return{type:"SET_FIRST_DAY_OF_WEEK",day:e}}function Oe(e,t){return{type:"SET_IFRAME_STATUS",alternative:e,status:t}}function Te(e){return{type:"SET_ACTIVE_ALTERNATIVE",alternative:e}}function Ne(e){return{type:"SET_ACTIVE_FILTER",filter:e}}function Pe(e){return{type:"SET_ACTIVE_MODE",mode:e}}function Ie(e){return{type:"SET_ACTIVE_RESOLUTION",resolution:e}}function Ce(e){return{type:"SET_DISABLED_FILTER_OPTIONS",disabledFilterOptions:e}}function De(e){return{type:"SET_INTERACTIVE",isInteractive:e}}function Fe(e){return{type:"SET_INTENSITY",intensity:e}}function We(e){return{type:"MAKE_SIDEBAR_VISIBLE",isSidebarVisible:e}}function Me(e){return{type:"SET_OPACITY",opacity:e}}const Ve=window.wp.apiFetch;var Be=n.n(Ve);const Le=window.wp.date,je=window.wp.url;var Ue=function(){return Ue=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ue.apply(this,arguments)};const qe=function(e){var t=e.url,n=e.path,a=(0,Le.format)("YmjHi").substring(0,11)+"0";return Be()(Ue(Ue(Ue({},e),t&&{url:He(e)?(0,je.addQueryArgs)(t,{nabts:a}):t}),n&&{path:(0,je.addQueryArgs)(n,{nabts:a})}))};var He=function(e){var t,n;return!!(null===(t=e.url)||void 0===t?void 0:t.includes("/wp-json/"))||!!(null===(n=e.url)||void 0===n?void 0:n.includes("rest_route"))||!!Object.keys(e).includes("rest_route")},ze=100,Ge=50,Ye=function(){return Ye=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ye.apply(this,arguments)},Qe=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function l(e){try{o(a.next(e))}catch(e){i(e)}}function s(e){try{o(a.throw(e))}catch(e){i(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,s)}o((a=a.apply(e,t||[])).next())}))},Ke=function(e,t){var n,a,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=s(0),l.throw=s(1),l.return=s(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function s(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,s[0]&&(i=0)),i;)try{if(n=1,a&&(r=2&s[0]?a.return:s[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,a=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],a=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},$e=10,Xe=5,Je=5e3,Ze={desktop:{width:1600,height:900},tablet:{width:1024,height:576},smartphone:{width:460,height:818}};function et(e,t){return Qe(this,void 0,Promise,(function(){var n,a,r,i;return Ke(this,(function(l){switch(l.label){case 0:return"missing"!==(0,v.select)(ft).getRawResultStatus(t).mode?[2]:[4,(n=(0,v.dispatch)(ft).setRawResultStatus)(t,{mode:"loading"})];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,4,,14]),[4,it("clicks-and-scrolls",e,t)];case 3:return l.sent(),[3,14];case 4:switch(a=l.sent(),r=function(e){if(e&&"object"==typeof e){if("code"in e&&"string"==typeof e.code&&e.code)return e.code;if("message"in e&&"string"==typeof e.message&&e.message)return e.message}return"string"==typeof e?e:"unknown"}(a),i=(0,v.select)(ft).getRawClicks(t),r){case"fetch_error":case"fetch-error":return[3,5];case"stuck-attempt-count":return[3,7];case"heatmap-data-not-available":return[3,9]}return[3,11];case 5:return[4,n(t,{mode:"error",rationale:"unreachable-servers"})];case 6:return l.sent(),[2];case 7:return[4,n(t,i.length?{mode:"ready",partialError:"stuck-results"}:{mode:"error",rationale:"stuck-empty-results"})];case 8:return l.sent(),[2];case 9:return[4,n(t,{mode:"error",rationale:"heatmap-data-not-available"})];case 10:return l.sent(),[2];case 11:return[4,n(t,i.length?{mode:"ready",partialError:"unknown"}:{mode:"error",rationale:"unknown"})];case 12:l.sent(),l.label=13;case 13:return[3,14];case 14:return[2]}}))}))}function tt(e,t){return Qe(this,void 0,Promise,(function(){var n,a,r,i,l,s,o,c,d;return Ke(this,(function(m){switch(m.label){case 0:return(0,v.select)(ft).canRawDataBeProcessed(e)&&(n=(0,v.select)(ft).getClickVisibilityProps(e,t))?"processing"===(0,v.select)(ft).getProcessedResultStatus(e,t)?[2]:[4,(0,v.dispatch)(ft).markResultsAsProcessing(e,t)]:[2];case 1:return m.sent(),a=(new Date).getTime(),r=!(0,v.select)(ft).hasProcessedResults(e,t),i=(0,v.select)(ft).getRawClicks(e).filter(nt(t)).map(rt(n)).filter(u.isDefined),l=(0,v.select)(ft).getRawScrolls(e).filter(at(t)),s=function(e,t,n){var a=(0,v.select)(ft).getPageDimensions(e,t);if(!a)return{columns:1,value:[n.length],max:n.length,rows:1};var r=a.width,i=a.bodyHeight,l=Math.ceil(r/ze),s=Math.ceil(i/ze),o=new Array(s*l).fill(0).map((function(){return 0}));return n.forEach((function(e){var t=e.realCoordinates,n=t.x,a=t.y,r=Math.floor(n/ze),i=Math.floor(a/ze)*l+r;i<0&&o.length<=i||(o[i]=(o[i]||0)+e.intensity)})),{columns:l,value:o,max:Math.max(1,o.reduce((function(e,t){return Math.max(e,t||0)}))),rows:s}}(e,t,i),o=function(e,t,n){var a=(0,v.select)(ft).getPageDimensions(e,t);if(!a)return{rows:[0],maxHits:0,averageFold:250};var r=a.bodyHeight,i=a.iframeHeight,l=Math.ceil(i/Ge),s=new Array(l).fill(0),o=0;return n.forEach((function(e){var t,n,a=e.firstFold,i=e.maxScroll,c=e.sweetSpot,u=e.documentHeight;o+=a,i=Math.round(i/u*r),c=Math.round(c/u*r);for(var d=Math.ceil(i/Ge),m=Math.min(d,l-1),b=0;b<=m;++b)s[b]=1+(null!==(t=s[b])&&void 0!==t?t:0);var p=Math.floor((c-a/2)/Ge),f=Math.ceil((c+a/2)/Ge),v=Math.min(f,l-1);for(b=Math.max(0,p);b<=v;++b)s[b]=1+(null!==(n=s[b])&&void 0!==n?n:0)})),{rows:s,maxHits:s.reduce((function(e,t){return e>t?e:t}),0),averageFold:!!n.length&&Math.ceil(o/n.length)}}(e,t,l),r?(c=(new Date).getTime()-a,d=Math.max(0,1e3-c),[4,new Promise((function(e){return setTimeout(e,d)}))]):[3,3];case 2:m.sent(),m.label=3;case 3:return[4,(0,v.dispatch)(ft).setProcessedResults(e,t,{clicks:i,scrolls:l,scrollSummary:o,clicksPerSquare:s})];case 4:return m.sent(),[2]}}))}))}var nt=function(e){var t=mt(e),n=t.min,a=t.max;return function(e){var t=e.windowWidthInPx;return n<=t&&t<=a}},at=function(e){var t=mt(e),n=t.min,a=t.max;return function(e){var t=e.windowWidth;return n<=t&&t<=a}},rt=function(e){return function(t){var n=e[t.id];if(n&&"missing"!==n.status)return Ye(Ye({},t),{realCoordinates:Ye(Ye({},t.realCoordinates),n.coords),visibility:"visible"===n.status?"visible":"hidden"})}};function it(e,t,n){return Qe(this,void 0,Promise,(function(){var a,r,i,l,s,o,c,u,m,b,p,f,g,h;return Ke(this,(function(y){switch(y.label){case 0:return"none"===e?[2]:0!==t.id?[3,2]:[4,(0,v.dispatch)(ft).setRawResultStatus(n,{mode:"ready"})];case 1:return y.sent(),[2];case 2:return a=e.includes("clicks"),r=e.includes("scrolls"),[4,Promise.all([a&&lt("clicks",t,n),r&&lt("scrolls",t,n)])];case 3:return i=y.sent(),l=i[0],s=i[1],[4,(0,v.dispatch)(ft).updateLoadAttempts(n,l||void 0,s||void 0)];case 4:if(y.sent(),o=(0,v.select)(ft).getRawClicks(n),c=(0,v.select)(ft).getRawScrolls(n),u={clicks:l&&l.data.length!==o.length?(_=l.data,x=(0,d._x)("Unknown","text","nelio-ab-testing"),_.map((function(e){return Ye(Ye({},e),{browser:e.browser||x,country:e.country||x,dayOfWeek:(n=e.dayOfWeek,"".concat(n)),device:e.device||x,hourOfDay:(t=e.hourOfDay,"string"==typeof t&&(t=Number.parseInt(t),isNaN(t)&&(t=0)),"".concat(Math.floor(t/2))),intensity:e.intensity||1,os:e.os||x,timeToClick:ot(e.timeToClick),windowWidth:ct(e.windowWidth),windowWidthInPx:"number"==typeof e.windowWidth?e.windowWidth:Number.parseInt(e.windowWidth)||0,realCoordinates:{x:-1,y:-1}});var t,n}))):o,scrolls:s&&s.data.length!==c.length?s.data:c},(m=(0,v.select)(ft).getLoadAttempts(n)).clicks.count>=Xe||m.scrolls.count>=Xe)throw new Error("stuck-attempt-count");return b=!!u.clicks.length,p=!l||!l.more,f=!s||!s.more,g=p&&f,h=p&&!b?"error":g?"ready":b?"still-loading":"loading",[4,(0,v.dispatch)(ft).receiveRawResults(n,{results:u,status:"error"===h?{mode:"error",rationale:"no-heatmap-data"}:{mode:h},progress:g?100:st(t,n,u.clicks)})];case 5:return y.sent(),[2,new Promise((function(e,a){setTimeout((function(){it(p&&!b?"none":p||f?p?f?"none":"scrolls":"clicks":"clicks-and-scrolls",t,n).then(e).catch(a)}),Je)}))]}var _,x}))}))}function lt(e,t,n){return Qe(this,void 0,Promise,(function(){var a,r,i,l,s;return Ke(this,(function(o){switch(o.label){case 0:return a=(0,d.sprintf)("/nab/v1/experiment/%1$s/heatmap/%2$s/%3$d",t.id,e,n),[4,qe({path:a})];case 1:return(r=o.sent()).url?[4,fetch(r.url)]:[2,{more:r.more,data:[]}];case 2:return[4,o.sent().text()];case 3:return i=o.sent(),l=i.replaceAll("}{","}\n{").split("\n"),s=Array.from(new Set(l)).filter((function(e){return!!e})).map(ut).filter((function(e){return!!e})),[2,{more:r.more,data:s}]}}))}))}function st(e,t,n){var a=(new Date).toISOString(),r=dt(e.startDate,"finished"===e.status&&e.endDate||a);if(r<$e)return 100;var i=(0,_.first)(n),l=(0,_.last)(n);if(!(null==i?void 0:i.timestamp)||!(null==l?void 0:l.timestamp))return 0;var s=100*dt(i.timestamp,l.timestamp)/r,o=Math.max(1,Math.floor(s)),c=(0,v.select)(ft).getRawResultProgress(t);return Math.max(o,c)}function ot(e){"string"==typeof e&&(e=Number.parseInt(e));for(var t=[2,3,4,5,10,15,20,25,30,60,120,180,300],n=0;n<t.length;++n){var a=t[n];if(a&&e<=a)return"".concat(n)}return"".concat(t.length)}function ct(e){"string"==typeof e&&(e=Number.parseInt(e));for(var t=[300,600,900,1200,1500,1800,2100],n=0;n<t.length;++n){var a=t[n];if(a&&e<a)return"".concat(n)}return"".concat(t.length)}function ut(e){try{return JSON.parse(e)}catch(e){return!1}}var dt=function(e,t){return Math.ceil(Math.abs(new Date(e).getTime()-new Date(t).getTime())/36e5)};function mt(e){var t=Ze[e].width,n=Object.values(Ze).map((function(e){return e.width})),a=n.reduce((function(e,n){return n<t?Math.max(n,e):e}),-1),r=n.reduce((function(e,n){return t<n?Math.min(n,e):e}),Number.POSITIVE_INFINITY);return Number.POSITIVE_INFINITY!==r&&(r=t),{min:a+1,max:r}}var bt=function(){return bt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},bt.apply(this,arguments)},pt=bt(bt({},r),i),ft=(0,v.createReduxStore)("nab/heatmap",{reducer:j,controls:v.controls,actions:pt,selectors:a});!function(e){(0,v.register)(e)}(ft);var vt=function(){return g((function(e){var t=e(h.store),n=t.getPageAttribute,a=t.getExperiment,r=n("editor/activeExperiment");return a(null!=r?r:0)}))},gt=function(){return[g((function(e){return e(ft).getActiveAlternative()})),(0,v.useDispatch)(ft).setActiveAlternative]},ht=function(){var e=gt()[0],t=(0,v.useDispatch)(ft).setRawResultStatus;return[g((function(t){return t(ft).getRawResultStatus(e)})),function(n){return t(e,n)}]},yt=function(){var e=gt()[0],t=kt()[0];return g((function(n){return n(ft).getProcessedResultStatus(e,t)}))},_t=function(){return"processing"===yt()},xt=function(){var e=Et(),t=(e[0],e[1]),n=g((function(e){return e(ft).getActiveFilter()})),a=(0,v.useDispatch)(ft).setActiveFilter;return[n,function(e){e!==n&&(t([]),a(e))}]},Et=function(){return[g((function(e){return e(ft).getDisabledFilterOptions()})),(0,v.useDispatch)(ft).setDisabledFilterOptions]},wt=function(){return[g((function(e){return e(ft).getActiveMode()})),(0,v.useDispatch)(ft).setActiveMode]},St=function(){return[g((function(e){return e(ft).isSidebarVisible()})),(0,v.useDispatch)(ft).makeSidebarVisible]},kt=function(){return[g((function(e){return e(ft).getActiveResolution()})),(0,v.useDispatch)(ft).setActiveResolution]},Rt=function(){return[g((function(e){return e(ft).getIntensity()})),(0,v.useDispatch)(ft).setIntensity]},At=function(){return[g((function(e){return e(ft).isInteractive()})),(0,v.useDispatch)(ft).setInteractive]},Ot=function(){return[g((function(e){return e(ft).getOpacity()})),(0,v.useDispatch)(ft).setOpacity]},Tt=function(){var e=(0,h.usePageAttribute)("isLocked",!1)[0],t=(0,h.usePageAttribute)("editor/isExperimentBeingStopped",!1)[0],n=ht()[0].mode,a=yt();return e||t||"missing"===n||"loading"===n||"missing"===a||"processing"===a},Nt=function(e){var t=e.experimentId,n=g((function(e){return e(h.store).getExperiment(t)})),a=g((function(e){return e(ft).getActiveAlternative()}));if(Pt(e),It(t,a),Ct(),!n)return null;var r=e.children;return l.createElement("div",null,l.createElement(y,null),r)},Pt=function(e){var t=(0,v.useDispatch)(h.store).setPageAttribute,n=(0,v.useDispatch)(ft),a=n.setActiveAlternative,r=n.setFirstDayOfWeek;g((function(t){return t(h.store).getExperimentResults(e.experimentId)})),(0,l.useEffect)((function(){var n=e.experimentId,i=e.experimentType,l=e.alternativeIndex,s=e.firstDayOfWeek,o=e.isPublicView,c=e.isReadOnlyActive;t("editor/activeExperiment",n),t("editor/activeExperimentType",i),t("results/isPublicView",o),t("results/isReadOnlyActive",c),a(l),r(s%7)}),[])},It=function(e,t){var n=g((function(t){return t(h.store).getExperiment(e)})),a=g((function(t){return!t(h.store).hasFinishedResolution("getExperiment",[e])&&!t(h.store).hasResolutionFailed("getExperiment",[e])})),r=(0,v.useDispatch)(ft),i=r.loadResults,s=r.setRawResultStatus;(0,l.useEffect)((function(){a||(n?i(n,t):s(t,{mode:"error",rationale:"experiment-not-found"}))}),[n,t,a])},Ct=function(){var e=(0,v.useDispatch)(ft).requestResultProcessing,t=vt(),n=gt()[0],a=g((function(e){return e(ft).getActiveResolution()})),r=g((function(e){var t;return{mode:e(ft).getActiveMode(),clicks:e(ft).getRawClicks(n),scrolls:e(ft).getRawScrolls(n),processedStatus:e(ft).getProcessedResultStatus(n,a),rawStatus:null===(t=e(ft).getRawResultStatus(n))||void 0===t?void 0:t.mode}})),i=r.clicks,s=r.scrolls,o=r.processedStatus,c=r.rawStatus;(0,l.useEffect)((function(){t&&"missing"!==c&&"loading"!==c&&"error"!==c&&"ready"!==o&&"processing"!==o&&e(n,a)}),[t,n,a,i,s,o,c])},Dt=n(6942),Ft=n.n(Dt);const Wt=window.wp.components;var Mt=function(){var e=Vt(),t=e[0],n=e[1],a=Bt(),r=Tt();if(!t||!a.length)return null;var i=a.map((function(e,t){return{value:e,label:(0,d.sprintf)(/* translators: variant letter */ /* translators: variant letter */
(0,d._x)("Variant %s","text","nelio-ab-testing"),(0,u.getLetter)(t))}}));return l.createElement("div",{className:"nab-heatmap-results-header__variant"},l.createElement(Wt.SelectControl,{disabled:r,value:t,options:i,onChange:n}))},Vt=function(){var e=g((function(e){return e(ft).getActiveAlternative()})),t=Bt(),n=t[e],a=(0,v.useDispatch)(ft).setActiveAlternative;return[n,function(e){var n=(0,_.indexOf)(t,e);a(n);var r=(0,je.addQueryArgs)(document.location.href,{heatmap:n});window.history.replaceState({},"",r)}]},Bt=function(){var e=vt();return"nab/heatmap"===(null==e?void 0:e.type)?[]:(0,_.map)(null==e?void 0:e.alternatives,"id")},Lt=function(){var e,t,n,a=qt(),r=Ht(),i=ht()[0].mode,s=function(){var e=gt()[0],t=(0,v.useDispatch)(ft).setRawResultProgress;return[g((function(t){return t(ft).getRawResultProgress(e)})),function(n){return t(e,n)}]}()[0],o=(e=gt()[0],t=ht()[0],n=(0,v.useDispatch)(ft).setRawResultStatus,["canceling"===t.mode,function(){switch(t.mode){case"canceling":case"ready":case"error":case"missing":return;case"loading":case"still-loading":return void n(e,{mode:"canceling"})}}]),c=o[0],u=o[1],m=(0,v.useDispatch)(h.store).stopExperiment;return"loading"===i||"error"===i||"missing"===i?l.createElement("div",{className:"nab-heatmap-results-sidebar__header-actions"},l.createElement(jt,null)):"still-loading"===i||"canceling"===i?l.createElement("div",{className:"nab-heatmap-results-sidebar__header-actions"},l.createElement(jt,null),l.createElement("div",{className:"nab-heatmap-results-sidebar__running-actions"},s?l.createElement("span",{className:"nab-heatmap-results-sidebar__progress"},(0,d.sprintf)(/* translators: percentage */ /* translators: percentage */
(0,d._x)("Fetching more data… (%1$d%%)","text","nelio-ab-testing"),Math.min(s,99))):l.createElement(Wt.Spinner,null),"canceling"!==i&&l.createElement(Wt.Button,{variant:"link",onClick:u},(0,d._x)("Cancel","command","nelio-ab-testing")))):l.createElement("div",{className:"nab-heatmap-results-sidebar__header-actions"},l.createElement(jt,null),a&&r&&l.createElement("div",{className:"nab-heatmap-results-sidebar__running-actions"},l.createElement(Wt.Button,{variant:"primary",onClick:function(){m()},disabled:c,isBusy:c},c?(0,d._x)("Stopping…","text","nelio-ab-testing"):(0,d._x)("Stop","command","nelio-ab-testing"))),!a&&l.createElement("div",{className:"nab-heatmap-results-sidebar__alt-switcher"},l.createElement(Mt,null)))},jt=function(){var e=(0,h.usePageAttribute)("results/isPublicView",!1)[0],t=Ut();return e?null:l.createElement("div",{className:"nab-heatmap-results-sidebar__back"},l.createElement("a",{className:"nab-heatmap-results-sidebar__back-link",href:t,title:(0,d._x)("Back…","command","nelio-ab-testing")},l.createElement(Wt.Dashicon,{icon:"arrow-left-alt2"})))},Ut=function(){var e=(0,h.useAdminUrl)("edit.php",{post_type:"nab_experiment"}),t=vt();if(t)return"nab/heatmap"===t.type?e:t.links.edit},qt=function(){var e;return"nab/heatmap"===(null===(e=vt())||void 0===e?void 0:e.type)},Ht=function(){var e;return"running"===(null===(e=vt())||void 0===e?void 0:e.status)},zt=function(){var e=St(),t=e[0],n=e[1],a=Tt(),r=kt(),i=r[0],s=r[1];return l.createElement("div",{className:"nab-heatmap-results-sidebar__footer-actions"},l.createElement("div",{className:Ft()({"nab-heatmap-results-sidebar__visibility-toggle":!0,"nab-heatmap-results-sidebar__visibility-toggle--hide":!!t,"nab-heatmap-results-sidebar__visibility-toggle--show":!t})},l.createElement(Wt.Button,{variant:"link",onClick:function(){return n(!t)}},t?l.createElement(l.Fragment,null,l.createElement(Wt.Dashicon,{icon:"admin-collapse"}),l.createElement("span",{className:"nab-heatmap-results-sidebar__visibility-toggle-label"},(0,d._x)("Hide Controls","command","nelio-ab-testing"))):l.createElement(Wt.Dashicon,{icon:"admin-collapse"}))),l.createElement("div",{className:"nab-heatmap-results-sidebar__resolutions"},l.createElement("div",{className:Ft()({"nab-heatmap-results-sidebar__resolution":!0,"nab-heatmap-results-sidebar__resolution--is-active":"desktop"===i})},l.createElement(Wt.Button,{variant:"link",onClick:function(){return s("desktop")},disabled:a},l.createElement(Wt.Dashicon,{icon:"desktop"}),l.createElement("span",{className:"screen-reader-text"},(0,d._x)("Enter desktop preview mode","command","nelio-ab-testing")))),l.createElement("div",{className:Ft()({"nab-heatmap-results-sidebar__resolution":!0,"nab-heatmap-results-sidebar__resolution--is-active":"tablet"===i})},l.createElement(Wt.Button,{variant:"link",onClick:function(){return s("tablet")},disabled:a},l.createElement(Wt.Dashicon,{icon:"tablet"}),l.createElement("span",{className:"screen-reader-text"},(0,d._x)("Enter tablet preview mode","command","nelio-ab-testing")))),l.createElement("div",{className:Ft()({"nab-heatmap-results-sidebar__resolution":!0,"nab-heatmap-results-sidebar__resolution--is-active":"smartphone"===i})},l.createElement(Wt.Button,{variant:"link",onClick:function(){return s("smartphone")},disabled:a},l.createElement(Wt.Dashicon,{icon:"smartphone"}),l.createElement("span",{className:"screen-reader-text"},(0,d._x)("Enter mobile preview mode","command","nelio-ab-testing"))))))};const Gt=window.nab.i18n;var Yt=function(e){var t=e.clicks,n=e.views;return l.createElement(l.Fragment,null,l.createElement(Wt.PanelRow,{className:"nab-experiment-summary__pageviews"},l.createElement("span",null,(0,d._x)("Page Views","text","nelio-ab-testing")),l.createElement("span",null,void 0!==n?(0,Gt.compactInteger)(n):"-")),l.createElement(Wt.PanelRow,{className:"nab-experiment-summary__clicks"},l.createElement("span",null,(0,d._x)("Total Click Count","text","nelio-ab-testing")),l.createElement("span",null,void 0!==t?(0,Gt.compactInteger)(t):"-")))},Qt=function(e){var t=e.status;return l.createElement(Wt.PanelRow,{className:"nab-experiment-summary__status"},l.createElement("span",null,(0,d._x)("Status","text","nelio-ab-testing")),l.createElement("strong",null,function(e){switch(e){case"paused":return(0,d._x)("Paused","text (experiment status)","nelio-ab-testing");case"finished":return(0,d._x)("Finished","text (experiment status)","nelio-ab-testing");default:return(0,d._x)("Running","text (experiment status)","nelio-ab-testing")}}(t)))};const Kt=window.nab.date;var $t=function(e){var t=e.start,n=e.end,a=e.endMode,r=e.endValue;return t&&a?(n=n||"",l.createElement(l.Fragment,null,l.createElement(Wt.PanelRow,{className:"nab-experiment-summary__start"},l.createElement("span",null,(0,d._x)("Duration","text","nelio-ab-testing")),l.createElement("span",null,function(e,t){for(var n=(0,u.computeDuration)(e,t),a=[n.months,n.days,n.hours,n.minutes],r=n.months,i=n.days,l=n.hours,s=n.minutes,o=[(0,d.sprintf)(/* translators: number of months */ /* translators: number of months */
(0,d._n)("%d month","%d months",r,"nelio-ab-testing"),r),/* translators: number of days */ /* translators: number of days */
(0,d.sprintf)((0,d._n)("%d day","%d days",i,"nelio-ab-testing"),i),(0,d.sprintf)(/* translators: number of hours */ /* translators: number of hours */
(0,d._n)("%d hour","%d hours",l,"nelio-ab-testing"),l),(0,d.sprintf)(/* translators: number of minutes */ /* translators: number of minutes */
(0,d._n)("%d minute","%d minutes",s,"nelio-ab-testing"),s)],c=0;c<a.length-1;++c){if(a[c]&&a[c+1])return Xt(o[c],o[c+1]);if(a[c])return o[c]}return a[a.length-1]?o[a.length-1]:(0,d._x)("Less than a minute","text","nelio-ab-testing")}(t,n))),l.createElement(Wt.PanelRow,{className:"nab-experiment-summary__start"},l.createElement("span",null,(0,d._x)("Start","text","nelio-ab-testing")),l.createElement("span",null,(0,Kt.formatI18nDate)(t))),n?l.createElement(Wt.PanelRow,{className:"nab-experiment-summary__end"},l.createElement("span",null,(0,d._x)("End","text","nelio-ab-testing")),l.createElement("span",null,(0,Kt.formatI18nDate)(n))):l.createElement(Wt.PanelRow,{className:"nab-experiment-summary__end-mode"},l.createElement("span",null,(0,d._x)("End","text","nelio-ab-testing")),l.createElement("span",null,function(e,t){switch(t=null!=t?t:0,e){case"duration":return(0,d.sprintf)(/* translators: number of days */ /* translators: number of days */
(0,d._n)("After %s day","After %s days",t,"nelio-ab-testing"),(0,Gt.numberFormat)(t));case"page-views":return(0,d.sprintf)(/* translators: a number */ /* translators: a number */
(0,d._n)("After %s page view","After %s page views",t,"nelio-ab-testing"),(0,Gt.numberFormat)(t));case"confidence":return(0,d.sprintf)(/* translators: a percentage number, such as “95” */ /* translators: a percentage number, such as “95” */
(0,d._x)("At %1$s%% confidence","text","nelio-ab-testing"),(0,Gt.numberFormat)(t));default:return(0,d._x)("Manual","text","nelio-ab-testing")}}(a,r))))):null};function Xt(e,t){if(!e&&!t)return"";if(!e||!t)return e||t;var n=(0,d._x)("and","text","nelio-ab-testing");return"".concat(e," ").concat(n," ").concat(t)}var Jt=function(){return Jt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Jt.apply(this,arguments)},Zt=function(){var e=(0,h.useExperimentAttribute)("status","running"),t=tn(),n=en(),a={start:(0,h.useExperimentAttribute)("startDate",""),end:(0,h.useExperimentAttribute)("endDate",!1),endMode:(0,h.useExperimentAttribute)("endMode","manual"),endValue:(0,h.useExperimentAttribute)("endValue",0)};return l.createElement(Wt.PanelBody,{className:"nab-experiment-summary",title:(0,d._x)("Summary","text (experiment)","nelio-ab-testing")},l.createElement(Qt,{status:e}),l.createElement(Yt,{views:t,clicks:n}),l.createElement($t,Jt({},a)))},en=function(){return g((function(e){var t=e(ft).getActiveAlternative(),n=e(ft).getActiveResolution();return e(ft).getClicksInResolution(t,n).length}))},tn=function(){var e=vt(),t=gt()[0];return g((function(n){var a=null==e?void 0:e.alternatives[t];return e&&a?n(h.store).getAlternativePageViews(e.id,a.id):0}))},nn=function(){var e,t=(e=g((function(e){return e(h.store).getPageAttribute("editor/activeExperiment")})),g((function(t){return e?t(h.store).getExperimentAttribute(e,"description"):void 0})));return l.createElement(Wt.PanelBody,{className:"nab-experiment-description",title:(0,d._x)("Description","text","nelio-ab-testing")},t||(0,d._x)("None","text (description)","nelio-ab-testing"))},an=function(){var e=Tt(),t=Ot(),n=t[0],a=t[1];return l.createElement(Wt.RangeControl,{disabled:e,className:"nab-heatmap-opacity",label:(0,d._x)("Opacity","text","nelio-ab-testing"),value:n,onChange:function(e){return a(null!=e?e:25)},min:25,max:75})},rn=function(){var e=Tt(),t=Rt(),n=t[0],a=t[1];return l.createElement(Wt.RangeControl,{disabled:e,className:"nab-heatmap-intensity",label:(0,d._x)("Heat Intensity","text","nelio-ab-testing"),value:n,onChange:function(e){return a(e||40)},min:40,max:100})},ln=function(){return l.createElement(Wt.BaseControl,{id:"nab-scrollmap-legend",className:"nab-scrollmap-legend",label:(0,d._x)("Scrollmap Legend","text","nelio-ab-testing")},l.createElement("div",{className:"nab-scrollmap-legend__container"},l.createElement("div",{className:"nab-scrollmap-legend__scale"},l.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--0"}),l.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--25"}),l.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--50"}),l.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--75"}),l.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--100"})),l.createElement("div",{className:"nab-scrollmap-legend__text"},l.createElement("span",null,(0,d._x)("Less popular","text","nelio-ab-testing")),l.createElement("span",null,(0,d._x)("More popular","text","nelio-ab-testing")))))};const sn=window.wp.compose;var on=function(e){var t=e.label,n=e.className,a=e.heading,r=e.checked,i=e.onChange,s=e.color,o=e.disabled,c=(0,sn.useInstanceId)(on),u="inspector-checkbox-control-".concat(c),d=s?{borderColor:s,backgroundColor:s,opacity:r?1:.5}:{};return l.createElement(Wt.BaseControl,{label:a,id:u,className:n},l.createElement("span",{className:"components-checkbox-control__input-container"},l.createElement("input",{id:u,style:d,className:"components-checkbox-control__input",type:"checkbox",value:"1",onChange:function(e){return i(!!e.target.checked)},checked:r,disabled:o}),r?l.createElement(Wt.Dashicon,{icon:"yes",className:"components-checkbox-control__checked",role:"presentation"}):null),l.createElement("label",{className:"components-checkbox-control__label",htmlFor:u},t))},cn=function(){return cn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},cn.apply(this,arguments)},un=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},dn=function(){var e=Tt(),t=mn(),n=bn(),a=pn();if(!t)return null;var r=(0,_.sum)((0,_.map)(t,"value"));return l.createElement(l.Fragment,null,l.createElement(Wt.CheckboxControl,{className:"nab-filter-option nab-filter-option--header",label:l.createElement("span",{className:"nab-filter-option-label__container"},l.createElement("span",{className:"nab-filter-option-label__name"},(0,d._x)("Name","text","nelio-ab-testing")),l.createElement("span",{className:"nab-filter-option-label__amount"},(0,d._x)("Amount","text","nelio-ab-testing"))),checked:!n.length,onChange:function(e){return a("all",e)},disabled:e}),t.map((function(t){var i=t.key,s=t.label,o=t.value,c=t.color;return l.createElement(on,{key:i,color:c,disabled:e,className:Ft()("nab-filter-option",{"nab-filter-option--deactivated":n.includes(i)}),label:l.createElement("span",{className:"nab-filter-option-label__container"},l.createElement("span",{className:"nab-filter-option-label__name",title:s},s),l.createElement("span",{className:"nab-filter-option-label__amount-container"},l.createElement("span",{className:"nab-filter-option-label__value"},"number"==typeof o?(0,Gt.compactInteger)(o):o),l.createElement("span",{className:"nab-bar__container"},l.createElement("span",{className:"nab-bar__value",style:{width:o?"".concat((o/r*100).toFixed(2),"%"):"0px"}})))),checked:!n.includes(i),onChange:function(e){return a(i,e)}})})))},mn=function(){return g((function(e){var t=e(ft).getActiveFilter(),n=e(ft).getActiveAlternative(),a=e(ft).getActiveResolution(),r=e(ft).getConfettiFilterOptions(n,a),i=(0,_.values)(r[t]);if("dayOfWeek"===t){var l=e(ft).getFirstDayOfWeek();i=un(un([],un([],i,!0).splice(l),!0),un([],i,!0).splice(0,l),!0)}return"country"===t&&(i=i.map((function(e){return cn(cn({},e),{label:"other"===e.key?(0,d._x)("Other","text","nelio-ab-testing"):(0,u.getCountryName)(e.key)})})),i=fn(i)),i}))},bn=function(){return g((function(e){return e(ft).getDisabledFilterOptions()}))},pn=function(){var e=(0,v.useDispatch)(ft).setDisabledFilterOptions,t=mn(),n=bn();return g((function(e){return e(ft).getActiveFilter()}))&&t.length?function(a,r){e("all"!==a?r?(0,_.without)(n,a):(0,_.uniq)(un(un([],n,!0),[a],!1)):r?[]:(0,_.map)(t,"key"))}:_.noop},fn=function(e){return(0,_.sortBy)(un([],e,!0),["label"])},vn=function(e){return"confetti"===e.kind?l.createElement(gn,null):null},gn=function(){var e=Tt(),t=xt(),n=t[0],a=t[1],r=hn();return l.createElement(l.Fragment,null,l.createElement(Wt.SelectControl,{disabled:e,label:(0,d._x)("Filter","text","nelio-ab-testing"),value:n,onChange:function(e){return a(e)},options:r}),l.createElement(dn,null))},hn=function(){return yn},yn=(0,_.sortBy)([{value:"country",label:(0,d._x)("Country","text","nelio-ab-testing")},{value:"device",label:(0,d._x)("Device Type","text","nelio-ab-testing")},{value:"os",label:(0,d._x)("Operating System","text","nelio-ab-testing")},{value:"browser",label:(0,d._x)("Browser","text","nelio-ab-testing")},{value:"dayOfWeek",label:(0,d._x)("Day of Week","text","nelio-ab-testing")},{value:"hourOfDay",label:(0,d._x)("Time of Day","text","nelio-ab-testing")},{value:"timeToClick",label:(0,d._x)("Time to Click","text","nelio-ab-testing")},{value:"windowWidth",label:(0,d._x)("Window Width","text","nelio-ab-testing")}],"label");const xn=window.nab.components;var En=function(){var e=wt(),t=e[0],n=e[1],a=At(),r=a[0],i=a[1],s=Tt(),o=Sn(),c=(0,h.usePageAttribute)("results/isPublicView",!1)[0],u=(0,h.usePageAttribute)("results/isReadOnlyActive",!1),m=u[0],b=u[1],p=(0,h.usePageAttribute)("editor/activeExperiment",0)[0],f=(0,h.usePageAttribute)("editor/activeExperimentType","")[0],g=(0,v.useDispatch)(h.store).setPublicResultStatus,y=(0,je.addQueryArgs)(o,{"nab-result":!0,experiment:p,preview:""});return l.createElement(wn,{className:Ft()("nab-heatmap-kind-selector",{"nab-heatmap-kind-selector--locked":s}),activeClass:"nab-heatmap-kind-selector__tab--active",orientation:"horizontal",tabs:kn,activeTab:t,onSelect:n},(function(e){return l.createElement(Wt.PanelBody,{className:"nab-heatmap-settings",title:(0,d._x)("Settings","text","nelio-ab-testing")},l.createElement(an,null),"heatmap"===e.name&&l.createElement(rn,null),("heatmap"===e.name||"confetti"===e.name)&&l.createElement(Wt.CheckboxControl,{checked:r,onChange:i,label:"heatmap"===e.name?(0,d._x)("Interactive heatmap","text","nelio-ab-testing"):(0,d._x)("Interactive confetti","text","nelio-ab-testing")}),l.createElement(vn,{kind:e.name}),"scrollmap"===e.name&&l.createElement(ln,null),"nab/heatmap"===f&&!c&&l.createElement(Wt.PanelRow,{className:"nab-heatmap-settings__public-selector"},l.createElement(Wt.ToggleControl,{label:(0,d._x)("Public results","text","nelio-ab-testing"),disabled:s,checked:m,onChange:function(e){g(e),b(e)}}),!!m&&l.createElement("div",{className:"nab-heatmap-settings__public-result"},l.createElement("div",{className:"nab-heatmap-settings__public-result-url"},l.createElement("input",{className:"nab-heatmap-settings__public-result-url-input",type:"text",value:y,readOnly:!0}),l.createElement(xn.ClipboardButton,{text:y})),l.createElement("p",{className:"nab-heatmap-settings__public-result-description"},(0,d._x)("Copy and share this URL.","user","nelio-ab-testing")))))}))},wn=function(e){var t=e.className,n=e.activeClass,a=e.orientation,r=e.onSelect,i=e.children,s=e.activeTab,o=e.tabs;return l.createElement("div",{className:t},l.createElement("div",{role:"tablist","aria-orientation":a,className:"components-tab-panel__tabs"},o.map((function(e){var t;return l.createElement("button",{key:e.name,type:"button",role:"tab",tabIndex:e.name===s?-1:void 0,"aria-selected":"false",id:"tab-panel-1-".concat(e.name),"aria-controls":"tab-panel-1-".concat(e.name,"-view"),className:Ft()((t={"components-button components-tab-panel__tabs-item":!0},t[e.className]=!0,t[n]=e.name===s,t)),onClick:function(){return r(e.name)}},e.title)}))),l.createElement("div",{"aria-labelledby":"tab-panel-1-".concat(s||o[0].name),role:"tabpanel",id:"tab-panel-1-".concat(s||o[0].name,"-view"),className:"components-tab-panel__tab-content"},i(o.find((function(e){return e.name===s}))||o[0])))},Sn=function(){return g((function(e){return e(h.store).getPluginSetting("homeUrl")}))},kn=[{name:"heatmap",title:(0,d._x)("Heatmap","text","nelio-ab-testing"),className:"nab-heatmap-kind-selector__tab"},{name:"scrollmap",title:(0,d._x)("Scrollmap","text","nelio-ab-testing"),className:"nab-heatmap-kind-selector__tab"},{name:"confetti",title:(0,d._x)("Confetti","text","nelio-ab-testing"),className:"nab-heatmap-kind-selector__tab"}],Rn=function(){var e,t,n=Tt(),a="nab/heatmap"===(null===(e=vt())||void 0===e?void 0:e.type),r=An(),i=On(),s=(t=gt()[0],g((function(e){return e(ft).getRawClicks(t)}))),o=Tn(a?"".concat(r):"".concat(r,"-").concat(i),s);return l.createElement(Wt.PanelBody,{initialOpen:!1,className:"nab-export",title:(0,d._x)("Export","text","nelio-ab-testing")},l.createElement("p",null,(0,d._x)("Export all the clicks of the heatmap:","user","nelio-ab-testing")),l.createElement(Wt.Button,{className:"nab-export__button",disabled:n,variant:"secondary",onClick:o},(0,d._x)("Download CSV","command","nelio-ab-testing")))},An=function(){return g((function(e){return e(h.store).getPageAttribute("editor/activeExperiment")}))},On=function(){return g((function(e){return e(ft).getActiveAlternative()}))},Tn=function(e,t){return function(){var n=[{accessor:function(e){return e.xpath||e.cssPath||"unknown"},name:(0,d._x)("Element","text","nelio-ab-testing")},{accessor:function(e){return e.x},name:(0,d._x)("X coordinate","text","nelio-ab-testing")},{accessor:function(e){return e.y},name:(0,d._x)("Y coordinate","text","nelio-ab-testing")},{accessor:function(e){return e.browser},name:(0,d._x)("Browser","text","nelio-ab-testing")},{accessor:function(e){return e.country},name:(0,d._x)("Country","text","nelio-ab-testing")},{accessor:function(e){return e.os},name:(0,d._x)("OS","text","nelio-ab-testing")},{accessor:function(e){return e.device},name:(0,d._x)("Device","text","nelio-ab-testing")},{accessor:function(e){return e.windowWidthInPx},name:(0,d._x)("Window Width","text","nelio-ab-testing")},{accessor:function(e){return e.dayOfWeek},name:(0,d._x)("Day of Week","text","nelio-ab-testing")},{accessor:function(e){return e.hourOfDay},name:(0,d._x)("Hour of Day","text","nelio-ab-testing")},{accessor:function(e){return e.timeToClick},name:(0,d._x)("Time to Click","text","nelio-ab-testing")},{accessor:function(e){return e.timestamp},name:(0,d._x)("Timestamp","text","nelio-ab-testing")}];(0,u.downloadAsCsv)(function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}([n.map((function(e){return e.name}))],t.map((function(e){return n.map((function(t){return t.accessor(e)}))})),!0),(0,d.sprintf)(/* translators: a unique identifier */ /* translators: a unique identifier */
(0,d._x)("heatmap-clicks-%s.csv","text","nelio-ab-testing"),e))}},Nn=function(){var e=Tt(),t=Pn(),n=In(),a=_t();return t?l.createElement(Wt.PanelBody,{initialOpen:!1,className:"nab-advanced",title:(0,d._x)("Advanced","text","nelio-ab-testing")},l.createElement("p",null,(0,d._x)("Under some circumstances, when your page loads content dynamically, the results may be shifted from their correct position. Refresh the view to re-render the results properly:","user","nelio-ab-testing")),l.createElement(Wt.Button,{className:"nab-advanced__reposition-button",disabled:e,isBusy:a,variant:"secondary",onClick:n},a?(0,d._x)("Refreshing View…","command","nelio-ab-testing"):(0,d._x)("Refresh View","command","nelio-ab-testing"))):null},Pn=function(){return"scrollmap"!==wt()[0]},In=function(){var e=gt()[0],t=kt()[0],n=(0,v.useDispatch)(ft).requestResultProcessing;return function(){return n(e,t)}},Cn=function(){var e=ht(),t=e[0],n=e[1],a=function(e){if("ready"!==e.mode)return"";switch(e.partialError){case"unknown":return(0,d._x)("Something went wrong and results couldn’t be fully loaded","text","nelio-ab-testing");case"stuck-results":return(0,d._x)("Results are still being computed in Nelio’s cloud","text","nelio-ab-testing");case void 0:return""}}(t);return a?l.createElement("div",{className:"nab-heatmap-results-sidebar__error-message"},l.createElement("div",null,a),l.createElement("div",null,l.createElement(Wt.Button,{icon:"no",onClick:function(){return n({mode:"ready"})},label:"Dismiss"}))):null},Dn=function(){var e=vt(),t=Fn(e)?e.participationConditions:[],n=(0,v.useDispatch)(h.store).setPageAttribute;return(0,l.useEffect)((function(){n("editor/activeSegment","default")}),[]),t.length?l.createElement(Wt.PanelBody,{initialOpen:!1,className:"nab-participation-conditions",title:(0,d._x)("Participation","text","nelio-ab-testing")},l.createElement("p",null,(0,d._x)("Only visitors who met all the following criteria contributed to this heatmap:","text","nelio-ab-testing")),t.map((function(e){return l.createElement(xn.SegmentationRule,{key:e.id,rule:e})}))):null},Fn=function(e){return!!e&&"participationConditions"in e},Wn=function(){var e,t=g((function(e){return e(h.store).getQuota()})),n=null===(e=vt())||void 0===e?void 0:e.status;return!t||t.availableQuota||"running"!==n?null:l.createElement("div",{className:"nab-heatmap-results-sidebar__no-quota-warning"},l.createElement(Wt.Dashicon,{icon:"warning"}),l.createElement("span",null,(0,d._x)("Event tracking has stopped because there’s no more quota available at the moment.","text","nelio-ab-testing")))},Mn=function(e){var t=e.className;return l.createElement("div",{className:Ft()(["nab-heatmap-results-sidebar",t])},l.createElement(Lt,null),l.createElement(Wn,null),l.createElement("div",{className:"nab-heatmap-results-sidebar__wrapper"},l.createElement(En,null),l.createElement(Zt,null),l.createElement(nn,null),l.createElement(Dn,null),l.createElement(Rn,null),l.createElement(Nn,null)),l.createElement(Cn,null),l.createElement(zt,null))},Vn=function(e){var t,n=e.className,a=e.alternative,r=e.contentUrl,i=gt()[0];jn(a),Un(a),qn(a),Hn(a),zn(a);var s=kt()[0],o=Ln(a),c=a!==i;return l.createElement("div",{className:n},l.createElement(Bn,null),l.createElement("iframe",{id:"nab-heatmap-results__iframe-".concat(a),className:Ft()((t={"nab-heatmap-results__iframe":!0},t["nab-heatmap-results__iframe--".concat(s)]=!0,t["nab-heatmap-results__iframe--is-hidden"]=c,t)),title:(0,d._x)("Content of the heatmap","text","nelio-ab-testing"),src:r,onLoad:function(){return o()}}))},Bn=function(){var e,t,n=_t(),a=(e=gt()[0],t=kt()[0],g((function(n){return n(ft).hasProcessedResults(e,t)}))),r=ht()[0];return"still-loading"===r.mode||"canceling"===r.mode||"ready"===r.mode?!n||a?null:l.createElement("div",{className:"nab-heatmap-results__loader"},l.createElement(xn.LoadingAnimation,{text:(0,d._x)("Processing results…","text","nelio-ab-testing")})):"error"===r.mode?l.createElement("div",{className:"nab-heatmap-results__loader"},l.createElement(xn.BigError,{text:Yn(r.rationale)}),"unreachable-servers"===r.rationale&&l.createElement("div",{className:"nab-heatmap-results__adblock-explanation"},(0,d._x)("If you’re using an adblocker on your browser, please disable it as it’s probably blocking Nelio A/B Testing’s requests, thus preventing the plugin from pulling your heatmap data.","user","nelio-ab-testing"))):l.createElement("div",{className:"nab-heatmap-results__loader"},l.createElement(xn.LoadingAnimation,{text:"loading"===r.mode?(0,d._x)("Fetching results…","text","nelio-ab-testing"):(0,d._x)("Loading page…","text","nelio-ab-testing")}))},Ln=function(e){var t=(0,v.useDispatch)(ft).setIFrameStatus;return function(){setTimeout((function(){"waiting-script"===(0,(0,v.select)(ft).getIFrameStatus)(e)&&t(e,"script-not-found")}),3e4)}},jn=function(e){var t=Gn(e),n=gt()[0],a=wt()[0],r=yt();(0,l.useEffect)((function(){n===e&&"outdated"===r&&t({plugin:"nelio-ab-testing",type:"process-results",mode:a})}),[n,e,r,a])},Un=function(e){var t=gt()[0],n=Gn(e),a=xt()[0],r=wt()[0],i=kt()[0],s=Et()[0],o=yt();(0,l.useEffect)((function(){t===e&&("ready"!==o&&"outdated"!==o||n({plugin:"nelio-ab-testing",type:"render-results",mode:r}))}),[t,e,o,a,r,i,JSON.stringify(s)])},qn=function(e){var t=Gn(e),n=wt()[0],a=Ot()[0],r=gt()[0];(0,l.useEffect)((function(){r===e&&t({plugin:"nelio-ab-testing",type:"update-opacity",mode:n,value:a})}),[r,e,n,a])},Hn=function(e){var t=Gn(e),n=Rt()[0],a=gt()[0],r=wt()[0];(0,l.useEffect)((function(){"heatmap"===r&&a===e&&t({plugin:"nelio-ab-testing",type:"update-intensity",mode:r,value:n})}),[a,e,n,r])},zn=function(e){var t=Gn(e),n=At()[0],a=gt()[0],r=wt()[0];(0,l.useEffect)((function(){"heatmap"!==r&&"confetti"!==r||a===e&&t({plugin:"nelio-ab-testing",type:"make-interactive",mode:r,value:n})}),[a,e,n,r])},Gn=function(e){return function(t){var n,a="nab-heatmap-results__iframe-".concat(e),r=document.getElementById(a);(null===(n=null==r?void 0:r.contentWindow)||void 0===n?void 0:n.postMessage)&&r.contentWindow.postMessage(t)}};function Yn(e){switch(e){case"no-script":return(0,d._x)("Unable to render heatmap","text","nelio-ab-testing");case"experiment-not-found":return(0,d._x)("Experiment not found","text","nelio-ab-testing");case"alternative-not-found":return(0,d._x)("Page not found","text","nelio-ab-testing");case"unreachable-servers":return(0,d._x)("There was an error while retrieving data from the cloud","text","nelio-ab-testing");case"stuck-empty-results":case"heatmap-data-not-available":return(0,d._x)("Heatmap data is currently unavailable","text","nelio-ab-testing");case"no-heatmap-data":return(0,d._x)("No heatmap data","text","nelio-ab-testing");case"unknown":return(0,d._x)("Something went wrong","text","nelio-ab-testing")}}var Qn=function(){var e=St()[0],t=Kn();return l.createElement("div",{className:"nab-heatmap-results"},l.createElement(Mn,{className:Ft()({"nab-heatmap-results__sidebar":!0,"nab-heatmap-results__sidebar--is-collapsed":!e})}),t.map((function(t){var n=t.alternative,a=t.url;return l.createElement(Vn,{key:"nab-heatmap-results__content--alternative-".concat(n),className:Ft()({"nab-heatmap-results__content":!0,"nab-heatmap-results__content--is-fullscreen":!e}),alternative:n,contentUrl:a})})))},Kn=function(){var e=vt(),t=g((function(e){return e(ft).getIFrames()}));return e?$n(e)?[{alternative:0,url:e.links.heatmap}]:e.alternatives.map((function(e,t){return{alternative:t,url:e.links.heatmap}})).filter((function(e,n){return t.includes(n)})):[]},$n=function(e){return"nab/heatmap"===e.type};function Xn(e,t){var n=document.getElementById(e);if((0,u.isExperimentTooOldToHaveHeatmaps)(t.endDate||""))return s(l.createElement(l.StrictMode,null,l.createElement(f,null)),n);var a=t.experimentId,r=t.experimentType,i=t.alternativeIndex,d=t.isPublicView,m=t.isReadOnlyActive,b=t.staging,p=t.firstDayOfWeek;(0,u.createStagingNotice)(b),(0,o.registerCoreExperiments)(),(0,c.registerCoreSegmentationRules)(),s(l.createElement(l.StrictMode,null,l.createElement(Nt,{experimentId:a,experimentType:r,alternativeIndex:i,firstDayOfWeek:p,isPublicView:d,isReadOnlyActive:m},l.createElement(Qn,null))),n)}},6942:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=l(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)a.call(e,n)&&e[n]&&(t=l(t,n));return t}function l(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.m=t,e=[],a.O=(t,n,r,i)=>{if(!n){var l=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],i=e[u][2];for(var s=!0,o=0;o<n.length;o++)(!1&i||l>=i)&&Object.keys(a.O).every((e=>a.O[e](n[o])))?n.splice(o--,1):(s=!1,i<l&&(l=i));if(s){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,r,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={9460:0,1877:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,l=n[0],s=n[1],o=n[2],c=0;if(l.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(o)var u=o(a)}for(t&&t(n);c<l.length;c++)i=l[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},n=self.webpackChunknab=self.webpackChunknab||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=a.O(void 0,[1877],(()=>a(5602)));r=a.O(r);var i=nab="undefined"==typeof nab?{}:nab;for(var l in r)i[l]=r[l];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();