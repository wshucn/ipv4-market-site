(()=>{var e,t={9220:(e,t,n)=>{"use strict";n.r(t),n.d(t,{heatmapEditor:()=>o});var r={};n.r(r),n.d(r,{getActiveGoal:()=>ae,getActiveGoalIndex:()=>ie,getActiveSegment:()=>oe,getActiveSegmentIndex:()=>se,getAlternative:()=>Z,getAlternativeIds:()=>ee,getAlternativePreviewerUrl:()=>ce,getAlternatives:()=>$,getConversionActions:()=>te,getDraftStatusRationale:()=>le,getExperimentAttribute:()=>pe,getExperimentId:()=>ue,getExperimentType:()=>de,getGoals:()=>ge,getHeatmapAttribute:()=>me,getScope:()=>Ee,getSegmentEvaluation:()=>be,getSegmentationRules:()=>ye,getSegments:()=>fe,hasExperimentBeenRecentlySaved:()=>re,isExperimentBeingSaved:()=>ne,isTestedElementInvalid:()=>ve});var a={};n.r(a),n.d(a,{addAlternatives:()=>_e,addConversionActionsIntoGoal:()=>Ie,addGoals:()=>Ve,addSegmentationRulesIntoSegment:()=>qe,addSegments:()=>He,closeAlternativePreviewer:()=>Le,openAlternativePreviewer:()=>Ce,removeAlternatives:()=>Ae,removeConversionActionsFromGoal:()=>Te,removeGoals:()=>Be,removeSegmentationRulesFromSegment:()=>Ye,removeSegments:()=>We,replaceAlternatives:()=>he,replaceConversionActionsInGoal:()=>Se,replaceSegmentationRulesInSegment:()=>ze,setActiveGoal:()=>Re,setActiveSegment:()=>Oe,setAlternative:()=>xe,setDraftStatusRationale:()=>De,setExperimentAsBeingSaved:()=>Pe,setExperimentAsRecentlySaved:()=>ke,setExperimentData:()=>Me,setHeatmapData:()=>Ue,setScopeRules:()=>Fe,setSegmentEvaluation:()=>Je,setTestedElementAsInvalid:()=>Ge,setupEditor:()=>Ne,updateConversionAction:()=>we,updateGoal:()=>je,updateSegment:()=>Xe,updateSegmentationRule:()=>Qe});var i={};n.r(i),n.d(i,{moveToTrash:()=>pt,resumeExperiment:()=>vt,saveExperiment:()=>ct,saveExperimentAndEditAlternative:()=>ut,saveExperimentAndPreviewAlternative:()=>dt,startExperiment:()=>mt});var o={};n.r(o),n.d(o,{initializeExperimentEditor:()=>Vt});const s=window.wp.element,l=window.wp.data;function c(e,t){return(0,l.useSelect)(e,t)}const u=window.wp.domReady,d=n.n(u)(),p=window.lodash,m=window.nab.editor,v=window.nab.conversionActionLibrary,g=window.nab.data,E=window.nab.experimentLibrary,f=window.nab.segmentationRuleLibrary,y=window.wp.components,b=window.wp.i18n,_=window.wp.notices,A=window.nab.utils,h=window.nab.date,x=window.nab.segmentationRules;var I=function(){var e=S(),t=T(),n=e.status.includes("paused"),r=w();return(0,s.useEffect)((function(){var a=e.homeUrl,i=e.mode,o=e.name,s=e.participationConditions,l=e.postId,c=e.postType,u=e.startDate,d=e.status,p=e.url;if("running"!==d)if((0,A.isEmpty)(o))t(n?"paused_draft":"draft",(0,b._x)("Please name your Heatmap test","user","nelio-ab-testing"));else{if("post"===i&&!l)switch(c){case"product":return void t(n?"paused_draft":"draft",(0,b._x)("Please select the product to track","user","nelio-ab-testing"));case"post":return void t(n?"paused_draft":"draft",(0,b._x)("Please select the post to track","user","nelio-ab-testing"));case"page":return void t(n?"paused_draft":"draft",(0,b._x)("Please select the page to track","user","nelio-ab-testing"));default:return void t(n?"paused_draft":"draft",(0,b._x)("Please select a page to track","user","nelio-ab-testing"))}if("url"===i&&(0,A.getLocalUrlError)(p,a))t(n?"paused_draft":"draft",(0,A.getLocalUrlError)(p,a)||"");else{var m=s.reduce((function(e,t){return e||r(t)}),void 0);m?t(n?"paused_draft":"draft",m):"scheduled"!==d||(0,h.isInTheFuture)(u)?"scheduled"!==d&&t(n?"paused":"ready"):t(n?"paused":"ready")}}}),[JSON.stringify(e)]),null},S=function(){return c((function(e){var t,n,r,a,i,o=e(g.store).getPluginSetting,s=e(m.store),l=s.getExperimentAttribute,c=s.getHeatmapAttribute;return{homeUrl:o("homeUrl"),mode:null!==(t=c("trackingMode"))&&void 0!==t?t:"post",name:l("name"),participationConditions:null!==(n=c("participationConditions"))&&void 0!==n?n:[],postId:null!==(r=c("trackedPostId"))&&void 0!==r?r:0,postType:null!==(a=c("trackedPostType"))&&void 0!==a?a:"page",startDate:l("startDate"),status:l("status"),url:null!==(i=c("trackedUrl"))&&void 0!==i?i:""}}))},T=function(){var e=(0,l.useDispatch)(m.store),t=e.setDraftStatusRationale,n=e.setExperimentData;return function(e,r){n({status:e}),t(null!=r?r:"")}},w=function(){var e=c((function(e){return(0,p.keyBy)(e(x.store).getSegmentationRuleTypes()||[],"name")}));return function(t){var n,r,a,i,o=null!==(a=null===(r=null===(n=e[t.type])||void 0===n?void 0:n.validate)||void 0===r?void 0:r.call(n,t.attributes))&&void 0!==a?a:{};return null!==(i=(0,p.values)(o)[0])&&void 0!==i?i:""}};const N=window.nab.components;var R=function(e){var t=e.className,n=e.postId,r=e.postType,a=e.setAttributes,i=O().map((function(e){return{value:e.name,label:e.labels.singular_name}})),o=r||"page";return s.createElement("div",{className:t},s.createElement(y.SelectControl,{className:"".concat(t,"-type-selector"),value:o,options:i,onChange:function(e){return a({postId:0,postType:e})}}),s.createElement(N.PostSearcher,{className:"".concat(t,"-selector"),type:o,value:n,perPage:10,onChange:function(e){return a({postId:e,postType:o})}}))},O=function(){return c((function(e){var t=e(g.store).getKindEntities,n=[{kind:"entity",name:"page",labels:{singular_name:(0,b._x)("Page","text","nelio-ab-testing")}},{kind:"entity",name:"post",labels:{singular_name:(0,b._x)("Post","text","nelio-ab-testing")}}],r=t();return(r=(r=(0,A.isEmpty)(r)?n:r).filter((function(e){return"entity"===e.kind}))).filter((function(e){return"attachment"!==e.name}))}))},P=function(){var e=D(),t=e[0],n=e[1],r=t.mode,a=t.postId,i=t.postType,o=t.url,l=t.urlError;return s.createElement("div",{className:"nab-edit-experiment__alternative-section"},s.createElement("h2",null,(0,s.createInterpolateElement)((0,b.sprintf)(/* translators: dashicon */ /* translators: dashicon */
(0,b._x)("%s WordPress Page","text","nelio-ab-testing"),"<icon></icon>"),{icon:s.createElement(y.Dashicon,{className:"nab-alternative-section__title-icon",icon:"welcome-view-site"})})),s.createElement("div",{className:"nab-tracked-element"},"url"!==r?s.createElement(s.Fragment,null,s.createElement("div",{className:"nab-tracked-element__p"},(0,b._x)("Select the page you want to generate a heatmap for:","user","nelio-ab-testing")),s.createElement(R,{className:"nab-tracked-element__post",postId:null!=a?a:0,postType:i,setAttributes:n})):s.createElement(s.Fragment,null,s.createElement("div",{className:"nab-tracked-element__p"},(0,b._x)("Type in the URL of the page you want to generate a heatmap for:","user","nelio-ab-testing")),s.createElement("div",{className:"nab-tracked-element__url"},s.createElement(y.TextControl,{className:"nab-tracked-element__url-value",value:o,onChange:function(e){return n({url:e})},placeholder:(0,b._x)("URL…","text","nelio-ab-testing")}),s.createElement("div",{className:"nab-tracked-element__url-preview"},l?s.createElement("span",null,(0,b._x)("View","command","nelio-ab-testing")):s.createElement(y.ExternalLink,{className:"components-button is-secondary",href:o},(0,b._x)("View","command","nelio-ab-testing")))),!!l&&s.createElement("div",{className:"nab-tracked-element__p"},s.createElement(N.ErrorText,{value:l}))),s.createElement("div",{className:"nab-tracked-element__p"},s.createElement(y.CheckboxControl,{className:"nab-tracked-element__mode",label:(0,b._x)("Track heatmap of a page specified using its URL.","command","nelio-ab-testing"),checked:"url"===r,onChange:function(e){return n({mode:e?"url":"post"})}}))))},D=function(){var e=c((function(e){var t=e(g.store).getPluginSetting,n=e(m.store).getHeatmapAttribute,r=n("trackedUrl")||"",a=t("homeUrl");return{mode:n("trackingMode")||"post",postId:n("trackedPostId")||void 0,postType:n("trackedPostType")||"page",url:r,urlError:(0,A.getLocalUrlError)(r,a)}})),t=(0,l.useDispatch)(m.store).setHeatmapData;return[e,function(n){var r,a,i,o;t({trackingMode:null!==(r=n.mode)&&void 0!==r?r:e.mode,trackedPostId:null!==(a=n.postId)&&void 0!==a?a:e.postId,trackedPostType:null!==(i=n.postType)&&void 0!==i?i:e.postType,trackedUrl:null!==(o=n.url)&&void 0!==o?o:e.url})}]},k=function(){return k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},k.apply(this,arguments)},C={activeGoalId:"",activeSegmentId:"",alternativePreviewerUrl:"",draftStatusRationale:"",hasExperimentBeenRecentlySaved:!1,isExperimentBeingSaved:!1},L=function(){return L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},L.apply(this,arguments)},M=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},U={byId:{control:{id:"control",attributes:{},links:{edit:"",heatmap:"",preview:""}}},allIds:[]},G=function(){return G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},G.apply(this,arguments)},V={},B=function(){return B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},B.apply(this,arguments)},j={id:0,type:"",status:"draft",name:"",description:"",startDate:"",endDate:"",endMode:"manual",endValue:0,autoAlternativeApplication:!1,isTestedElementInvalid:!1,links:{edit:"",preview:""}},F=function(){return F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},F.apply(this,arguments)},H={},W={},X=function(){return X=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},X.apply(this,arguments)},q={evaluation:"tested-page",rules:{},segments:{}};const z=(0,l.combineReducers)({editor:function(e,t){var n;return void 0===e&&(e=C),null!==(n=function(e,t){switch(t.type){case"SET_ACTIVE_GOAL":return k(k({},e),{activeGoalId:t.goalId});case"SET_ACTIVE_SEGMENT":return k(k({},e),{activeSegmentId:t.segmentId});case"SET_EXPERIMENT_AS_BEING_SAVED":return k(k({},e),{isExperimentBeingSaved:!!t.status});case"SET_EXPERIMENT_AS_RECENTLY_SAVED":return k(k({},e),{hasExperimentBeenRecentlySaved:!0});case"SET_DRAFT_STATUS_RATIONALE":return k(k({},e),{draftStatusRationale:t.rationale});case"OPEN_ALTERNATIVE_PREVIEWER":return k(k({},e),{alternativePreviewerUrl:t.url});case"CLOSE_ALTERNATIVE_PREVIEWER":return k(k({},e),{alternativePreviewerUrl:""});case"SETUP_EDITOR":return e}}(e=k(k({},e),{hasExperimentBeenRecentlySaved:!1}),t))&&void 0!==n?n:e},experiment:(0,l.combineReducers)({alternatives:function(e,t){var n;return void 0===e&&(e=U),null!==(n=function(e,t){var n;switch(t.type){case"ADD_ALTERNATIVES":return{byId:L(L({},e.byId),(0,p.keyBy)(t.alternatives,"id")),allIds:M(M([],e.allIds,!0),(0,p.map)(t.alternatives,"id"),!0)};case"REMOVE_ALTERNATIVES":return{byId:L({control:e.byId.control},(0,p.omit)(e.byId,t.ids)),allIds:(0,p.difference)(e.allIds,t.ids.filter((function(e){return"control"!==e})))};case"REPLACE_ALTERNATIVES":var r=(0,p.zip)(t.oldIds,(0,p.map)(t.alternatives,"id"));return{byId:L(L({control:e.byId.control},(0,p.omit)(e.byId,t.oldIds)),(0,p.keyBy)(t.alternatives,"id")),allIds:M(M([],e.allIds.map((function(e){var t=r.find((function(t){return t[0]===e}));return t?t[1]:e})).filter(A.isDefined),!0),r.filter((function(e){return!e[0]})).map((function(e){return e[1]})).filter(A.isDefined),!0)};case"SET_ALTERNATIVE":return!t.alternative||(0,A.isEmpty)(t.alternative)||(0,A.isEmpty)(e.byId[t.id])?e:L(L({},e),{byId:L(L({},e.byId),(n={},n[t.id]=t.alternative,n))});case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?U:{byId:L({control:e.byId.control},(0,p.keyBy)(t.experiment.alternatives,"id")),allIds:(0,p.map)(t.experiment.alternatives,"id")}}}(e,t))&&void 0!==n?n:e},conversionActions:function(e,t){var n;return void 0===e&&(e=V),null!==(n=function(e,t){var n,r,a,i,o;switch(t.type){case"ADD_CONVERSION_ACTIONS_INTO_GOAL":return G(G({},e),((n={})[t.goalId]=G(G({},e[t.goalId]),(0,p.keyBy)(t.conversionActions,"id")),n));case"REPLACE_CONVERSION_ACTIONS_IN_GOAL":return G(G({},e),((r={})[t.goalId]=G({},(0,p.keyBy)(t.conversionActions,"id")),r));case"UPDATE_CONVERSION_ACTION":var s=e[t.goalId];if(!s)return e;var l=s[t.conversionActionId];return l?G(G({},e),((a={})[t.goalId]=G(G({},s),((i={})[t.conversionActionId]=G(G({},l),{attributes:t.attributes?G(G({},l.attributes),t.attributes):l.attributes,scope:t.scope?t.scope:l.scope}),i)),a)):e;case"REMOVE_CONVERSION_ACTIONS_FROM_GOAL":return G(G({},e),((o={})[t.goalId]=(0,p.omit)(e[t.goalId],t.conversionActionIds),o));case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?{}:t.experiment.goals.reduce((function(e,t){return e[t.id]=(0,p.keyBy)(t.conversionActions,"id"),e}),{})}}(e,t))&&void 0!==n?n:e},data:function(e,t){var n;return void 0===e&&(e=j),null!==(n=function(e,t){switch(t.type){case"UPDATE_EXPERIMENT_DATA":return B(B({},e),t.attributes);case"SET_TESTED_ELEMENT_AS_INVALID":return B(B({},e),{isTestedElementInvalid:!!t.invalid});case"SETUP_EDITOR":return B(B({},e),(0,p.omit)(t.experiment,["alternatives","goals","scope","segments"]))}}(e,t))&&void 0!==n?n:e},goals:function(e,t){var n;return void 0===e&&(e=H),null!==(n=function(e,t){var n;switch(t.type){case"ADD_GOALS":return F(F({},e),(0,p.keyBy)(t.goals,"id"));case"UPDATE_GOAL":var r=e[t.goalId];return r?F(F({},e),((n={})[t.goalId]=F(F({},r),{attributes:F(F({},r.attributes),t.attributes)}),n)):e;case"REMOVE_GOALS":return(0,p.omit)(e,t.ids);case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?{}:(0,p.keyBy)(t.experiment.goals.map((function(e){return(0,p.omit)(e,"conversionActions")})),"id")}}(e,t))&&void 0!==n?n:e},scope:function(e,t){var n;return void 0===e&&(e=W),null!==(n=function(e,t){switch(t.type){case"SET_SCOPE_RULES":return(0,p.keyBy)(t.rules,"id");case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?{}:(0,p.keyBy)(t.experiment.scope,"id")}}(0,t))&&void 0!==n?n:e},segmentation:function(e,t){var n;return void 0===e&&(e=q),null!==(n=function(e,t){var n,r,a,i,o,s;switch(t.type){case"ADD_SEGMENTS":return X(X({},e),{segments:X(X({},e.segments),(0,p.keyBy)(t.segments,"id"))});case"UPDATE_SEGMENT":var l=e.segments[t.segmentId];return l?X(X({},e),{segments:X(X({},e.segments),(n={},n[t.segmentId]=X(X({},l),{attributes:X(X({},l.attributes),t.attributes)}),n))}):e;case"REMOVE_SEGMENTS":return X(X({},e),{segments:(0,p.omit)(e.segments,t.ids)});case"ADD_SEGMENTATION_RULES_INTO_SEGMENT":return X(X({},e),{rules:X(X({},e.rules),(r={},r[t.segmentId]=X(X({},e.rules[t.segmentId]),(0,p.keyBy)(t.segmentationRules,"id")),r))});case"REPLACE_SEGMENTATION_RULES_IN_SEGMENT":return X(X({},e),{rules:X(X({},e.rules),(a={},a[t.segmentId]=X({},(0,p.keyBy)(t.segmentationRules,"id")),a))});case"UPDATE_SEGMENTATION_RULE":var c=e.rules[t.segmentId];if(!c)return e;var u=c[t.segmentationRuleId];return u?X(X({},e),{rules:X(X({},e.rules),(i={},i[t.segmentId]=X(X({},c),(o={},o[t.segmentationRuleId]=X(X({},u),{attributes:X(X({},u.attributes),t.attributes)}),o)),i))}):e;case"REMOVE_SEGMENTATION_RULES_FROM_SEGMENT":return X(X({},e),{rules:X(X({},e.rules),(s={},s[t.segmentId]=(0,p.omit)(e.rules[t.segmentId],t.segmentationRuleIds),s))});case"SET_SEGMENT_EVALUATION":return X(X({},e),{evaluation:t.strategy});case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?e:{evaluation:t.experiment.segmentEvaluation,rules:t.experiment.segments.reduce((function(e,t){return e[t.id]=(0,p.keyBy)(t.segmentationRules,"id"),e}),{}),segments:(0,p.keyBy)(t.experiment.segments.map((function(e){return(0,p.omit)(e,"segmentationRules")})),"id")}}}(e,t))&&void 0!==n?n:e}})});var Y={};function Q(e){return[e]}function J(e,t,n){var r;if(e.length!==t.length)return!1;for(r=n;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function K(e,t){var n,r=t||Q;function a(){n=new WeakMap}function i(){var t,a,i,o,s,l=arguments.length;for(o=new Array(l),i=0;i<l;i++)o[i]=arguments[i];for(t=function(e){var t,r,a,i,o,s=n,l=!0;for(t=0;t<e.length;t++){if(!(o=r=e[t])||"object"!=typeof o){l=!1;break}s.has(r)?s=s.get(r):(a=new WeakMap,s.set(r,a),s=a)}return s.has(Y)||((i=function(){var e={clear:function(){e.head=null}};return e}()).isUniqueByDependants=l,s.set(Y,i)),s.get(Y)}(s=r.apply(null,o)),t.isUniqueByDependants||(t.lastDependants&&!J(s,t.lastDependants,0)&&t.clear(),t.lastDependants=s),a=t.head;a;){if(J(a.args,o,1))return a!==t.head&&(a.prev.next=a.next,a.next&&(a.next.prev=a.prev),a.next=t.head,a.prev=null,t.head.prev=a,t.head=a),a.val;a=a.next}return a={val:e.apply(null,o)},o[0]=null,a.args=o,t.head&&(t.head.prev=a,a.next=t.head),t.head=a,a.val}return i.getDependants=r,i.clear=a,a(),i}var Z=function(e,t){return e.experiment.alternatives.byId[t]},$=K((function(e){return(0,p.values)(e.experiment.alternatives.byId).filter(A.isDefined)}),(function(e){return[e.experiment.alternatives.byId]})),ee=function(e){return e.experiment.alternatives.allIds},te=K((function(e,t){return(0,p.values)(e.experiment.conversionActions[t])}),(function(e,t){return[e.experiment.conversionActions,t]}));function ne(e){return!!e.editor.isExperimentBeingSaved}function re(e){return!!e.editor.hasExperimentBeenRecentlySaved}function ae(e){return e.experiment.goals[e.editor.activeGoalId]||(0,p.values)(e.experiment.goals)[0]}function ie(e){return(0,p.map)(e.experiment.goals,"id").indexOf(e.editor.activeGoalId)||0}function oe(e){return(0,p.filter)(e.experiment.segmentation.segments,{id:e.editor.activeSegmentId})[0]}function se(e){return(0,p.map)(e.experiment.segmentation.segments,"id").indexOf(e.editor.activeSegmentId)||0}function le(e){if(e.experiment&&e.experiment.data&&["draft","paused_draft"].includes(e.experiment.data.status))return e.editor.draftStatusRationale}function ce(e){return e.editor.alternativePreviewerUrl}function ue(e){return e.experiment.data.id}function de(e){return e.experiment.data.type}var pe=function(e,t){return e.experiment.data[t]},me=function(e,t){return e.experiment.data[t]};function ve(e){return!!e.experiment.data.isTestedElementInvalid}var ge=K((function(e){return(0,p.values)(e.experiment.goals).filter(A.isDefined)}),(function(e){return[e.experiment.goals]})),Ee=K((function(e){return(0,p.values)(e.experiment.scope).filter(A.isDefined)}),(function(e){return[e.experiment.scope]})),fe=K((function(e){return(0,p.values)(e.experiment.segmentation.segments).filter(A.isDefined)}),(function(e){return[e.experiment.segmentation.segments]})),ye=K((function(e,t){return(0,p.values)(e.experiment.segmentation.rules[t])}),(function(e,t){return[e.experiment.segmentation.rules,t]}));function be(e){return e.experiment.segmentation.evaluation}function _e(e){return{type:"ADD_ALTERNATIVES",alternatives:(0,p.castArray)(e)}}function Ae(e){return{type:"REMOVE_ALTERNATIVES",ids:(0,p.castArray)(e)}}function he(e,t){return{type:"REPLACE_ALTERNATIVES",oldIds:(0,p.castArray)(e),alternatives:(0,p.castArray)(t)}}function xe(e,t){return{type:"SET_ALTERNATIVE",id:e,alternative:t}}function Ie(e,t){return{type:"ADD_CONVERSION_ACTIONS_INTO_GOAL",goalId:e,conversionActions:(0,p.castArray)(t)}}function Se(e,t){return{type:"REPLACE_CONVERSION_ACTIONS_IN_GOAL",goalId:e,conversionActions:(0,p.castArray)(t)}}function Te(e,t){return{type:"REMOVE_CONVERSION_ACTIONS_FROM_GOAL",goalId:e,conversionActionIds:(0,p.castArray)(t)}}function we(e,t,n,r){return{type:"UPDATE_CONVERSION_ACTION",goalId:e,conversionActionId:t,attributes:n,scope:r}}function Ne(e){return{type:"SETUP_EDITOR",experiment:e}}function Re(e){return{type:"SET_ACTIVE_GOAL",goalId:e}}function Oe(e){return{type:"SET_ACTIVE_SEGMENT",segmentId:e}}function Pe(e){return{type:"SET_EXPERIMENT_AS_BEING_SAVED",status:e}}function De(e){return{type:"SET_DRAFT_STATUS_RATIONALE",rationale:e}}function ke(){return{type:"SET_EXPERIMENT_AS_RECENTLY_SAVED"}}function Ce(e){return{type:"OPEN_ALTERNATIVE_PREVIEWER",url:e}}function Le(){return{type:"CLOSE_ALTERNATIVE_PREVIEWER"}}function Me(e){return{type:"UPDATE_EXPERIMENT_DATA",attributes:e}}function Ue(e){return{type:"UPDATE_EXPERIMENT_DATA",attributes:e}}function Ge(e){return{type:"SET_TESTED_ELEMENT_AS_INVALID",invalid:e}}function Ve(e){return{type:"ADD_GOALS",goals:(0,p.castArray)(e)}}function Be(e){return{type:"REMOVE_GOALS",ids:(0,p.castArray)(e)}}function je(e,t){return{type:"UPDATE_GOAL",goalId:e,attributes:t}}function Fe(e){return{type:"SET_SCOPE_RULES",rules:e}}function He(e){return{type:"ADD_SEGMENTS",segments:(0,p.castArray)(e)}}function We(e){return{type:"REMOVE_SEGMENTS",ids:(0,p.castArray)(e)}}function Xe(e,t){return{type:"UPDATE_SEGMENT",segmentId:e,attributes:t}}function qe(e,t){return{type:"ADD_SEGMENTATION_RULES_INTO_SEGMENT",segmentId:e,segmentationRules:(0,p.castArray)(t)}}function ze(e,t){return{type:"REPLACE_SEGMENTATION_RULES_IN_SEGMENT",segmentId:e,segmentationRules:(0,p.castArray)(t)}}function Ye(e,t){return{type:"REMOVE_SEGMENTATION_RULES_FROM_SEGMENT",segmentId:e,segmentationRuleIds:(0,p.castArray)(t)}}function Qe(e,t,n){return{type:"UPDATE_SEGMENTATION_RULE",segmentId:e,segmentationRuleId:t,attributes:n}}function Je(e){return{type:"SET_SEGMENT_EVALUATION",strategy:e}}const Ke=window.wp.apiFetch;var Ze=n.n(Ke);const $e=window.wp.date,et=window.wp.url;var tt=function(){return tt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},tt.apply(this,arguments)};const nt=function(e){var t=e.url,n=e.path,r=(0,$e.format)("YmjHi").substring(0,11)+"0";return Ze()(tt(tt(tt({},e),t&&{url:rt(e)?(0,et.addQueryArgs)(t,{nabts:r}):t}),n&&{path:(0,et.addQueryArgs)(n,{nabts:r})}))};var rt=function(e){var t,n;return!!(null===(t=e.url)||void 0===t?void 0:t.includes("/wp-json/"))||!!(null===(n=e.url)||void 0===n?void 0:n.includes("rest_route"))||!!Object.keys(e).includes("rest_route")};const at=window.nab.experiments;var it=function(){return it=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},it.apply(this,arguments)},ot=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},st=function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},lt=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};function ct(){return ot(this,void 0,Promise,(function(){var e,t,n,r,a,i,o,s,c,u,d,p,m,v,g,E,f,y,b,A,h,x,I,S,T,w,N,R,O,P,D;return st(this,(function(k){switch(k.label){case 0:return(0,l.select)(At).isExperimentBeingSaved()?[2]:[4,(0,l.dispatch)(At).setExperimentAsBeingSaved(!0)];case 1:for(k.sent(),e=[],t=(0,l.select)(At).getGoals(),n=0,r=t;n<r.length;n++)a=r[n],i=(0,l.select)(At).getConversionActions(a.id),o=Et(i),e.push(it(it({},a),{attributes:it(it({},a.attributes),{useOrderRevenue:o?null===(w=a.attributes.useOrderRevenue)||void 0===w||w:void 0,orderStatusForConversion:o?ft(o,a):void 0}),conversionActions:i}));for(s=[],c=(0,l.select)(At).getSegments(),u=0,d=c;u<d.length;u++)p=d[u],s.push(it(it({},p),{segmentationRules:(0,l.select)(At).getSegmentationRules(p.id)}));for(m=[],v=(0,l.select)(At).getAlternativeIds(),g=(0,l.select)(At).isTestedElementInvalid(),E=(0,l.select)(At).getAlternative("control"),f=0,y=v;f<y.length;f++)"control"!==(b=y[f])&&(A=(0,l.select)(At).getAlternative(b))&&m.push(A);x=(0,l.select)(At).getExperimentType(),h="nab/heatmap"===x?{id:(0,l.select)(At).getExperimentId(),type:x,name:(0,l.select)(At).getExperimentAttribute("name"),description:(0,l.select)(At).getExperimentAttribute("description"),status:(0,l.select)(At).getExperimentAttribute("status"),startDate:(0,l.select)(At).getExperimentAttribute("startDate"),endDate:!1,endMode:(0,l.select)(At).getExperimentAttribute("endMode"),endValue:(0,l.select)(At).getExperimentAttribute("endValue"),trackingMode:null!==(N=(0,l.select)(At).getHeatmapAttribute("trackingMode"))&&void 0!==N?N:"post",trackedPostId:null!==(R=(0,l.select)(At).getHeatmapAttribute("trackedPostId"))&&void 0!==R?R:0,trackedPostType:null!==(O=(0,l.select)(At).getHeatmapAttribute("trackedPostType"))&&void 0!==O?O:"page",trackedUrl:null!==(P=(0,l.select)(At).getHeatmapAttribute("trackedUrl"))&&void 0!==P?P:"",participationConditions:null!==(D=(0,l.select)(At).getHeatmapAttribute("participationConditions"))&&void 0!==D?D:[]}:{id:(0,l.select)(At).getExperimentId(),type:x,name:(0,l.select)(At).getExperimentAttribute("name"),description:(0,l.select)(At).getExperimentAttribute("description"),status:(0,l.select)(At).getExperimentAttribute("status"),startDate:(0,l.select)(At).getExperimentAttribute("startDate"),endDate:!1,endMode:(0,l.select)(At).getExperimentAttribute("endMode"),endValue:(0,l.select)(At).getExperimentAttribute("endValue"),autoAlternativeApplication:(0,l.select)(At).getExperimentAttribute("autoAlternativeApplication"),scope:(0,l.select)(At).getScope(),alternatives:g?[E]:lt([E],m,!0),goals:e,segmentEvaluation:(0,l.select)(At).getSegmentEvaluation(),segments:s},k.label=2;case 2:return k.trys.push([2,7,,10]),[4,nt({path:"/nab/v1/experiment/".concat(h.id),method:"PUT",data:h})];case 3:return I=k.sent(),"nab/heatmap"!==h.type&&g&&(I=it(it({},I),{alternatives:lt([I.alternatives[0]],m,!0)})),[4,(0,l.dispatch)(At).setupEditor(I)];case 4:return k.sent(),[4,(0,l.dispatch)(At).setExperimentAsBeingSaved(!1)];case 5:return k.sent(),[4,(0,l.dispatch)(At).setExperimentAsRecentlySaved()];case 6:return k.sent(),[3,10];case 7:return S=k.sent(),T=yt(S),[4,(0,l.dispatch)(_.store).createErrorNotice(T)];case 8:return k.sent(),[4,(0,l.dispatch)(At).setExperimentAsBeingSaved(!1)];case 9:return k.sent(),[3,10];case 10:return[2]}}))}))}function ut(e){return ot(this,void 0,Promise,(function(){var t;return st(this,(function(n){switch(n.label){case 0:return[4,ct()];case 1:return n.sent(),(0,l.select)(At).hasExperimentBeenRecentlySaved()&&(0,l.select)(At).getAlternativeIds().includes(e)&&(t=(0,l.select)(At).getAlternative(e))&&t.links.edit?(window.location.href=t.links.edit,[2]):[2]}}))}))}function dt(e){return ot(this,void 0,Promise,(function(){var t,n,r,a;return st(this,(function(i){switch(i.label){case 0:return[4,ct()];case 1:return i.sent(),(0,l.select)(At).hasExperimentBeenRecentlySaved()&&(0,l.select)(At).getAlternativeIds().includes(e)?(null==(t=(0,l.select)(At).getAlternative(e))?void 0:t.links.preview)?[3,3]:(n=(0,b._x)("Preview not available.","text","nelio-ab-testing"),r=(0,l.select)(At).getExperimentType(),"urls"!==(a=(0,l.select)(at.store).getExperimentSupport(r,"scope"))&&"urls-with-tested-post"!==a||(n+=" ",n+=(0,b._x)("Please review your test scope and consider adding an exact URL where the test should be active so that Nelio can use it in the preview.","user","nelio-ab-testing")),[4,(0,l.dispatch)(_.store).createWarningNotice(n)]):[2];case 2:case 4:return i.sent(),[2];case 3:return[4,(0,l.dispatch)(At).openAlternativePreviewer(t.links.preview)]}}))}))}function pt(){return ot(this,void 0,Promise,(function(){return st(this,(function(e){switch(e.label){case 0:return[4,(0,l.dispatch)(At).setExperimentData({status:"trash"})];case 1:return e.sent(),[4,ct()];case 2:return e.sent(),window.location.href=(0,l.select)(g.store).getAdminUrl("edit.php",{post_type:"nab_experiment"}),[2]}}))}))}function mt(){return ot(this,void 0,Promise,(function(){return st(this,(function(e){switch(e.label){case 0:return[4,gt("start")];case 1:return e.sent(),[2]}}))}))}function vt(){return ot(this,void 0,Promise,(function(){return st(this,(function(e){switch(e.label){case 0:return[4,gt("resume")];case 1:return e.sent(),[2]}}))}))}function gt(e){return ot(this,arguments,Promise,(function(e,t){var n,r,a,i,o=this;return void 0===t&&(t=!1),st(this,(function(s){switch(s.label){case 0:return[4,ct()];case 1:return s.sent(),(0,l.select)(At).hasExperimentBeenRecentlySaved()?[4,(0,l.dispatch)(At).setExperimentAsBeingSaved(!0)]:[2];case 2:s.sent(),n=(0,l.select)(At).getExperimentId(),s.label=3;case 3:return s.trys.push([3,5,,11]),[4,nt({path:"/nab/v1/experiment/".concat(n,"/").concat(e),method:"PUT",data:{ignoreScopeOverlap:t}})];case 4:return s.sent(),[3,11];case 5:return r=s.sent(),a=yt(r,"start"===e?(0,b._x)("Test can’t be started","text","nelio-ab-testing"):(0,b._x)("Test can’t be resumed","text","nelio-ab-testing")),"equivalent-experiment-running"!==function(e){if(!e||"object"!=typeof e)return!1;if(!("errors"in e)||"object"!=typeof e.errors)return!1;var t=e.errors||{};return Object.keys(t).includes("equivalent-experiment-running")&&"equivalent-experiment-running"}(r)?[3,7]:[4,(0,l.dispatch)(_.store).createWarningNotice(a,{actions:[{label:"start"===e?(0,b._x)("Start anyway","command","nelio-ab-testing"):(0,b._x)("Resume anyway","command","nelio-ab-testing"),variant:"primary",onClick:function(){return ot(o,void 0,void 0,(function(){return st(this,(function(t){switch(t.label){case 0:return[4,(0,l.dispatch)(_.store).removeNotice(i.id)];case 1:return t.sent(),[4,gt(e,!0)];case 2:return t.sent(),[2]}}))}))}}]})];case 6:return i=s.sent().notice,[3,9];case 7:return[4,(0,l.dispatch)(_.store).createErrorNotice(a)];case 8:s.sent(),s.label=9;case 9:return[4,(0,l.dispatch)(At).setExperimentAsBeingSaved(!1)];case 10:return s.sent(),[2];case 11:return window.location.href=(0,l.select)(g.store).getAdminUrl("admin.php",{page:"nelio-ab-testing-experiment-view",experiment:n}),[2]}}))}))}function Et(e){if(e.length)return e.every((function(e){return"nab/wc-order"===e.type}))?"woocommerce":e.every((function(e){return"nab/edd-order"===e.type}))?"edd":void 0}function ft(e,t){var n=(0,l.select)(g.store).getECommerceSetting(e,"orderStatuses"),r=t.attributes.orderStatusForConversion;return r&&n.map((function(e){return e.value})).includes(r)?r:function(e){switch(e){case"woocommerce":return"wc-completed";case"edd":return"complete"}}(e)}function yt(e,t){var n=t||(0,b._x)("Unknown error","text","nelio-ab-testing");if(!e||"object"!=typeof e)return n;if("errors"in e&&"object"==typeof e.errors){var r=Array.isArray(e.errors)?e.errors:(0,p.values)(e.errors);if("string"==typeof r[0])return r[0]||n;var a=Array.isArray(r[0])&&"string"==typeof r[0][0]?r[0][0]:void 0;if(a)return a||n}return"message"in e&&"string"==typeof e.message&&e.message||n}var bt=function(){return bt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},bt.apply(this,arguments)},_t=bt(bt({},a),i),At=(0,l.createReduxStore)("nab/editor",{reducer:z,controls:l.controls,actions:_t,selectors:r});!function(e){(0,l.register)(e)}(At);var ht=function(e){var t,n=e.readOnly,r=e.rule,a=e.setAttributes,i=e.remove,o=xt(),l=It(r.type),c=null==l?void 0:l.view,u=null==l?void 0:l.edit,d=null==l?void 0:l.icon,p=(null==r?void 0:r.attributes)||{},m=(null!==(t=null==l?void 0:l.validate)&&void 0!==t?t:function(){return{}})(p),v=(0,s.useState)(!(0,A.isEmpty)(m))[0];return n?s.createElement("div",{className:"nab-segmentation-rule"},s.createElement("div",{className:"nab-segmentation-rule__view"},d?s.createElement(d,{className:"nab-segmentation-rule__icon"}):s.createElement(y.Dashicon,{className:"nab-segmentation-rule__icon nab-segmentation-rule__icon--invalid",icon:"warning"}),s.createElement("div",{className:"nab-segmentation-rule__actual-view"},c?s.createElement(c,{attributes:p,experimentId:o}):s.createElement("span",null,(0,b._x)("Invalid segmentation rule.","text","nelio-ab-testing"))))):s.createElement(y.PanelBody,{className:"nab-segmentation-rule",initialOpen:v,title:s.createElement("div",{className:"nab-segmentation-rule__view"},d?s.createElement(d,{className:"nab-segmentation-rule__icon"}):s.createElement(y.Dashicon,{className:"nab-segmentation-rule__icon nab-segmentation-rule__icon--invalid",icon:"warning"}),s.createElement("div",{className:"nab-segmentation-rule__actual-view"},c?s.createElement(c,{attributes:p,experimentId:o}):s.createElement("span",null,(0,b._x)("Invalid segmentation rule.","text","nelio-ab-testing"))))},s.createElement("div",{className:"nab-segmentation-rule__edit"},u?s.createElement(u,{attributes:p,experimentId:o,setAttributes:a,errors:m}):s.createElement("span",null,(0,b._x)("This segmentation rule can’t be properly loaded. Please consider removing it.","text","nelio-ab-testing"))),s.createElement(y.Button,{variant:"link",isDestructive:!0,onClick:i,className:"nab-segmentation-rule__delete-button"},(0,b._x)("Delete","command","neli-ab-testing")))},xt=function(){return c((function(e){return e(At).getExperimentId()}))},It=function(e){return c((function(t){return t(x.store).getSegmentationRuleType(e)}))},St=function(e){var t=e.category,n=e.createSegmentationRule,r=e.segmentationRules,a=Tt(t.name),i=t.icon;return a.length?s.createElement("li",{key:t.name,className:"nab-segmentation-rule-type-category"},s.createElement(y.DropdownMenu,{icon:s.createElement(i,null),className:"nab-segmentation-rule-type-category__item",label:t.title,controls:a.map((function(e){var t=e.name,a=e.title,i=e.icon,o=e.singleton;return{title:a,icon:s.createElement(i,null),isDisabled:o&&r.some((function(e){return e.type===t})),onClick:function(){return n(t)}}})),toggleProps:{className:"nab-segmentation-rule-type-category__toggle",disabled:a.every((function(e){var t=e.name;return e.singleton&&r.some((function(e){return e.type===t}))}))},menuProps:{className:"nab-segmentation-rule-type-category__menu"}})):null},Tt=function(e){return c((function(t){return(t(x.store).getSegmentationRuleTypes()||[]).filter((function(t){return t.category===e}))}))},wt=function(e){var t=e.createSegmentationRule,n=e.segmentationRules,r=Nt();return(0,g.usePluginSetting)("subscription")?s.createElement("ul",{className:"nab-segmentation-rule-type-category-list"},r.map((function(e){return s.createElement(St,{key:e.name,category:e,createSegmentationRule:t,segmentationRules:n})}))):s.createElement("div",{className:"nab-segmentation-rule-type-list"},s.createElement(y.ExternalLink,{className:"components-button is-secondary",href:(0,A.addFreeTracker)((0,b._x)("https://neliosoftware.com/testing/pricing/","text","nelio-ab-testing"))},(0,b._x)("Subscribe to Use Segmentation Rules","user","nelio-ab-testing")))},Nt=function(){return c((function(e){return e(x.store).getSegmentationRuleTypeCategories()||[]}))},Rt=function(){return Rt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Rt.apply(this,arguments)},Ot=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},Pt=function(){var e=!!(0,g.usePluginSetting)("subscription");return s.createElement("div",{className:"nab-edit-experiment__participation-section"},s.createElement(Dt,null),e?s.createElement(Ct,null):s.createElement(kt,null))},Dt=function(){return s.createElement("h2",null,(0,s.createInterpolateElement)((0,b.sprintf)(/* translators: dashicon */ /* translators: dashicon */
(0,b._x)("%s Participation","text","nelio-ab-testing"),"<icon></icon>"),{icon:s.createElement(y.Dashicon,{className:"nab-participation-section__title-icon",icon:"groups"})}))},kt=function(){return s.createElement("div",{className:"nab-edit-experiment-participation-section__content nab-edit-experiment-participation-section__content--free"},s.createElement("p",null,(0,b._x)("All your visitors participate in this heatmap. Participation settings allow you to narrow your tested audience and target only a subset of your visitors.","user","nelio-ab-testing")),s.createElement("div",{className:"nab-edit-experiment-participation-section__content-action"},s.createElement(y.ExternalLink,{className:"components-button is-secondary",href:(0,A.addFreeTracker)((0,b._x)("https://neliosoftware.com/testing/pricing/","text","nelio-ab-testing"))},(0,b._x)("Subscribe to Unlock Participation Settings","user","nelio-ab-testing"))))},Ct=function(){var e=Lt(),t=e.conditions,n=e.createCondition,r=e.updateCondition,a=e.removeCondition;return s.createElement("div",{className:"nab-edit-experiment-participation-section__content"},s.createElement("p",null,t.length?(0,b._x)("Only visitors who meet all the following criteria will contribute to this heatmap:","text","nelio-ab-testing"):(0,b._x)("All visitors will contribute to this heatmap. If you want to limit participation to a subset of visitors, use the actions below:","text","nelio-ab-testing")),s.createElement("div",{className:"nab-edit-experiment-participation-section__conditions"},t.map((function(e){return s.createElement(ht,{key:e.id,rule:e,setAttributes:function(t){return r(e.id,t)},remove:function(){return a(e.id)}})}))),s.createElement(wt,{segmentationRules:t,createSegmentationRule:n}))},Lt=function(){var e=c((function(e){var t;return null!==(t=e(m.store).getHeatmapAttribute("participationConditions"))&&void 0!==t?t:[]})),t=(0,l.useDispatch)(m.store).setHeatmapData;return{conditions:e,createCondition:function(n){var r=(0,x.createSegmentationRule)(n);r&&t({participationConditions:Ot(Ot([],e,!0),[r],!1)})},updateCondition:function(n,r){t({participationConditions:e.map((function(e){return e.id===n?Rt(Rt({},e),{attributes:Rt(Rt({},e.attributes),r)}):e}))})},removeCondition:function(n){t({participationConditions:e.filter((function(e){return e.id!==n}))})}}},Mt=function(){var e=Ut(),t=(0,l.useDispatch)(_.store).removeNotice;return s.createElement("div",{className:"nab-edit-experiment-layout"},s.createElement(I,null),s.createElement(m.Header,null),s.createElement("div",{className:"nab-edit-experiment-layout__body"},s.createElement("div",{className:"nab-edit-experiment-layout__content",role:"region","aria-label":(0,b._x)("Editor content","text","nelio-ab-testing"),tabIndex:-1},!(0,A.isEmpty)(e)&&s.createElement(y.NoticeList,{className:"nab-edit-experiment-layout__notices",notices:e,onRemove:t}),s.createElement(m.ExperimentName,null),s.createElement(P,null),s.createElement(Pt,null)),s.createElement(m.Sidebar,null)))},Ut=function(){return c((function(e){return e(_.store).getNotices()}))},Gt=function(e){var t=e.experimentId,n=c((function(e){return e(g.store).getExperiment(t)}));return n?s.createElement(s.StrictMode,null,s.createElement(m.EditorProvider,{experiment:n},s.createElement(Mt,null))):null};function Vt(e,t){var n,r,a=document.getElementById(e);(0,E.registerCoreExperiments)(),(0,v.registerCoreConversionActions)(),(0,f.registerCoreSegmentationRules)(),n=s.createElement(Gt,{experimentId:t}),(r=a)&&(s.createRoot?(0,s.createRoot)(r).render(n):(0,s.render)(n,r))}function Bt(){var e=window.innerHeight,t=document.getElementById("wpadminbar"),n=t?t.getBoundingClientRect().height:0;(0,(0,l.dispatch)(g.store).setPageAttribute)("sidebarDimensions",{top:n,height:"".concat(e-n,"px"),applyFix:782<=window.innerWidth})}window.addEventListener("resize",(0,p.debounce)(Bt,100)),d(Bt)}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,a,i)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],i=e[u][2];for(var s=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,i<o&&(o=i));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,a,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={7793:0,117:0,9196:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,i,o=n[0],s=n[1],l=n[2],c=0;if(o.some((t=>0!==e[t]))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(l)var u=l(r)}for(t&&t(n);c<o.length;c++)i=o[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(u)},n=self.webpackChunknab=self.webpackChunknab||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[117,9196],(()=>r(9220)));a=r.O(a);var i=nab="undefined"==typeof nab?{}:nab;for(var o in a)i[o]=a[o];a.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();