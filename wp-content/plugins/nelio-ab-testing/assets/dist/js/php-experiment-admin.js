(()=>{var e,t={3179:(e,t,n)=>{"use strict";window.wp.coreData,window.wp.domReady;const r=window.nab.data,a=window.wp.element,i=window.nab.experimentLibrary,o=window.wp.data;function s(e,t){return(0,o.useSelect)(e,t)}const l=window.nab.editor;var c=n(6942),d=n.n(c);const p=window.wp.i18n,u=window.nab.components,v=window.nab.utils;var m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},m.apply(this,arguments)},b=function(e){var t=e.alternativeId,n=f(t),r=n[0],i=n[1],o=(0,a.useState)(),s=o[0],l=o[1];return a.createElement("div",{className:"nab-php-editor-sidebar__editor",onClick:function(){return null==s?void 0:s.focus()}},a.createElement(u.CodeEditor,{language:"php",before:"<?php",value:r,onChange:i,readOnly:!1,onCreateEditor:l,placeholder:(0,p._x)("Write your PHP code here…","user","nelio-ab-testing")+"\n\n"+(0,p.sprintf)(/* translators: function names */ /* translators: function names */
(0,p._x)("We highly recommend using WordPress hooks like “%1$s” and “%2$s” to ensure a seamless integration with your setup.","text","nelio-ab-testing"),"add_action","add_filter")}))},f=function(e){var t,n=s((function(t){return t(l.store).getAlternative(e)})),r=(null===(t=null==n?void 0:n.attributes)||void 0===t?void 0:t.snippet)||"",a=(0,o.useDispatch)(l.store).setAlternative;return[r,function(e){n&&a(n.id,m(m({},n),{attributes:(0,v.omitUndefineds)(m(m({},n.attributes),{validateSnippet:!0,snippet:e}))}))}]},h=function(e){var t=e.alternativeId,n=g(t),r=n.type,i=n.message;switch(r){case"error":return a.createElement("div",{className:"nab-php-editor-sidebar__error"},(0,p.sprintf)(/* translators: error message */ /* translators: error message */
(0,p._x)("There’s a problem with your code: %s","text","nelio-ab-testing"),i));case"warning":return a.createElement("div",{className:"nab-php-editor-sidebar__error"},(0,p.sprintf)(/* translators: warning message */ /* translators: warning message */
(0,p._x)("There might be a problem with your code: %s","text","nelio-ab-testing"),i));case"none":return null}},g=function(e){var t,n,r=s((function(t){return t(l.store).getAlternative(e)}));return(null===(t=null==r?void 0:r.attributes)||void 0===t?void 0:t.errorMessage)?{type:"error",message:r.attributes.errorMessage}:(null===(n=null==r?void 0:r.attributes)||void 0===n?void 0:n.warningMessage)?{type:"warning",message:r.attributes.warningMessage}:{type:"none",message:""}};const _=window.wp.components;var w=function(){var e=E(),t=y(),n=t[0],r=t[1];return a.createElement("div",{className:"nab-php-editor-sidebar__actions"},a.createElement("div",{className:"nab-php-editor-sidebar__back-to-experiment"},a.createElement("a",{className:"nab-php-editor-sidebar__back-to-experiment-link",href:e,title:(0,p._x)("Back to test…","command","nelio-ab-testing")},a.createElement(_.Dashicon,{icon:"arrow-left-alt2"}))),a.createElement("div",{className:"nab-php-editor-sidebar__save-info"},n&&a.createElement("span",{className:"nab-php-editor-sidebar__saving-label"},a.createElement(_.Dashicon,{icon:"cloud"}),(0,p._x)("Saving…","text","nelio-ab-testing")),a.createElement(_.Button,{variant:"primary",disabled:n,onClick:function(){r()}},(0,p._x)("Save and Preview","command","nelio-ab-testing"))))},E=function(){return s((function(e){var t;return null===(t=e(l.store).getExperimentAttribute("links"))||void 0===t?void 0:t.edit}))},y=function(){return[s((function(e){return e(l.store).isExperimentBeingSaved()})),(0,o.useDispatch)(l.store).saveExperiment]},x=function(){var e=(0,r.usePageAttribute)("php-preview/areControlsVisible",!0),t=e[0],n=e[1],i=(0,r.usePageAttribute)("php-preview/activeResolution","desktop"),o=i[0],s=i[1];return a.createElement("div",{className:"nab-php-editor-sidebar__footer-actions"},a.createElement("div",{className:d()({"nab-php-editor-sidebar__visibility-toggle":!0,"nab-php-editor-sidebar__visibility-toggle--hide":!!t,"nab-php-editor-sidebar__visibility-toggle--show":!t})},a.createElement(_.Button,{variant:"link",onClick:function(){return n(!t)}},t?a.createElement(a.Fragment,null,a.createElement(_.Dashicon,{icon:"admin-collapse"}),a.createElement("span",{className:"nab-php-editor-sidebar__visibility-toggle-label"},(0,p._x)("Hide Controls","command","nelio-ab-testing"))):a.createElement(_.Dashicon,{icon:"admin-collapse"}))),a.createElement("div",{className:"nab-php-editor-sidebar__resolutions"},a.createElement("div",{className:d()({"nab-php-editor-sidebar__resolution":!0,"nab-php-editor-sidebar__resolution--is-active":"desktop"===o})},a.createElement(_.Button,{variant:"link",onClick:function(){return s("desktop")}},a.createElement(_.Dashicon,{icon:"desktop"}),a.createElement("span",{className:"screen-reader-text"},(0,p._x)("Enter desktop preview mode","command","nelio-ab-testing")))),a.createElement("div",{className:d()({"nab-php-editor-sidebar__resolution":!0,"nab-php-editor-sidebar__resolution--is-active":"tablet"===o})},a.createElement(_.Button,{variant:"link",onClick:function(){return s("tablet")}},a.createElement(_.Dashicon,{icon:"tablet"}),a.createElement("span",{className:"screen-reader-text"},(0,p._x)("Enter tablet preview mode","command","nelio-ab-testing")))),a.createElement("div",{className:d()({"nab-php-editor-sidebar__resolution":!0,"nab-php-editor-sidebar__resolution--is-active":"mobile"===o})},a.createElement(_.Button,{variant:"link",onClick:function(){return s("mobile")}},a.createElement(_.Dashicon,{icon:"smartphone"}),a.createElement("span",{className:"screen-reader-text"},(0,p._x)("Enter mobile preview mode","command","nelio-ab-testing"))))))},k=function(e){var t=e.className,n=e.alternativeId;return a.createElement("div",{className:d()(["nab-php-editor-sidebar",t])},a.createElement(w,null),a.createElement(b,{alternativeId:n}),a.createElement(h,{alternativeId:n}),a.createElement(x,null))};const N=window.wp.compose,O=window.wp.url;var P,I=function(e){var t=e.className,n=e.alternativeId,i=A(n),o=(0,N.useInstanceId)(I),s=(0,r.usePageAttribute)("php-preview/activeResolution","desktop")[0];return C(o,i),a.createElement("div",{className:d()([t,"nab-php-preview"])},a.createElement("iframe",{id:"nab-php-previewer__iframe-".concat(o),className:d()(["nab-php-preview__iframe","nab-php-preview__iframe--".concat(s)]),title:(0,p._x)("PHP Preview","text","nelio-ab-testing"),src:i}))},C=function(e,t){var n=s((function(e){return e(l.store).isExperimentBeingSaved()})),i=s((function(e){return e(r.store).getPluginSetting("homeUrl")}));(0,a.useEffect)((function(){var r;if(!n&&t){var a=document.getElementById("nab-php-previewer__iframe-".concat(e));if(null===(r=null==a?void 0:a.contentWindow)||void 0===r?void 0:r.location.href){var o=a.contentWindow.location.href,s=(0,O.getQueryArg)(t,"timestamp"),l=(0,O.getQueryArg)(t,"nabnonce"),c=(0,v.getLocalUrlError)(o,i)?t:(0,O.addQueryArgs)(o,{timestamp:s,nabnonce:l});a.contentWindow.location.href=c}}}),[n,t,i])},A=function(e){return s((function(t){var n=(0,t(l.store).getAlternative)(e);return null==n?void 0:n.links.preview}))},S=function(e){var t=e.alternativeId,n=(0,r.usePageAttribute)("php-preview/areControlsVisible",!0)[0];return a.createElement("div",{className:"nab-php-editor"},a.createElement(k,{className:d()({"nab-php-editor__sidebar":!0,"nab-php-editor__sidebar--is-collapsed":!n}),alternativeId:t}),a.createElement(I,{key:"nab-php-editor__preview",className:d()({"nab-php-editor__preview":!0,"nab-php-editor__preview--is-fullscreen":!n}),alternativeId:t}))},j=function(e){var t=e.experimentId,n=e.alternativeId,i=s((function(e){return e(r.store).getExperiment(t)}));return i?a.createElement(a.StrictMode,null,a.createElement(l.EditorProvider,{experiment:i},a.createElement(S,{alternativeId:n}))):null},B=function(){return B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},B.apply(this,arguments)};window.nab=B(B({},(P=window)&&"object"==typeof P&&"nab"in P?window.nab:{}),{initPhpEditorPage:function(e,t){(0,i.registerCoreExperiments)();var n=document.getElementById(e);if(n){var r,o,s=t.experimentId,l=t.alternativeId;r=a.createElement(j,{experimentId:s,alternativeId:l}),(o=n)&&(a.createRoot?(0,a.createRoot)(o).render(r):(0,a.render)(r,o))}}})},6942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,a,i)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],i=e[d][2];for(var s=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,i<o&&(o=i));if(s){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,a,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={6761:0,2948:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,i,o=n[0],s=n[1],l=n[2],c=0;if(o.some((t=>0!==e[t]))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(l)var d=l(r)}for(t&&t(n);c<o.length;c++)i=o[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(d)},n=self.webpackChunknab=self.webpackChunknab||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[2948],(()=>r(3179)));a=r.O(a);var i=nab="undefined"==typeof nab?{}:nab;for(var o in a)i[o]=a[o];a.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();